[
  {
    "file_name": "core/src/slice/sort/stable/mod.rs",
    "item": {
      "type": "Module",
      "name": "slice",
      "body": [
        {
          "file_name": "core/src/slice/sort/stable/mod.rs",
          "item": {
            "type": "Module",
            "name": "sort",
            "body": [
              {
                "file_name": "core/src/slice/sort/stable/mod.rs",
                "item": {
                  "type": "Module",
                  "name": "stable",
                  "body": [
                    {
                      "file_name": "core/src/slice/sort/stable/mod.rs",
                      "item": {
                        "type": "Definition",
                        "name": "sort",
                        "path": [
                          "core",
                          "slice",
                          "sort",
                          "stable",
                          "sort"
                        ],
                        "snippet": [
                          "pub fn sort<T, F: FnMut(&T, &T) -> bool, BufT: BufGuard<T>>(v: &mut [T], is_less: &mut F) {",
                          "    // Arrays of zero-sized types are always all-equal, and thus sorted.",
                          "    if T::IS_ZST {",
                          "        return;",
                          "    }",
                          "",
                          "    // Instrumenting the standard library showed that 90+% of the calls to sort",
                          "    // by rustc are either of size 0 or 1.",
                          "    let len = v.len();",
                          "    if intrinsics::likely(len < 2) {",
                          "        return;",
                          "    }",
                          "",
                          "    // More advanced sorting methods than insertion sort are faster if called in",
                          "    // a hot loop for small inputs, but for general-purpose code the small",
                          "    // binary size of insertion sort is more important. The instruction cache in",
                          "    // modern processors is very valuable, and for a single sort call in general",
                          "    // purpose code any gains from an advanced method are cancelled by i-cache",
                          "    // misses during the sort, and thrashing the i-cache for surrounding code.",
                          "    const MAX_LEN_ALWAYS_INSERTION_SORT: usize = 20;",
                          "    if intrinsics::likely(len <= MAX_LEN_ALWAYS_INSERTION_SORT) {",
                          "        insertion_sort_shift_left(v, 1, is_less);",
                          "        return;",
                          "    }",
                          "",
                          "    driftsort_main::<T, F, BufT>(v, is_less);",
                          "}"
                        ],
                        "definition": {
                          "const_params": [],
                          "ty_params": [
                            "T",
                            "F",
                            "BufT"
                          ],
                          "signature_and_body": {
                            "args": [
                              [
                                "v",
                                {
                                  "type": "Application",
                                  "func": {
                                    "type": "Path",
                                    "path": [
                                      "&mut"
                                    ]
                                  },
                                  "consts": [],
                                  "tys": [
                                    {
                                      "type": "Application",
                                      "func": {
                                        "type": "Path",
                                        "path": [
                                          "slice"
                                        ]
                                      },
                                      "consts": [],
                                      "tys": [
                                        {
                                          "type": "Var",
                                          "name": "T"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                null
                              ],
                              [
                                "is_less",
                                {
                                  "type": "Application",
                                  "func": {
                                    "type": "Path",
                                    "path": [
                                      "&mut"
                                    ]
                                  },
                                  "consts": [],
                                  "tys": [
                                    {
                                      "type": "Var",
                                      "name": "F"
                                    }
                                  ]
                                },
                                null
                              ]
                            ],
                            "ret_ty": {
                              "type": "Path",
                              "path": [
                                "unit"
                              ]
                            },
                            "body": {
                              "Let": {
                                "name": "v",
                                "is_user": false,
                                "init": {
                                  "Call": {
                                    "func": {
                                      "LocalVar": "M.alloc"
                                    },
                                    "args": [
                                      {
                                        "LocalVar": "v"
                                      }
                                    ],
                                    "kind": "Effectful"
                                  }
                                },
                                "body": {
                                  "Let": {
                                    "name": "is_less",
                                    "is_user": false,
                                    "init": {
                                      "Call": {
                                        "func": {
                                          "LocalVar": "M.alloc"
                                        },
                                        "args": [
                                          {
                                            "LocalVar": "is_less"
                                          }
                                        ],
                                        "kind": "Effectful"
                                      }
                                    },
                                    "body": {
                                      "Call": {
                                        "func": {
                                          "LocalVar": "M.catch_return"
                                        },
                                        "args": [
                                          {
                                            "Lambda": {
                                              "args": [],
                                              "body": {
                                                "Call": {
                                                  "func": {
                                                    "LocalVar": "M.read"
                                                  },
                                                  "args": [
                                                    {
                                                      "Let": {
                                                        "name": null,
                                                        "is_user": true,
                                                        "init": {
                                                          "Match": {
                                                            "scrutinee": {
                                                              "Call": {
                                                                "func": {
                                                                  "LocalVar": "M.alloc"
                                                                },
                                                                "args": [
                                                                  {
                                                                    "Tuple": {
                                                                      "elements": []
                                                                    }
                                                                  }
                                                                ],
                                                                "kind": "Effectful"
                                                              }
                                                            },
                                                            "arms": [
                                                              {
                                                                "Lambda": {
                                                                  "args": [
                                                                    [
                                                                      "γ",
                                                                      null
                                                                    ]
                                                                  ],
                                                                  "body": {
                                                                    "Let": {
                                                                      "name": "γ",
                                                                      "is_user": false,
                                                                      "init": {
                                                                        "Use": {
                                                                          "GetConst": [
                                                                            "core",
                                                                            "mem",
                                                                            "SizedTypeProperties",
                                                                            "IS_ZST"
                                                                          ]
                                                                        }
                                                                      },
                                                                      "body": {
                                                                        "Let": {
                                                                          "name": null,
                                                                          "is_user": false,
                                                                          "init": {
                                                                            "Call": {
                                                                              "func": {
                                                                                "LocalVar": "M.is_constant_or_break_match"
                                                                              },
                                                                              "args": [
                                                                                {
                                                                                  "Call": {
                                                                                    "func": {
                                                                                      "LocalVar": "M.read"
                                                                                    },
                                                                                    "args": [
                                                                                      {
                                                                                        "LocalVar": "γ"
                                                                                      }
                                                                                    ],
                                                                                    "kind": "Effectful"
                                                                                  }
                                                                                },
                                                                                {
                                                                                  "Literal": {
                                                                                    "Bool": true
                                                                                  }
                                                                                }
                                                                              ],
                                                                              "kind": "Effectful"
                                                                            }
                                                                          },
                                                                          "body": {
                                                                            "Call": {
                                                                              "func": {
                                                                                "LocalVar": "M.alloc"
                                                                              },
                                                                              "args": [
                                                                                {
                                                                                  "Call": {
                                                                                    "func": {
                                                                                      "LocalVar": "M.never_to_any"
                                                                                    },
                                                                                    "args": [
                                                                                      {
                                                                                        "Call": {
                                                                                          "func": {
                                                                                            "LocalVar": "M.read"
                                                                                          },
                                                                                          "args": [
                                                                                            {
                                                                                              "Return": {
                                                                                                "Tuple": {
                                                                                                  "elements": []
                                                                                                }
                                                                                              }
                                                                                            }
                                                                                          ],
                                                                                          "kind": "Effectful"
                                                                                        }
                                                                                      }
                                                                                    ],
                                                                                    "kind": "Effectful"
                                                                                  }
                                                                                }
                                                                              ],
                                                                              "kind": "Effectful"
                                                                            }
                                                                          }
                                                                        }
                                                                      }
                                                                    }
                                                                  },
                                                                  "is_for_match": true,
                                                                  "is_internal": true
                                                                }
                                                              },
                                                              {
                                                                "Lambda": {
                                                                  "args": [
                                                                    [
                                                                      "γ",
                                                                      null
                                                                    ]
                                                                  ],
                                                                  "body": {
                                                                    "Call": {
                                                                      "func": {
                                                                        "LocalVar": "M.alloc"
                                                                      },
                                                                      "args": [
                                                                        {
                                                                          "Tuple": {
                                                                            "elements": []
                                                                          }
                                                                        }
                                                                      ],
                                                                      "kind": "Effectful"
                                                                    }
                                                                  },
                                                                  "is_for_match": true,
                                                                  "is_internal": true
                                                                }
                                                              }
                                                            ]
                                                          }
                                                        },
                                                        "body": {
                                                          "Let": {
                                                            "name": "len",
                                                            "is_user": true,
                                                            "init": {
                                                              "Call": {
                                                                "func": {
                                                                  "LocalVar": "M.alloc"
                                                                },
                                                                "args": [
                                                                  {
                                                                    "Call": {
                                                                      "func": {
                                                                        "GetAssociatedFunction": {
                                                                          "ty": {
                                                                            "type": "Application",
                                                                            "func": {
                                                                              "type": "Path",
                                                                              "path": [
                                                                                "slice"
                                                                              ]
                                                                            },
                                                                            "consts": [],
                                                                            "tys": [
                                                                              {
                                                                                "type": "Var",
                                                                                "name": "T"
                                                                              }
                                                                            ]
                                                                          },
                                                                          "func": "len",
                                                                          "generic_tys": []
                                                                        }
                                                                      },
                                                                      "args": [
                                                                        {
                                                                          "Call": {
                                                                            "func": {
                                                                              "LocalVar": "M.read"
                                                                            },
                                                                            "args": [
                                                                              {
                                                                                "LocalVar": "v"
                                                                              }
                                                                            ],
                                                                            "kind": "Effectful"
                                                                          }
                                                                        }
                                                                      ],
                                                                      "kind": "Closure"
                                                                    }
                                                                  }
                                                                ],
                                                                "kind": "Effectful"
                                                              }
                                                            },
                                                            "body": {
                                                              "Let": {
                                                                "name": null,
                                                                "is_user": true,
                                                                "init": {
                                                                  "Match": {
                                                                    "scrutinee": {
                                                                      "Call": {
                                                                        "func": {
                                                                          "LocalVar": "M.alloc"
                                                                        },
                                                                        "args": [
                                                                          {
                                                                            "Tuple": {
                                                                              "elements": []
                                                                            }
                                                                          }
                                                                        ],
                                                                        "kind": "Effectful"
                                                                      }
                                                                    },
                                                                    "arms": [
                                                                      {
                                                                        "Lambda": {
                                                                          "args": [
                                                                            [
                                                                              "γ",
                                                                              null
                                                                            ]
                                                                          ],
                                                                          "body": {
                                                                            "Let": {
                                                                              "name": "γ",
                                                                              "is_user": false,
                                                                              "init": {
                                                                                "Use": {
                                                                                  "Call": {
                                                                                    "func": {
                                                                                      "LocalVar": "M.alloc"
                                                                                    },
                                                                                    "args": [
                                                                                      {
                                                                                        "Call": {
                                                                                          "func": {
                                                                                            "GetFunction": {
                                                                                              "func": [
                                                                                                "core",
                                                                                                "intrinsics",
                                                                                                "likely"
                                                                                              ],
                                                                                              "generic_tys": []
                                                                                            }
                                                                                          },
                                                                                          "args": [
                                                                                            {
                                                                                              "Call": {
                                                                                                "func": {
                                                                                                  "LocalVar": "BinOp.lt"
                                                                                                },
                                                                                                "args": [
                                                                                                  {
                                                                                                    "Call": {
                                                                                                      "func": {
                                                                                                        "LocalVar": "M.read"
                                                                                                      },
                                                                                                      "args": [
                                                                                                        {
                                                                                                          "LocalVar": "len"
                                                                                                        }
                                                                                                      ],
                                                                                                      "kind": "Effectful"
                                                                                                    }
                                                                                                  },
                                                                                                  {
                                                                                                    "Literal": {
                                                                                                      "Integer": {
                                                                                                        "kind": "Usize",
                                                                                                        "negative_sign": false,
                                                                                                        "value": 2
                                                                                                      }
                                                                                                    }
                                                                                                  }
                                                                                                ],
                                                                                                "kind": "Effectful"
                                                                                              }
                                                                                            }
                                                                                          ],
                                                                                          "kind": "Closure"
                                                                                        }
                                                                                      }
                                                                                    ],
                                                                                    "kind": "Effectful"
                                                                                  }
                                                                                }
                                                                              },
                                                                              "body": {
                                                                                "Let": {
                                                                                  "name": null,
                                                                                  "is_user": false,
                                                                                  "init": {
                                                                                    "Call": {
                                                                                      "func": {
                                                                                        "LocalVar": "M.is_constant_or_break_match"
                                                                                      },
                                                                                      "args": [
                                                                                        {
                                                                                          "Call": {
                                                                                            "func": {
                                                                                              "LocalVar": "M.read"
                                                                                            },
                                                                                            "args": [
                                                                                              {
                                                                                                "LocalVar": "γ"
                                                                                              }
                                                                                            ],
                                                                                            "kind": "Effectful"
                                                                                          }
                                                                                        },
                                                                                        {
                                                                                          "Literal": {
                                                                                            "Bool": true
                                                                                          }
                                                                                        }
                                                                                      ],
                                                                                      "kind": "Effectful"
                                                                                    }
                                                                                  },
                                                                                  "body": {
                                                                                    "Call": {
                                                                                      "func": {
                                                                                        "LocalVar": "M.alloc"
                                                                                      },
                                                                                      "args": [
                                                                                        {
                                                                                          "Call": {
                                                                                            "func": {
                                                                                              "LocalVar": "M.never_to_any"
                                                                                            },
                                                                                            "args": [
                                                                                              {
                                                                                                "Call": {
                                                                                                  "func": {
                                                                                                    "LocalVar": "M.read"
                                                                                                  },
                                                                                                  "args": [
                                                                                                    {
                                                                                                      "Return": {
                                                                                                        "Tuple": {
                                                                                                          "elements": []
                                                                                                        }
                                                                                                      }
                                                                                                    }
                                                                                                  ],
                                                                                                  "kind": "Effectful"
                                                                                                }
                                                                                              }
                                                                                            ],
                                                                                            "kind": "Effectful"
                                                                                          }
                                                                                        }
                                                                                      ],
                                                                                      "kind": "Effectful"
                                                                                    }
                                                                                  }
                                                                                }
                                                                              }
                                                                            }
                                                                          },
                                                                          "is_for_match": true,
                                                                          "is_internal": true
                                                                        }
                                                                      },
                                                                      {
                                                                        "Lambda": {
                                                                          "args": [
                                                                            [
                                                                              "γ",
                                                                              null
                                                                            ]
                                                                          ],
                                                                          "body": {
                                                                            "Call": {
                                                                              "func": {
                                                                                "LocalVar": "M.alloc"
                                                                              },
                                                                              "args": [
                                                                                {
                                                                                  "Tuple": {
                                                                                    "elements": []
                                                                                  }
                                                                                }
                                                                              ],
                                                                              "kind": "Effectful"
                                                                            }
                                                                          },
                                                                          "is_for_match": true,
                                                                          "is_internal": true
                                                                        }
                                                                      }
                                                                    ]
                                                                  }
                                                                },
                                                                "body": {
                                                                  "Let": {
                                                                    "name": null,
                                                                    "is_user": true,
                                                                    "init": {
                                                                      "Match": {
                                                                        "scrutinee": {
                                                                          "Call": {
                                                                            "func": {
                                                                              "LocalVar": "M.alloc"
                                                                            },
                                                                            "args": [
                                                                              {
                                                                                "Tuple": {
                                                                                  "elements": []
                                                                                }
                                                                              }
                                                                            ],
                                                                            "kind": "Effectful"
                                                                          }
                                                                        },
                                                                        "arms": [
                                                                          {
                                                                            "Lambda": {
                                                                              "args": [
                                                                                [
                                                                                  "γ",
                                                                                  null
                                                                                ]
                                                                              ],
                                                                              "body": {
                                                                                "Let": {
                                                                                  "name": "γ",
                                                                                  "is_user": false,
                                                                                  "init": {
                                                                                    "Use": {
                                                                                      "Call": {
                                                                                        "func": {
                                                                                          "LocalVar": "M.alloc"
                                                                                        },
                                                                                        "args": [
                                                                                          {
                                                                                            "Call": {
                                                                                              "func": {
                                                                                                "GetFunction": {
                                                                                                  "func": [
                                                                                                    "core",
                                                                                                    "intrinsics",
                                                                                                    "likely"
                                                                                                  ],
                                                                                                  "generic_tys": []
                                                                                                }
                                                                                              },
                                                                                              "args": [
                                                                                                {
                                                                                                  "Call": {
                                                                                                    "func": {
                                                                                                      "LocalVar": "BinOp.le"
                                                                                                    },
                                                                                                    "args": [
                                                                                                      {
                                                                                                        "Call": {
                                                                                                          "func": {
                                                                                                            "LocalVar": "M.read"
                                                                                                          },
                                                                                                          "args": [
                                                                                                            {
                                                                                                              "LocalVar": "len"
                                                                                                            }
                                                                                                          ],
                                                                                                          "kind": "Effectful"
                                                                                                        }
                                                                                                      },
                                                                                                      {
                                                                                                        "Call": {
                                                                                                          "func": {
                                                                                                            "LocalVar": "M.read"
                                                                                                          },
                                                                                                          "args": [
                                                                                                            {
                                                                                                              "GetConst": [
                                                                                                                "core",
                                                                                                                "slice",
                                                                                                                "sort",
                                                                                                                "stable",
                                                                                                                "sort",
                                                                                                                "MAX_LEN_ALWAYS_INSERTION_SORT"
                                                                                                              ]
                                                                                                            }
                                                                                                          ],
                                                                                                          "kind": "Effectful"
                                                                                                        }
                                                                                                      }
                                                                                                    ],
                                                                                                    "kind": "Effectful"
                                                                                                  }
                                                                                                }
                                                                                              ],
                                                                                              "kind": "Closure"
                                                                                            }
                                                                                          }
                                                                                        ],
                                                                                        "kind": "Effectful"
                                                                                      }
                                                                                    }
                                                                                  },
                                                                                  "body": {
                                                                                    "Let": {
                                                                                      "name": null,
                                                                                      "is_user": false,
                                                                                      "init": {
                                                                                        "Call": {
                                                                                          "func": {
                                                                                            "LocalVar": "M.is_constant_or_break_match"
                                                                                          },
                                                                                          "args": [
                                                                                            {
                                                                                              "Call": {
                                                                                                "func": {
                                                                                                  "LocalVar": "M.read"
                                                                                                },
                                                                                                "args": [
                                                                                                  {
                                                                                                    "LocalVar": "γ"
                                                                                                  }
                                                                                                ],
                                                                                                "kind": "Effectful"
                                                                                              }
                                                                                            },
                                                                                            {
                                                                                              "Literal": {
                                                                                                "Bool": true
                                                                                              }
                                                                                            }
                                                                                          ],
                                                                                          "kind": "Effectful"
                                                                                        }
                                                                                      },
                                                                                      "body": {
                                                                                        "Call": {
                                                                                          "func": {
                                                                                            "LocalVar": "M.alloc"
                                                                                          },
                                                                                          "args": [
                                                                                            {
                                                                                              "Call": {
                                                                                                "func": {
                                                                                                  "LocalVar": "M.never_to_any"
                                                                                                },
                                                                                                "args": [
                                                                                                  {
                                                                                                    "Call": {
                                                                                                      "func": {
                                                                                                        "LocalVar": "M.read"
                                                                                                      },
                                                                                                      "args": [
                                                                                                        {
                                                                                                          "Let": {
                                                                                                            "name": null,
                                                                                                            "is_user": true,
                                                                                                            "init": {
                                                                                                              "Call": {
                                                                                                                "func": {
                                                                                                                  "LocalVar": "M.alloc"
                                                                                                                },
                                                                                                                "args": [
                                                                                                                  {
                                                                                                                    "Call": {
                                                                                                                      "func": {
                                                                                                                        "GetFunction": {
                                                                                                                          "func": [
                                                                                                                            "core",
                                                                                                                            "slice",
                                                                                                                            "sort",
                                                                                                                            "shared",
                                                                                                                            "smallsort",
                                                                                                                            "insertion_sort_shift_left"
                                                                                                                          ],
                                                                                                                          "generic_tys": [
                                                                                                                            {
                                                                                                                              "type": "Var",
                                                                                                                              "name": "T"
                                                                                                                            },
                                                                                                                            {
                                                                                                                              "type": "Var",
                                                                                                                              "name": "F"
                                                                                                                            }
                                                                                                                          ]
                                                                                                                        }
                                                                                                                      },
                                                                                                                      "args": [
                                                                                                                        {
                                                                                                                          "Call": {
                                                                                                                            "func": {
                                                                                                                              "LocalVar": "M.read"
                                                                                                                            },
                                                                                                                            "args": [
                                                                                                                              {
                                                                                                                                "LocalVar": "v"
                                                                                                                              }
                                                                                                                            ],
                                                                                                                            "kind": "Effectful"
                                                                                                                          }
                                                                                                                        },
                                                                                                                        {
                                                                                                                          "Literal": {
                                                                                                                            "Integer": {
                                                                                                                              "kind": "Usize",
                                                                                                                              "negative_sign": false,
                                                                                                                              "value": 1
                                                                                                                            }
                                                                                                                          }
                                                                                                                        },
                                                                                                                        {
                                                                                                                          "Call": {
                                                                                                                            "func": {
                                                                                                                              "LocalVar": "M.read"
                                                                                                                            },
                                                                                                                            "args": [
                                                                                                                              {
                                                                                                                                "LocalVar": "is_less"
                                                                                                                              }
                                                                                                                            ],
                                                                                                                            "kind": "Effectful"
                                                                                                                          }
                                                                                                                        }
                                                                                                                      ],
                                                                                                                      "kind": "Closure"
                                                                                                                    }
                                                                                                                  }
                                                                                                                ],
                                                                                                                "kind": "Effectful"
                                                                                                              }
                                                                                                            },
                                                                                                            "body": {
                                                                                                              "Return": {
                                                                                                                "Tuple": {
                                                                                                                  "elements": []
                                                                                                                }
                                                                                                              }
                                                                                                            }
                                                                                                          }
                                                                                                        }
                                                                                                      ],
                                                                                                      "kind": "Effectful"
                                                                                                    }
                                                                                                  }
                                                                                                ],
                                                                                                "kind": "Effectful"
                                                                                              }
                                                                                            }
                                                                                          ],
                                                                                          "kind": "Effectful"
                                                                                        }
                                                                                      }
                                                                                    }
                                                                                  }
                                                                                }
                                                                              },
                                                                              "is_for_match": true,
                                                                              "is_internal": true
                                                                            }
                                                                          },
                                                                          {
                                                                            "Lambda": {
                                                                              "args": [
                                                                                [
                                                                                  "γ",
                                                                                  null
                                                                                ]
                                                                              ],
                                                                              "body": {
                                                                                "Call": {
                                                                                  "func": {
                                                                                    "LocalVar": "M.alloc"
                                                                                  },
                                                                                  "args": [
                                                                                    {
                                                                                      "Tuple": {
                                                                                        "elements": []
                                                                                      }
                                                                                    }
                                                                                  ],
                                                                                  "kind": "Effectful"
                                                                                }
                                                                              },
                                                                              "is_for_match": true,
                                                                              "is_internal": true
                                                                            }
                                                                          }
                                                                        ]
                                                                      }
                                                                    },
                                                                    "body": {
                                                                      "Let": {
                                                                        "name": null,
                                                                        "is_user": true,
                                                                        "init": {
                                                                          "Call": {
                                                                            "func": {
                                                                              "LocalVar": "M.alloc"
                                                                            },
                                                                            "args": [
                                                                              {
                                                                                "Call": {
                                                                                  "func": {
                                                                                    "GetFunction": {
                                                                                      "func": [
                                                                                        "core",
                                                                                        "slice",
                                                                                        "sort",
                                                                                        "stable",
                                                                                        "driftsort_main"
                                                                                      ],
                                                                                      "generic_tys": [
                                                                                        {
                                                                                          "type": "Var",
                                                                                          "name": "T"
                                                                                        },
                                                                                        {
                                                                                          "type": "Var",
                                                                                          "name": "F"
                                                                                        },
                                                                                        {
                                                                                          "type": "Var",
                                                                                          "name": "BufT"
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  },
                                                                                  "args": [
                                                                                    {
                                                                                      "Call": {
                                                                                        "func": {
                                                                                          "LocalVar": "M.read"
                                                                                        },
                                                                                        "args": [
                                                                                          {
                                                                                            "LocalVar": "v"
                                                                                          }
                                                                                        ],
                                                                                        "kind": "Effectful"
                                                                                      }
                                                                                    },
                                                                                    {
                                                                                      "Call": {
                                                                                        "func": {
                                                                                          "LocalVar": "M.read"
                                                                                        },
                                                                                        "args": [
                                                                                          {
                                                                                            "LocalVar": "is_less"
                                                                                          }
                                                                                        ],
                                                                                        "kind": "Effectful"
                                                                                      }
                                                                                    }
                                                                                  ],
                                                                                  "kind": "Closure"
                                                                                }
                                                                              }
                                                                            ],
                                                                            "kind": "Effectful"
                                                                          }
                                                                        },
                                                                        "body": {
                                                                          "Call": {
                                                                            "func": {
                                                                              "LocalVar": "M.alloc"
                                                                            },
                                                                            "args": [
                                                                              {
                                                                                "Tuple": {
                                                                                  "elements": []
                                                                                }
                                                                              }
                                                                            ],
                                                                            "kind": "Effectful"
                                                                          }
                                                                        }
                                                                      }
                                                                    }
                                                                  }
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  ],
                                                  "kind": "Effectful"
                                                }
                                              },
                                              "is_for_match": false,
                                              "is_internal": true
                                            }
                                          }
                                        ],
                                        "kind": "Effectful"
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    {
                      "file_name": "core/src/slice/sort/stable/mod.rs",
                      "item": {
                        "type": "Module",
                        "name": "sort",
                        "body": [
                          {
                            "file_name": "core/src/slice/sort/stable/mod.rs",
                            "item": {
                              "type": "Const",
                              "name": "value_MAX_LEN_ALWAYS_INSERTION_SORT",
                              "value": {
                                "Call": {
                                  "func": {
                                    "LocalVar": "M.alloc"
                                  },
                                  "args": [
                                    {
                                      "Literal": {
                                        "Integer": {
                                          "kind": "Usize",
                                          "negative_sign": false,
                                          "value": 20
                                        }
                                      }
                                    }
                                  ],
                                  "kind": "Effectful"
                                }
                              }
                            }
                          }
                        ]
                      }
                    },
                    {
                      "file_name": "core/src/slice/sort/stable/mod.rs",
                      "item": {
                        "type": "Definition",
                        "name": "driftsort_main",
                        "path": [
                          "core",
                          "slice",
                          "sort",
                          "stable",
                          "driftsort_main"
                        ],
                        "snippet": [
                          "fn driftsort_main<T, F: FnMut(&T, &T) -> bool, BufT: BufGuard<T>>(v: &mut [T], is_less: &mut F) {",
                          "    // By allocating n elements of memory we can ensure the entire input can",
                          "    // be sorted using stable quicksort, which allows better performance on",
                          "    // random and low-cardinality distributions. However, we still want to",
                          "    // reduce our memory usage to n / 2 for large inputs. We do this by scaling",
                          "    // our allocation as max(n / 2, min(n, 8MB)), ensuring we scale like n for",
                          "    // small inputs and n / 2 for large inputs, without a sudden drop off. We",
                          "    // also need to ensure our alloc >= MIN_SMALL_SORT_SCRATCH_LEN, as the",
                          "    // small-sort always needs this much memory.",
                          "    const MAX_FULL_ALLOC_BYTES: usize = 8_000_000; // 8MB",
                          "    let max_full_alloc = MAX_FULL_ALLOC_BYTES / mem::size_of::<T>();",
                          "    let len = v.len();",
                          "    let alloc_len =",
                          "        cmp::max(cmp::max(len / 2, cmp::min(len, max_full_alloc)), SMALL_SORT_GENERAL_SCRATCH_LEN);",
                          "",
                          "    // For small inputs 4KiB of stack storage suffices, which allows us to avoid",
                          "    // calling the (de-)allocator. Benchmarks showed this was quite beneficial.",
                          "    let mut stack_buf = AlignedStorage::<T, 4096>::new();",
                          "    let stack_scratch = stack_buf.as_uninit_slice_mut();",
                          "    let mut heap_buf;",
                          "    let scratch = if stack_scratch.len() >= alloc_len {",
                          "        stack_scratch",
                          "    } else {",
                          "        heap_buf = BufT::with_capacity(alloc_len);",
                          "        heap_buf.as_uninit_slice_mut()",
                          "    };",
                          "",
                          "    // For small inputs using quicksort is not yet beneficial, and a single",
                          "    // small-sort or two small-sorts plus a single merge outperforms it, so use",
                          "    // eager mode.",
                          "    let eager_sort = len <= T::small_sort_threshold() * 2;",
                          "    crate::slice::sort::stable::drift::sort(v, scratch, eager_sort, is_less);",
                          "}"
                        ],
                        "definition": {
                          "const_params": [],
                          "ty_params": [
                            "T",
                            "F",
                            "BufT"
                          ],
                          "signature_and_body": {
                            "args": [
                              [
                                "v",
                                {
                                  "type": "Application",
                                  "func": {
                                    "type": "Path",
                                    "path": [
                                      "&mut"
                                    ]
                                  },
                                  "consts": [],
                                  "tys": [
                                    {
                                      "type": "Application",
                                      "func": {
                                        "type": "Path",
                                        "path": [
                                          "slice"
                                        ]
                                      },
                                      "consts": [],
                                      "tys": [
                                        {
                                          "type": "Var",
                                          "name": "T"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                null
                              ],
                              [
                                "is_less",
                                {
                                  "type": "Application",
                                  "func": {
                                    "type": "Path",
                                    "path": [
                                      "&mut"
                                    ]
                                  },
                                  "consts": [],
                                  "tys": [
                                    {
                                      "type": "Var",
                                      "name": "F"
                                    }
                                  ]
                                },
                                null
                              ]
                            ],
                            "ret_ty": {
                              "type": "Path",
                              "path": [
                                "unit"
                              ]
                            },
                            "body": {
                              "Let": {
                                "name": "v",
                                "is_user": false,
                                "init": {
                                  "Call": {
                                    "func": {
                                      "LocalVar": "M.alloc"
                                    },
                                    "args": [
                                      {
                                        "LocalVar": "v"
                                      }
                                    ],
                                    "kind": "Effectful"
                                  }
                                },
                                "body": {
                                  "Let": {
                                    "name": "is_less",
                                    "is_user": false,
                                    "init": {
                                      "Call": {
                                        "func": {
                                          "LocalVar": "M.alloc"
                                        },
                                        "args": [
                                          {
                                            "LocalVar": "is_less"
                                          }
                                        ],
                                        "kind": "Effectful"
                                      }
                                    },
                                    "body": {
                                      "Call": {
                                        "func": {
                                          "LocalVar": "M.read"
                                        },
                                        "args": [
                                          {
                                            "Let": {
                                              "name": "max_full_alloc",
                                              "is_user": true,
                                              "init": {
                                                "Call": {
                                                  "func": {
                                                    "LocalVar": "M.alloc"
                                                  },
                                                  "args": [
                                                    {
                                                      "Call": {
                                                        "func": {
                                                          "LocalVar": "BinOp.Wrap.div"
                                                        },
                                                        "args": [
                                                          {
                                                            "Call": {
                                                              "func": {
                                                                "LocalVar": "M.read"
                                                              },
                                                              "args": [
                                                                {
                                                                  "GetConst": [
                                                                    "core",
                                                                    "slice",
                                                                    "sort",
                                                                    "stable",
                                                                    "driftsort_main",
                                                                    "MAX_FULL_ALLOC_BYTES"
                                                                  ]
                                                                }
                                                              ],
                                                              "kind": "Effectful"
                                                            }
                                                          },
                                                          {
                                                            "Call": {
                                                              "func": {
                                                                "GetFunction": {
                                                                  "func": [
                                                                    "core",
                                                                    "mem",
                                                                    "size_of"
                                                                  ],
                                                                  "generic_tys": [
                                                                    {
                                                                      "type": "Var",
                                                                      "name": "T"
                                                                    }
                                                                  ]
                                                                }
                                                              },
                                                              "args": [],
                                                              "kind": "Closure"
                                                            }
                                                          }
                                                        ],
                                                        "kind": "Effectful"
                                                      }
                                                    }
                                                  ],
                                                  "kind": "Effectful"
                                                }
                                              },
                                              "body": {
                                                "Let": {
                                                  "name": "len",
                                                  "is_user": true,
                                                  "init": {
                                                    "Call": {
                                                      "func": {
                                                        "LocalVar": "M.alloc"
                                                      },
                                                      "args": [
                                                        {
                                                          "Call": {
                                                            "func": {
                                                              "GetAssociatedFunction": {
                                                                "ty": {
                                                                  "type": "Application",
                                                                  "func": {
                                                                    "type": "Path",
                                                                    "path": [
                                                                      "slice"
                                                                    ]
                                                                  },
                                                                  "consts": [],
                                                                  "tys": [
                                                                    {
                                                                      "type": "Var",
                                                                      "name": "T"
                                                                    }
                                                                  ]
                                                                },
                                                                "func": "len",
                                                                "generic_tys": []
                                                              }
                                                            },
                                                            "args": [
                                                              {
                                                                "Call": {
                                                                  "func": {
                                                                    "LocalVar": "M.read"
                                                                  },
                                                                  "args": [
                                                                    {
                                                                      "LocalVar": "v"
                                                                    }
                                                                  ],
                                                                  "kind": "Effectful"
                                                                }
                                                              }
                                                            ],
                                                            "kind": "Closure"
                                                          }
                                                        }
                                                      ],
                                                      "kind": "Effectful"
                                                    }
                                                  },
                                                  "body": {
                                                    "Let": {
                                                      "name": "alloc_len",
                                                      "is_user": true,
                                                      "init": {
                                                        "Call": {
                                                          "func": {
                                                            "LocalVar": "M.alloc"
                                                          },
                                                          "args": [
                                                            {
                                                              "Call": {
                                                                "func": {
                                                                  "GetFunction": {
                                                                    "func": [
                                                                      "core",
                                                                      "cmp",
                                                                      "max"
                                                                    ],
                                                                    "generic_tys": [
                                                                      {
                                                                        "type": "Path",
                                                                        "path": [
                                                                          "usize"
                                                                        ]
                                                                      }
                                                                    ]
                                                                  }
                                                                },
                                                                "args": [
                                                                  {
                                                                    "Call": {
                                                                      "func": {
                                                                        "GetFunction": {
                                                                          "func": [
                                                                            "core",
                                                                            "cmp",
                                                                            "max"
                                                                          ],
                                                                          "generic_tys": [
                                                                            {
                                                                              "type": "Path",
                                                                              "path": [
                                                                                "usize"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      },
                                                                      "args": [
                                                                        {
                                                                          "Call": {
                                                                            "func": {
                                                                              "LocalVar": "BinOp.Wrap.div"
                                                                            },
                                                                            "args": [
                                                                              {
                                                                                "Call": {
                                                                                  "func": {
                                                                                    "LocalVar": "M.read"
                                                                                  },
                                                                                  "args": [
                                                                                    {
                                                                                      "LocalVar": "len"
                                                                                    }
                                                                                  ],
                                                                                  "kind": "Effectful"
                                                                                }
                                                                              },
                                                                              {
                                                                                "Literal": {
                                                                                  "Integer": {
                                                                                    "kind": "Usize",
                                                                                    "negative_sign": false,
                                                                                    "value": 2
                                                                                  }
                                                                                }
                                                                              }
                                                                            ],
                                                                            "kind": "Effectful"
                                                                          }
                                                                        },
                                                                        {
                                                                          "Call": {
                                                                            "func": {
                                                                              "GetFunction": {
                                                                                "func": [
                                                                                  "core",
                                                                                  "cmp",
                                                                                  "min"
                                                                                ],
                                                                                "generic_tys": [
                                                                                  {
                                                                                    "type": "Path",
                                                                                    "path": [
                                                                                      "usize"
                                                                                    ]
                                                                                  }
                                                                                ]
                                                                              }
                                                                            },
                                                                            "args": [
                                                                              {
                                                                                "Call": {
                                                                                  "func": {
                                                                                    "LocalVar": "M.read"
                                                                                  },
                                                                                  "args": [
                                                                                    {
                                                                                      "LocalVar": "len"
                                                                                    }
                                                                                  ],
                                                                                  "kind": "Effectful"
                                                                                }
                                                                              },
                                                                              {
                                                                                "Call": {
                                                                                  "func": {
                                                                                    "LocalVar": "M.read"
                                                                                  },
                                                                                  "args": [
                                                                                    {
                                                                                      "LocalVar": "max_full_alloc"
                                                                                    }
                                                                                  ],
                                                                                  "kind": "Effectful"
                                                                                }
                                                                              }
                                                                            ],
                                                                            "kind": "Closure"
                                                                          }
                                                                        }
                                                                      ],
                                                                      "kind": "Closure"
                                                                    }
                                                                  },
                                                                  {
                                                                    "Call": {
                                                                      "func": {
                                                                        "LocalVar": "M.read"
                                                                      },
                                                                      "args": [
                                                                        {
                                                                          "GetConst": [
                                                                            "core",
                                                                            "slice",
                                                                            "sort",
                                                                            "shared",
                                                                            "smallsort",
                                                                            "SMALL_SORT_GENERAL_SCRATCH_LEN"
                                                                          ]
                                                                        }
                                                                      ],
                                                                      "kind": "Effectful"
                                                                    }
                                                                  }
                                                                ],
                                                                "kind": "Closure"
                                                              }
                                                            }
                                                          ],
                                                          "kind": "Effectful"
                                                        }
                                                      },
                                                      "body": {
                                                        "Let": {
                                                          "name": "stack_buf",
                                                          "is_user": true,
                                                          "init": {
                                                            "Call": {
                                                              "func": {
                                                                "LocalVar": "M.alloc"
                                                              },
                                                              "args": [
                                                                {
                                                                  "Call": {
                                                                    "func": {
                                                                      "GetAssociatedFunction": {
                                                                        "ty": {
                                                                          "type": "Application",
                                                                          "func": {
                                                                            "type": "Path",
                                                                            "path": [
                                                                              "core",
                                                                              "slice",
                                                                              "sort",
                                                                              "stable",
                                                                              "AlignedStorage"
                                                                            ]
                                                                          },
                                                                          "consts": [
                                                                            {
                                                                              "Literal": {
                                                                                "Integer": {
                                                                                  "kind": "Usize",
                                                                                  "negative_sign": false,
                                                                                  "value": 4096
                                                                                }
                                                                              }
                                                                            }
                                                                          ],
                                                                          "tys": [
                                                                            {
                                                                              "type": "Var",
                                                                              "name": "T"
                                                                            }
                                                                          ]
                                                                        },
                                                                        "func": "new",
                                                                        "generic_tys": []
                                                                      }
                                                                    },
                                                                    "args": [],
                                                                    "kind": "Closure"
                                                                  }
                                                                }
                                                              ],
                                                              "kind": "Effectful"
                                                            }
                                                          },
                                                          "body": {
                                                            "Let": {
                                                              "name": "stack_scratch",
                                                              "is_user": true,
                                                              "init": {
                                                                "Call": {
                                                                  "func": {
                                                                    "LocalVar": "M.alloc"
                                                                  },
                                                                  "args": [
                                                                    {
                                                                      "Call": {
                                                                        "func": {
                                                                          "GetAssociatedFunction": {
                                                                            "ty": {
                                                                              "type": "Application",
                                                                              "func": {
                                                                                "type": "Path",
                                                                                "path": [
                                                                                  "core",
                                                                                  "slice",
                                                                                  "sort",
                                                                                  "stable",
                                                                                  "AlignedStorage"
                                                                                ]
                                                                              },
                                                                              "consts": [
                                                                                {
                                                                                  "Literal": {
                                                                                    "Integer": {
                                                                                      "kind": "Usize",
                                                                                      "negative_sign": false,
                                                                                      "value": 4096
                                                                                    }
                                                                                  }
                                                                                }
                                                                              ],
                                                                              "tys": [
                                                                                {
                                                                                  "type": "Var",
                                                                                  "name": "T"
                                                                                }
                                                                              ]
                                                                            },
                                                                            "func": "as_uninit_slice_mut",
                                                                            "generic_tys": []
                                                                          }
                                                                        },
                                                                        "args": [
                                                                          {
                                                                            "LocalVar": "stack_buf"
                                                                          }
                                                                        ],
                                                                        "kind": "Closure"
                                                                      }
                                                                    }
                                                                  ],
                                                                  "kind": "Effectful"
                                                                }
                                                              },
                                                              "body": {
                                                                "Let": {
                                                                  "name": "heap_buf",
                                                                  "is_user": true,
                                                                  "init": {
                                                                    "Call": {
                                                                      "func": {
                                                                        "LocalVar": "M.copy"
                                                                      },
                                                                      "args": [
                                                                        {
                                                                          "LocalVar": "Value.DeclaredButUndefined"
                                                                        }
                                                                      ],
                                                                      "kind": "Effectful"
                                                                    }
                                                                  },
                                                                  "body": {
                                                                    "Let": {
                                                                      "name": "scratch",
                                                                      "is_user": true,
                                                                      "init": {
                                                                        "Call": {
                                                                          "func": {
                                                                            "LocalVar": "M.copy"
                                                                          },
                                                                          "args": [
                                                                            {
                                                                              "Match": {
                                                                                "scrutinee": {
                                                                                  "Call": {
                                                                                    "func": {
                                                                                      "LocalVar": "M.alloc"
                                                                                    },
                                                                                    "args": [
                                                                                      {
                                                                                        "Tuple": {
                                                                                          "elements": []
                                                                                        }
                                                                                      }
                                                                                    ],
                                                                                    "kind": "Effectful"
                                                                                  }
                                                                                },
                                                                                "arms": [
                                                                                  {
                                                                                    "Lambda": {
                                                                                      "args": [
                                                                                        [
                                                                                          "γ",
                                                                                          null
                                                                                        ]
                                                                                      ],
                                                                                      "body": {
                                                                                        "Let": {
                                                                                          "name": "γ",
                                                                                          "is_user": false,
                                                                                          "init": {
                                                                                            "Use": {
                                                                                              "Call": {
                                                                                                "func": {
                                                                                                  "LocalVar": "M.alloc"
                                                                                                },
                                                                                                "args": [
                                                                                                  {
                                                                                                    "Call": {
                                                                                                      "func": {
                                                                                                        "LocalVar": "BinOp.ge"
                                                                                                      },
                                                                                                      "args": [
                                                                                                        {
                                                                                                          "Call": {
                                                                                                            "func": {
                                                                                                              "GetAssociatedFunction": {
                                                                                                                "ty": {
                                                                                                                  "type": "Application",
                                                                                                                  "func": {
                                                                                                                    "type": "Path",
                                                                                                                    "path": [
                                                                                                                      "slice"
                                                                                                                    ]
                                                                                                                  },
                                                                                                                  "consts": [],
                                                                                                                  "tys": [
                                                                                                                    {
                                                                                                                      "type": "Application",
                                                                                                                      "func": {
                                                                                                                        "type": "Path",
                                                                                                                        "path": [
                                                                                                                          "core",
                                                                                                                          "mem",
                                                                                                                          "maybe_uninit",
                                                                                                                          "MaybeUninit"
                                                                                                                        ]
                                                                                                                      },
                                                                                                                      "consts": [],
                                                                                                                      "tys": [
                                                                                                                        {
                                                                                                                          "type": "Var",
                                                                                                                          "name": "T"
                                                                                                                        }
                                                                                                                      ]
                                                                                                                    }
                                                                                                                  ]
                                                                                                                },
                                                                                                                "func": "len",
                                                                                                                "generic_tys": []
                                                                                                              }
                                                                                                            },
                                                                                                            "args": [
                                                                                                              {
                                                                                                                "Call": {
                                                                                                                  "func": {
                                                                                                                    "LocalVar": "M.read"
                                                                                                                  },
                                                                                                                  "args": [
                                                                                                                    {
                                                                                                                      "LocalVar": "stack_scratch"
                                                                                                                    }
                                                                                                                  ],
                                                                                                                  "kind": "Effectful"
                                                                                                                }
                                                                                                              }
                                                                                                            ],
                                                                                                            "kind": "Closure"
                                                                                                          }
                                                                                                        },
                                                                                                        {
                                                                                                          "Call": {
                                                                                                            "func": {
                                                                                                              "LocalVar": "M.read"
                                                                                                            },
                                                                                                            "args": [
                                                                                                              {
                                                                                                                "LocalVar": "alloc_len"
                                                                                                              }
                                                                                                            ],
                                                                                                            "kind": "Effectful"
                                                                                                          }
                                                                                                        }
                                                                                                      ],
                                                                                                      "kind": "Effectful"
                                                                                                    }
                                                                                                  }
                                                                                                ],
                                                                                                "kind": "Effectful"
                                                                                              }
                                                                                            }
                                                                                          },
                                                                                          "body": {
                                                                                            "Let": {
                                                                                              "name": null,
                                                                                              "is_user": false,
                                                                                              "init": {
                                                                                                "Call": {
                                                                                                  "func": {
                                                                                                    "LocalVar": "M.is_constant_or_break_match"
                                                                                                  },
                                                                                                  "args": [
                                                                                                    {
                                                                                                      "Call": {
                                                                                                        "func": {
                                                                                                          "LocalVar": "M.read"
                                                                                                        },
                                                                                                        "args": [
                                                                                                          {
                                                                                                            "LocalVar": "γ"
                                                                                                          }
                                                                                                        ],
                                                                                                        "kind": "Effectful"
                                                                                                      }
                                                                                                    },
                                                                                                    {
                                                                                                      "Literal": {
                                                                                                        "Bool": true
                                                                                                      }
                                                                                                    }
                                                                                                  ],
                                                                                                  "kind": "Effectful"
                                                                                                }
                                                                                              },
                                                                                              "body": {
                                                                                                "LocalVar": "stack_scratch"
                                                                                              }
                                                                                            }
                                                                                          }
                                                                                        }
                                                                                      },
                                                                                      "is_for_match": true,
                                                                                      "is_internal": true
                                                                                    }
                                                                                  },
                                                                                  {
                                                                                    "Lambda": {
                                                                                      "args": [
                                                                                        [
                                                                                          "γ",
                                                                                          null
                                                                                        ]
                                                                                      ],
                                                                                      "body": {
                                                                                        "Call": {
                                                                                          "func": {
                                                                                            "LocalVar": "M.alloc"
                                                                                          },
                                                                                          "args": [
                                                                                            {
                                                                                              "Call": {
                                                                                                "func": {
                                                                                                  "LocalVar": "M.read"
                                                                                                },
                                                                                                "args": [
                                                                                                  {
                                                                                                    "Let": {
                                                                                                      "name": null,
                                                                                                      "is_user": true,
                                                                                                      "init": {
                                                                                                        "Call": {
                                                                                                          "func": {
                                                                                                            "LocalVar": "M.write"
                                                                                                          },
                                                                                                          "args": [
                                                                                                            {
                                                                                                              "LocalVar": "heap_buf"
                                                                                                            },
                                                                                                            {
                                                                                                              "Call": {
                                                                                                                "func": {
                                                                                                                  "GetTraitMethod": {
                                                                                                                    "trait_name": [
                                                                                                                      "core",
                                                                                                                      "slice",
                                                                                                                      "sort",
                                                                                                                      "stable",
                                                                                                                      "BufGuard"
                                                                                                                    ],
                                                                                                                    "self_ty": {
                                                                                                                      "type": "Var",
                                                                                                                      "name": "BufT"
                                                                                                                    },
                                                                                                                    "trait_tys": [
                                                                                                                      {
                                                                                                                        "type": "Var",
                                                                                                                        "name": "T"
                                                                                                                      }
                                                                                                                    ],
                                                                                                                    "method_name": "with_capacity",
                                                                                                                    "generic_tys": []
                                                                                                                  }
                                                                                                                },
                                                                                                                "args": [
                                                                                                                  {
                                                                                                                    "Call": {
                                                                                                                      "func": {
                                                                                                                        "LocalVar": "M.read"
                                                                                                                      },
                                                                                                                      "args": [
                                                                                                                        {
                                                                                                                          "LocalVar": "alloc_len"
                                                                                                                        }
                                                                                                                      ],
                                                                                                                      "kind": "Effectful"
                                                                                                                    }
                                                                                                                  }
                                                                                                                ],
                                                                                                                "kind": "Closure"
                                                                                                              }
                                                                                                            }
                                                                                                          ],
                                                                                                          "kind": "Effectful"
                                                                                                        }
                                                                                                      },
                                                                                                      "body": {
                                                                                                        "Call": {
                                                                                                          "func": {
                                                                                                            "LocalVar": "M.alloc"
                                                                                                          },
                                                                                                          "args": [
                                                                                                            {
                                                                                                              "Call": {
                                                                                                                "func": {
                                                                                                                  "GetTraitMethod": {
                                                                                                                    "trait_name": [
                                                                                                                      "core",
                                                                                                                      "slice",
                                                                                                                      "sort",
                                                                                                                      "stable",
                                                                                                                      "BufGuard"
                                                                                                                    ],
                                                                                                                    "self_ty": {
                                                                                                                      "type": "Var",
                                                                                                                      "name": "BufT"
                                                                                                                    },
                                                                                                                    "trait_tys": [
                                                                                                                      {
                                                                                                                        "type": "Var",
                                                                                                                        "name": "T"
                                                                                                                      }
                                                                                                                    ],
                                                                                                                    "method_name": "as_uninit_slice_mut",
                                                                                                                    "generic_tys": []
                                                                                                                  }
                                                                                                                },
                                                                                                                "args": [
                                                                                                                  {
                                                                                                                    "LocalVar": "heap_buf"
                                                                                                                  }
                                                                                                                ],
                                                                                                                "kind": "Closure"
                                                                                                              }
                                                                                                            }
                                                                                                          ],
                                                                                                          "kind": "Effectful"
                                                                                                        }
                                                                                                      }
                                                                                                    }
                                                                                                  }
                                                                                                ],
                                                                                                "kind": "Effectful"
                                                                                              }
                                                                                            }
                                                                                          ],
                                                                                          "kind": "Effectful"
                                                                                        }
                                                                                      },
                                                                                      "is_for_match": true,
                                                                                      "is_internal": true
                                                                                    }
                                                                                  }
                                                                                ]
                                                                              }
                                                                            }
                                                                          ],
                                                                          "kind": "Effectful"
                                                                        }
                                                                      },
                                                                      "body": {
                                                                        "Let": {
                                                                          "name": "eager_sort",
                                                                          "is_user": true,
                                                                          "init": {
                                                                            "Call": {
                                                                              "func": {
                                                                                "LocalVar": "M.alloc"
                                                                              },
                                                                              "args": [
                                                                                {
                                                                                  "Call": {
                                                                                    "func": {
                                                                                      "LocalVar": "BinOp.le"
                                                                                    },
                                                                                    "args": [
                                                                                      {
                                                                                        "Call": {
                                                                                          "func": {
                                                                                            "LocalVar": "M.read"
                                                                                          },
                                                                                          "args": [
                                                                                            {
                                                                                              "LocalVar": "len"
                                                                                            }
                                                                                          ],
                                                                                          "kind": "Effectful"
                                                                                        }
                                                                                      },
                                                                                      {
                                                                                        "Call": {
                                                                                          "func": {
                                                                                            "LocalVar": "BinOp.Wrap.mul"
                                                                                          },
                                                                                          "args": [
                                                                                            {
                                                                                              "Call": {
                                                                                                "func": {
                                                                                                  "GetTraitMethod": {
                                                                                                    "trait_name": [
                                                                                                      "core",
                                                                                                      "slice",
                                                                                                      "sort",
                                                                                                      "shared",
                                                                                                      "smallsort",
                                                                                                      "StableSmallSortTypeImpl"
                                                                                                    ],
                                                                                                    "self_ty": {
                                                                                                      "type": "Var",
                                                                                                      "name": "T"
                                                                                                    },
                                                                                                    "trait_tys": [],
                                                                                                    "method_name": "small_sort_threshold",
                                                                                                    "generic_tys": []
                                                                                                  }
                                                                                                },
                                                                                                "args": [],
                                                                                                "kind": "Closure"
                                                                                              }
                                                                                            },
                                                                                            {
                                                                                              "Literal": {
                                                                                                "Integer": {
                                                                                                  "kind": "Usize",
                                                                                                  "negative_sign": false,
                                                                                                  "value": 2
                                                                                                }
                                                                                              }
                                                                                            }
                                                                                          ],
                                                                                          "kind": "Effectful"
                                                                                        }
                                                                                      }
                                                                                    ],
                                                                                    "kind": "Effectful"
                                                                                  }
                                                                                }
                                                                              ],
                                                                              "kind": "Effectful"
                                                                            }
                                                                          },
                                                                          "body": {
                                                                            "Let": {
                                                                              "name": null,
                                                                              "is_user": true,
                                                                              "init": {
                                                                                "Call": {
                                                                                  "func": {
                                                                                    "LocalVar": "M.alloc"
                                                                                  },
                                                                                  "args": [
                                                                                    {
                                                                                      "Call": {
                                                                                        "func": {
                                                                                          "GetFunction": {
                                                                                            "func": [
                                                                                              "core",
                                                                                              "slice",
                                                                                              "sort",
                                                                                              "stable",
                                                                                              "drift",
                                                                                              "sort"
                                                                                            ],
                                                                                            "generic_tys": [
                                                                                              {
                                                                                                "type": "Var",
                                                                                                "name": "T"
                                                                                              },
                                                                                              {
                                                                                                "type": "Var",
                                                                                                "name": "F"
                                                                                              }
                                                                                            ]
                                                                                          }
                                                                                        },
                                                                                        "args": [
                                                                                          {
                                                                                            "Call": {
                                                                                              "func": {
                                                                                                "LocalVar": "M.read"
                                                                                              },
                                                                                              "args": [
                                                                                                {
                                                                                                  "LocalVar": "v"
                                                                                                }
                                                                                              ],
                                                                                              "kind": "Effectful"
                                                                                            }
                                                                                          },
                                                                                          {
                                                                                            "Call": {
                                                                                              "func": {
                                                                                                "LocalVar": "M.read"
                                                                                              },
                                                                                              "args": [
                                                                                                {
                                                                                                  "LocalVar": "scratch"
                                                                                                }
                                                                                              ],
                                                                                              "kind": "Effectful"
                                                                                            }
                                                                                          },
                                                                                          {
                                                                                            "Call": {
                                                                                              "func": {
                                                                                                "LocalVar": "M.read"
                                                                                              },
                                                                                              "args": [
                                                                                                {
                                                                                                  "LocalVar": "eager_sort"
                                                                                                }
                                                                                              ],
                                                                                              "kind": "Effectful"
                                                                                            }
                                                                                          },
                                                                                          {
                                                                                            "Call": {
                                                                                              "func": {
                                                                                                "LocalVar": "M.read"
                                                                                              },
                                                                                              "args": [
                                                                                                {
                                                                                                  "LocalVar": "is_less"
                                                                                                }
                                                                                              ],
                                                                                              "kind": "Effectful"
                                                                                            }
                                                                                          }
                                                                                        ],
                                                                                        "kind": "Closure"
                                                                                      }
                                                                                    }
                                                                                  ],
                                                                                  "kind": "Effectful"
                                                                                }
                                                                              },
                                                                              "body": {
                                                                                "Call": {
                                                                                  "func": {
                                                                                    "LocalVar": "M.alloc"
                                                                                  },
                                                                                  "args": [
                                                                                    {
                                                                                      "Tuple": {
                                                                                        "elements": []
                                                                                      }
                                                                                    }
                                                                                  ],
                                                                                  "kind": "Effectful"
                                                                                }
                                                                              }
                                                                            }
                                                                          }
                                                                        }
                                                                      }
                                                                    }
                                                                  }
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        ],
                                        "kind": "Effectful"
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    {
                      "file_name": "core/src/slice/sort/stable/mod.rs",
                      "item": {
                        "type": "Module",
                        "name": "driftsort_main",
                        "body": [
                          {
                            "file_name": "core/src/slice/sort/stable/mod.rs",
                            "item": {
                              "type": "Const",
                              "name": "value_MAX_FULL_ALLOC_BYTES",
                              "value": {
                                "Call": {
                                  "func": {
                                    "LocalVar": "M.alloc"
                                  },
                                  "args": [
                                    {
                                      "Literal": {
                                        "Integer": {
                                          "kind": "Usize",
                                          "negative_sign": false,
                                          "value": 8000000
                                        }
                                      }
                                    }
                                  ],
                                  "kind": "Effectful"
                                }
                              }
                            }
                          }
                        ]
                      }
                    },
                    {
                      "file_name": "core/src/slice/sort/stable/mod.rs",
                      "item": {
                        "type": "Trait",
                        "name": "BufGuard",
                        "path": [
                          "core",
                          "slice",
                          "sort",
                          "stable",
                          "BufGuard"
                        ],
                        "const_params": [],
                        "ty_params": [
                          "T"
                        ],
                        "body": [
                          [
                            "with_capacity",
                            {
                              "Definition": {
                                "const_params": [],
                                "ty_params": [],
                                "ty": {
                                  "type": "Function",
                                  "args": [
                                    {
                                      "type": "Path",
                                      "path": [
                                        "usize"
                                      ]
                                    }
                                  ],
                                  "ret": {
                                    "type": "Var",
                                    "name": "Self"
                                  }
                                }
                              }
                            }
                          ],
                          [
                            "as_uninit_slice_mut",
                            {
                              "Definition": {
                                "const_params": [],
                                "ty_params": [],
                                "ty": {
                                  "type": "Function",
                                  "args": [
                                    {
                                      "type": "Application",
                                      "func": {
                                        "type": "Path",
                                        "path": [
                                          "&mut"
                                        ]
                                      },
                                      "consts": [],
                                      "tys": [
                                        {
                                          "type": "Var",
                                          "name": "Self"
                                        }
                                      ]
                                    }
                                  ],
                                  "ret": {
                                    "type": "Application",
                                    "func": {
                                      "type": "Path",
                                      "path": [
                                        "&mut"
                                      ]
                                    },
                                    "consts": [],
                                    "tys": [
                                      {
                                        "type": "Application",
                                        "func": {
                                          "type": "Path",
                                          "path": [
                                            "slice"
                                          ]
                                        },
                                        "consts": [],
                                        "tys": [
                                          {
                                            "type": "Application",
                                            "func": {
                                              "type": "Path",
                                              "path": [
                                                "core",
                                                "mem",
                                                "maybe_uninit",
                                                "MaybeUninit"
                                              ]
                                            },
                                            "consts": [],
                                            "tys": [
                                              {
                                                "type": "Var",
                                                "name": "T"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          ]
                        ]
                      }
                    },
                    {
                      "file_name": "core/src/slice/sort/stable/mod.rs",
                      "item": {
                        "type": "TypeStructStruct",
                        "name": "AlignedStorage",
                        "const_params": [
                          "N"
                        ],
                        "ty_params": [
                          "T"
                        ],
                        "fields": [
                          [
                            "_align",
                            {
                              "type": "Application",
                              "func": {
                                "type": "Path",
                                "path": [
                                  "array"
                                ]
                              },
                              "consts": [
                                {
                                  "Literal": {
                                    "Integer": {
                                      "kind": "Usize",
                                      "negative_sign": false,
                                      "value": 0
                                    }
                                  }
                                }
                              ],
                              "tys": [
                                {
                                  "type": "Var",
                                  "name": "T"
                                }
                              ]
                            }
                          ],
                          [
                            "storage",
                            {
                              "type": "Application",
                              "func": {
                                "type": "Path",
                                "path": [
                                  "array"
                                ]
                              },
                              "consts": [
                                {
                                  "LocalVar": "N"
                                }
                              ],
                              "tys": [
                                {
                                  "type": "Application",
                                  "func": {
                                    "type": "Path",
                                    "path": [
                                      "core",
                                      "mem",
                                      "maybe_uninit",
                                      "MaybeUninit"
                                    ]
                                  },
                                  "consts": [],
                                  "tys": [
                                    {
                                      "type": "Path",
                                      "path": [
                                        "u8"
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        ]
                      }
                    },
                    {
                      "file_name": "core/src/slice/sort/stable/mod.rs",
                      "item": {
                        "type": "Impl",
                        "generic_consts": [
                          "N"
                        ],
                        "generic_tys": [
                          "T"
                        ],
                        "self_ty": {
                          "type": "Application",
                          "func": {
                            "type": "Path",
                            "path": [
                              "core",
                              "slice",
                              "sort",
                              "stable",
                              "AlignedStorage"
                            ]
                          },
                          "consts": [
                            {
                              "LocalVar": "N"
                            }
                          ],
                          "tys": [
                            {
                              "type": "Var",
                              "name": "T"
                            }
                          ]
                        },
                        "items": [
                          {
                            "name": "new",
                            "snippet": [
                              "    fn new() -> Self {",
                              "        Self { _align: [], storage: [const { MaybeUninit::uninit() }; N] }",
                              "    }"
                            ],
                            "kind": {
                              "Definition": {
                                "definition": {
                                  "const_params": [],
                                  "ty_params": [],
                                  "signature_and_body": {
                                    "args": [],
                                    "ret_ty": {
                                      "type": "Application",
                                      "func": {
                                        "type": "Path",
                                        "path": [
                                          "core",
                                          "slice",
                                          "sort",
                                          "stable",
                                          "AlignedStorage"
                                        ]
                                      },
                                      "consts": [
                                        {
                                          "LocalVar": "N"
                                        }
                                      ],
                                      "tys": [
                                        {
                                          "type": "Var",
                                          "name": "T"
                                        }
                                      ]
                                    },
                                    "body": {
                                      "StructStruct": {
                                        "path": [
                                          "core",
                                          "slice",
                                          "sort",
                                          "stable",
                                          "AlignedStorage"
                                        ],
                                        "fields": [
                                          [
                                            "_align",
                                            {
                                              "Array": {
                                                "elements": [],
                                                "is_internal": false
                                              }
                                            }
                                          ],
                                          [
                                            "storage",
                                            {
                                              "Call": {
                                                "func": {
                                                  "LocalVar": "repeat"
                                                },
                                                "args": [
                                                  {
                                                    "Call": {
                                                      "func": {
                                                        "LocalVar": "M.read"
                                                      },
                                                      "args": [
                                                        {
                                                          "GetConst": [
                                                            "core",
                                                            "slice",
                                                            "sort",
                                                            "stable",
                                                            "new_discriminant"
                                                          ]
                                                        }
                                                      ],
                                                      "kind": "Effectful"
                                                    }
                                                  },
                                                  {
                                                    "LocalVar": "N"
                                                  }
                                                ],
                                                "kind": "Effectful"
                                              }
                                            }
                                          ]
                                        ],
                                        "base": null
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          {
                            "name": "as_uninit_slice_mut",
                            "snippet": [
                              "    fn as_uninit_slice_mut(&mut self) -> &mut [MaybeUninit<T>] {",
                              "        let len = N / mem::size_of::<T>();",
                              "",
                              "        // SAFETY: `_align` ensures we are correctly aligned.",
                              "        unsafe { core::slice::from_raw_parts_mut(self.storage.as_mut_ptr().cast(), len) }",
                              "    }"
                            ],
                            "kind": {
                              "Definition": {
                                "definition": {
                                  "const_params": [],
                                  "ty_params": [],
                                  "signature_and_body": {
                                    "args": [
                                      [
                                        "self",
                                        {
                                          "type": "Application",
                                          "func": {
                                            "type": "Path",
                                            "path": [
                                              "&mut"
                                            ]
                                          },
                                          "consts": [],
                                          "tys": [
                                            {
                                              "type": "Application",
                                              "func": {
                                                "type": "Path",
                                                "path": [
                                                  "core",
                                                  "slice",
                                                  "sort",
                                                  "stable",
                                                  "AlignedStorage"
                                                ]
                                              },
                                              "consts": [
                                                {
                                                  "LocalVar": "N"
                                                }
                                              ],
                                              "tys": [
                                                {
                                                  "type": "Var",
                                                  "name": "T"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        null
                                      ]
                                    ],
                                    "ret_ty": {
                                      "type": "Application",
                                      "func": {
                                        "type": "Path",
                                        "path": [
                                          "&mut"
                                        ]
                                      },
                                      "consts": [],
                                      "tys": [
                                        {
                                          "type": "Application",
                                          "func": {
                                            "type": "Path",
                                            "path": [
                                              "slice"
                                            ]
                                          },
                                          "consts": [],
                                          "tys": [
                                            {
                                              "type": "Application",
                                              "func": {
                                                "type": "Path",
                                                "path": [
                                                  "core",
                                                  "mem",
                                                  "maybe_uninit",
                                                  "MaybeUninit"
                                                ]
                                              },
                                              "consts": [],
                                              "tys": [
                                                {
                                                  "type": "Var",
                                                  "name": "T"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    "body": {
                                      "Let": {
                                        "name": "self",
                                        "is_user": false,
                                        "init": {
                                          "Call": {
                                            "func": {
                                              "LocalVar": "M.alloc"
                                            },
                                            "args": [
                                              {
                                                "LocalVar": "self"
                                              }
                                            ],
                                            "kind": "Effectful"
                                          }
                                        },
                                        "body": {
                                          "Call": {
                                            "func": {
                                              "LocalVar": "M.read"
                                            },
                                            "args": [
                                              {
                                                "Let": {
                                                  "name": "len",
                                                  "is_user": true,
                                                  "init": {
                                                    "Call": {
                                                      "func": {
                                                        "LocalVar": "M.alloc"
                                                      },
                                                      "args": [
                                                        {
                                                          "Call": {
                                                            "func": {
                                                              "LocalVar": "BinOp.Wrap.div"
                                                            },
                                                            "args": [
                                                              {
                                                                "Call": {
                                                                  "func": {
                                                                    "LocalVar": "M.read"
                                                                  },
                                                                  "args": [
                                                                    {
                                                                      "GetConst": [
                                                                        "core",
                                                                        "slice",
                                                                        "sort",
                                                                        "stable",
                                                                        "N"
                                                                      ]
                                                                    }
                                                                  ],
                                                                  "kind": "Effectful"
                                                                }
                                                              },
                                                              {
                                                                "Call": {
                                                                  "func": {
                                                                    "GetFunction": {
                                                                      "func": [
                                                                        "core",
                                                                        "mem",
                                                                        "size_of"
                                                                      ],
                                                                      "generic_tys": [
                                                                        {
                                                                          "type": "Var",
                                                                          "name": "T"
                                                                        }
                                                                      ]
                                                                    }
                                                                  },
                                                                  "args": [],
                                                                  "kind": "Closure"
                                                                }
                                                              }
                                                            ],
                                                            "kind": "Effectful"
                                                          }
                                                        }
                                                      ],
                                                      "kind": "Effectful"
                                                    }
                                                  },
                                                  "body": {
                                                    "Call": {
                                                      "func": {
                                                        "LocalVar": "M.alloc"
                                                      },
                                                      "args": [
                                                        {
                                                          "Call": {
                                                            "func": {
                                                              "GetFunction": {
                                                                "func": [
                                                                  "core",
                                                                  "slice",
                                                                  "raw",
                                                                  "from_raw_parts_mut"
                                                                ],
                                                                "generic_tys": [
                                                                  {
                                                                    "type": "Application",
                                                                    "func": {
                                                                      "type": "Path",
                                                                      "path": [
                                                                        "core",
                                                                        "mem",
                                                                        "maybe_uninit",
                                                                        "MaybeUninit"
                                                                      ]
                                                                    },
                                                                    "consts": [],
                                                                    "tys": [
                                                                      {
                                                                        "type": "Var",
                                                                        "name": "T"
                                                                      }
                                                                    ]
                                                                  }
                                                                ]
                                                              }
                                                            },
                                                            "args": [
                                                              {
                                                                "Call": {
                                                                  "func": {
                                                                    "GetAssociatedFunction": {
                                                                      "ty": {
                                                                        "type": "Application",
                                                                        "func": {
                                                                          "type": "Path",
                                                                          "path": [
                                                                            "*mut"
                                                                          ]
                                                                        },
                                                                        "consts": [],
                                                                        "tys": [
                                                                          {
                                                                            "type": "Application",
                                                                            "func": {
                                                                              "type": "Path",
                                                                              "path": [
                                                                                "core",
                                                                                "mem",
                                                                                "maybe_uninit",
                                                                                "MaybeUninit"
                                                                              ]
                                                                            },
                                                                            "consts": [],
                                                                            "tys": [
                                                                              {
                                                                                "type": "Path",
                                                                                "path": [
                                                                                  "u8"
                                                                                ]
                                                                              }
                                                                            ]
                                                                          }
                                                                        ]
                                                                      },
                                                                      "func": "cast",
                                                                      "generic_tys": [
                                                                        {
                                                                          "type": "Application",
                                                                          "func": {
                                                                            "type": "Path",
                                                                            "path": [
                                                                              "core",
                                                                              "mem",
                                                                              "maybe_uninit",
                                                                              "MaybeUninit"
                                                                            ]
                                                                          },
                                                                          "consts": [],
                                                                          "tys": [
                                                                            {
                                                                              "type": "Var",
                                                                              "name": "T"
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  },
                                                                  "args": [
                                                                    {
                                                                      "Call": {
                                                                        "func": {
                                                                          "GetAssociatedFunction": {
                                                                            "ty": {
                                                                              "type": "Application",
                                                                              "func": {
                                                                                "type": "Path",
                                                                                "path": [
                                                                                  "slice"
                                                                                ]
                                                                              },
                                                                              "consts": [],
                                                                              "tys": [
                                                                                {
                                                                                  "type": "Application",
                                                                                  "func": {
                                                                                    "type": "Path",
                                                                                    "path": [
                                                                                      "core",
                                                                                      "mem",
                                                                                      "maybe_uninit",
                                                                                      "MaybeUninit"
                                                                                    ]
                                                                                  },
                                                                                  "consts": [],
                                                                                  "tys": [
                                                                                    {
                                                                                      "type": "Path",
                                                                                      "path": [
                                                                                        "u8"
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            "func": "as_mut_ptr",
                                                                            "generic_tys": []
                                                                          }
                                                                        },
                                                                        "args": [
                                                                          {
                                                                            "Call": {
                                                                              "func": {
                                                                                "LocalVar": "M.SubPointer.get_struct_record_field"
                                                                              },
                                                                              "args": [
                                                                                {
                                                                                  "Call": {
                                                                                    "func": {
                                                                                      "LocalVar": "M.read"
                                                                                    },
                                                                                    "args": [
                                                                                      {
                                                                                        "LocalVar": "self"
                                                                                      }
                                                                                    ],
                                                                                    "kind": "Effectful"
                                                                                  }
                                                                                },
                                                                                {
                                                                                  "InternalString": "core::slice::sort::stable::AlignedStorage"
                                                                                },
                                                                                {
                                                                                  "InternalString": "storage"
                                                                                }
                                                                              ],
                                                                              "kind": "Effectful"
                                                                            }
                                                                          }
                                                                        ],
                                                                        "kind": "Closure"
                                                                      }
                                                                    }
                                                                  ],
                                                                  "kind": "Closure"
                                                                }
                                                              },
                                                              {
                                                                "Call": {
                                                                  "func": {
                                                                    "LocalVar": "M.read"
                                                                  },
                                                                  "args": [
                                                                    {
                                                                      "LocalVar": "len"
                                                                    }
                                                                  ],
                                                                  "kind": "Effectful"
                                                                }
                                                              }
                                                            ],
                                                            "kind": "Closure"
                                                          }
                                                        }
                                                      ],
                                                      "kind": "Effectful"
                                                    }
                                                  }
                                                }
                                              }
                                            ],
                                            "kind": "Effectful"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ]
    }
  }
]