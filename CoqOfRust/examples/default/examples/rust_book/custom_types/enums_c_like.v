(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Module Number.
  Inductive t : Set :=
  | Zero
  | One
  | Two.
End Number.

Module Color.
  Inductive t : Set :=
  | Red
  | Green
  | Blue.
  
  Definition Red_discriminant : isize.t := Integer.of_Z 16711680.
  Definition Green_discriminant : isize.t := Integer.of_Z 65280.
  Definition Blue_discriminant : isize.t := Integer.of_Z 255.
End Color.

(*
fn main() {
    // `enums` can be cast as integers.
    println!("zero is {}", Number::Zero as i32);
    println!("one is {}", Number::One as i32);

    println!("roses are #{:06x}", Color::Red as i32);
    println!("violets are #{:06x}", Color::Blue as i32);
}
*)
(* #[allow(dead_code)] - function was ignored by the compiler *)
Definition main : M unit :=
  ltac:(M.monadic (
    M.read (|
      let _ : M.Val unit :=
        let _ : M.Val unit :=
          M.alloc (|
            M.call (|(std.io.stdio._print
              (M.call (|(core.fmt.Arguments.t::["new_v1"]
                (pointer_coercion
                  "Unsize"
                  (borrow
                    (M.alloc (|
                      [ M.read (| mk_str "zero is " |); M.read (| mk_str "
" |)
                      ]
                    |))))
                (pointer_coercion
                  "Unsize"
                  (borrow
                    (M.alloc (|
                      [
                        M.call (|(core.fmt.rt.Argument.t::["new_display"]
                          (borrow
                            (M.alloc (| rust_cast ((Integer.of_Z 0) : isize.t)
                            |))))
                        |)
                      ]
                    |)))))
              |)))
            |)
          |) in
        M.alloc (| tt |) in
      let _ : M.Val unit :=
        let _ : M.Val unit :=
          M.alloc (|
            M.call (|(std.io.stdio._print
              (M.call (|(core.fmt.Arguments.t::["new_v1"]
                (pointer_coercion
                  "Unsize"
                  (borrow
                    (M.alloc (|
                      [ M.read (| mk_str "one is " |); M.read (| mk_str "
" |) ]
                    |))))
                (pointer_coercion
                  "Unsize"
                  (borrow
                    (M.alloc (|
                      [
                        M.call (|(core.fmt.rt.Argument.t::["new_display"]
                          (borrow
                            (M.alloc (| rust_cast ((Integer.of_Z 1) : isize.t)
                            |))))
                        |)
                      ]
                    |)))))
              |)))
            |)
          |) in
        M.alloc (| tt |) in
      let _ : M.Val unit :=
        let _ : M.Val unit :=
          M.alloc (|
            M.call (|(std.io.stdio._print
              (M.call (|(core.fmt.Arguments.t::["new_v1_formatted"]
                (pointer_coercion
                  "Unsize"
                  (borrow
                    (M.alloc (|
                      [
                        M.read (| mk_str "roses are #" |);
                        M.read (| mk_str "
" |)
                      ]
                    |))))
                (pointer_coercion
                  "Unsize"
                  (borrow
                    (M.alloc (|
                      [
                        M.call (|(core.fmt.rt.Argument.t::["new_lower_hex"]
                          (borrow
                            (M.alloc (|
                              rust_cast
                                (BinOp.Panic.add (|
                                  enums_c_like.Color.Red_discriminant,
                                  (Integer.of_Z 0) : isize.t
                                |))
                            |))))
                        |)
                      ]
                    |))))
                (pointer_coercion
                  "Unsize"
                  (borrow
                    (M.alloc (|
                      [
                        M.call (|(core.fmt.rt.Placeholder.t::["new"]
                          ((Integer.of_Z 0) : usize.t)
                          " "%char
                          core.fmt.rt.Alignment.Unknown
                          ((Integer.of_Z 8) : u32.t)
                          core.fmt.rt.Count.Implied
                          (core.fmt.rt.Count.Is ((Integer.of_Z 6) : usize.t)))
                        |)
                      ]
                    |))))
                (M.call (|core.fmt.rt.UnsafeArg.t::["new"] |)))
              |)))
            |)
          |) in
        M.alloc (| tt |) in
      let _ : M.Val unit :=
        let _ : M.Val unit :=
          M.alloc (|
            M.call (|(std.io.stdio._print
              (M.call (|(core.fmt.Arguments.t::["new_v1_formatted"]
                (pointer_coercion
                  "Unsize"
                  (borrow
                    (M.alloc (|
                      [
                        M.read (| mk_str "violets are #" |);
                        M.read (| mk_str "
" |)
                      ]
                    |))))
                (pointer_coercion
                  "Unsize"
                  (borrow
                    (M.alloc (|
                      [
                        M.call (|(core.fmt.rt.Argument.t::["new_lower_hex"]
                          (borrow
                            (M.alloc (|
                              rust_cast
                                (BinOp.Panic.add (|
                                  enums_c_like.Color.Blue_discriminant,
                                  (Integer.of_Z 0) : isize.t
                                |))
                            |))))
                        |)
                      ]
                    |))))
                (pointer_coercion
                  "Unsize"
                  (borrow
                    (M.alloc (|
                      [
                        M.call (|(core.fmt.rt.Placeholder.t::["new"]
                          ((Integer.of_Z 0) : usize.t)
                          " "%char
                          core.fmt.rt.Alignment.Unknown
                          ((Integer.of_Z 8) : u32.t)
                          core.fmt.rt.Count.Implied
                          (core.fmt.rt.Count.Is ((Integer.of_Z 6) : usize.t)))
                        |)
                      ]
                    |))))
                (M.call (|core.fmt.rt.UnsafeArg.t::["new"] |)))
              |)))
            |)
          |) in
        M.alloc (| tt |) in
      M.alloc (| tt |)
    |)
  )).
