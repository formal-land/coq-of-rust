(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

(*
fn main() {
    let number: u8 = 4;

    match number {
        i if i == 0 => println!("Zero"),
        i if i > 0 => println!("Greater than zero"),
        _ => unreachable!("Should never happen."),
        // TODO ^ uncomment to fix compilation
    }
}
*)
(* #[allow(dead_code)] - function was ignored by the compiler *)
Definition main : M unit :=
  ltac:(M.monadic (
    M.read (|
      let number : M.Val u8.t := M.alloc (| (Integer.of_Z 4) : u8.t |) in
      ltac:
        (M.monadic_match_operator
          number
          [
            fun (γ : M.Val u8.t) =>
              (let i := M.copy (| γ |) in
              let _ : M.Val unit :=
                M.alloc (|
                  M.call (|(std.io.stdio._print
                    (M.call (|(core.fmt.Arguments.t::["new_const"]
                      (pointer_coercion
                        "Unsize"
                        (borrow
                          (M.alloc (| [ M.read (| mk_str "Zero
" |) ] |)))))
                    |)))
                  |)
                |) in
              M.alloc (| tt |)) :
              M.Val unit;
            fun (γ : M.Val u8.t) =>
              (let i := M.copy (| γ |) in
              let _ : M.Val unit :=
                M.alloc (|
                  M.call (|(std.io.stdio._print
                    (M.call (|(core.fmt.Arguments.t::["new_const"]
                      (pointer_coercion
                        "Unsize"
                        (borrow
                          (M.alloc (|
                            [ M.read (| mk_str "Greater than zero
" |) ]
                          |)))))
                    |)))
                  |)
                |) in
              M.alloc (| tt |)) :
              M.Val unit;
            fun (γ : M.Val u8.t) =>
              (M.alloc (|
                (never_to_any (B := unit)) (|
                  M.call (|(core.panicking.unreachable_display
                    (borrow (mk_str "Should never happen.")))
                  |)
                |)
              |)) :
              M.Val unit
          ])
    |)
  )).
