(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

(*
fn main() {
    fn foo() -> ! {
        panic!("This call never returns.");
    }
}
*)
Definition main (ε : list Value.t) (τ : list Ty.t) (α : list Value.t) : M :=
  match ε, τ, α with
  | [], [], [] => ltac:(M.monadic (Value.Tuple []))
  | _, _, _ => M.impossible "wrong number of arguments"
  end.

Global Instance Instance_IsFunction_main : M.IsFunction.Trait "diverging_functions::main" main.
Admitted.
Global Typeclasses Opaque main.

Module main.
  (*
      fn foo() -> ! {
          panic!("This call never returns.");
      }
  *)
  Definition foo (ε : list Value.t) (τ : list Ty.t) (α : list Value.t) : M :=
    match ε, τ, α with
    | [], [], [] =>
      ltac:(M.monadic
        (M.call_closure (|
          Ty.path "never",
          M.get_function (|
            "std::panicking::begin_panic",
            [],
            [ Ty.apply (Ty.path "&") [] [ Ty.path "str" ] ]
          |),
          [ M.read (| Value.String "This call never returns." |) ]
        |)))
    | _, _, _ => M.impossible "wrong number of arguments"
    end.
  
  Global Instance Instance_IsFunction_foo : M.IsFunction.Trait "diverging_functions::main::foo" foo.
  Admitted.
  Global Typeclasses Opaque foo.
End main.
