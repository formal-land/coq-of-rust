(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

(*
fn main() {
    // This call will expand into `println!("Hello");`
    say_hello!()
}
*)
Definition main (τ : list Ty.t) (α : list Value.t) : M :=
  match τ, α with
  | [], [] =>
    ltac:(M.monadic
      (M.read
        (|
          (let _ :=
            M.alloc
              (|
                (M.call_closure
                  (|
                    (M.get_function (| "std::io::stdio::_print", [] |)),
                    [
                      M.call_closure
                        (|
                          (M.get_associated_function
                            (| (Ty.path "core::fmt::Arguments"), "new_const", []
                            |)),
                          [
                            (* Unsize *)
                              M.pointer_coercion
                                (M.alloc (| (Value.Array [ M.read (| (mk_str "Hello!
") |) ]) |))
                          ]
                        |)
                    ]
                  |))
              |) in
          M.alloc (| (Value.Tuple []) |))
        |)))
  | _, _ => M.impossible
  end.
