(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Module gkr.
  Module verifier.
    (*
    pub fn partially_verify_batch<F: Field>(
        gate_by_instance: Vec<Gate>,
        proof: &GkrBatchProof<F>,
        challenger: &mut impl FieldChallenger<F>,
    ) -> Result<GkrArtifact<F>, GkrError<F>> {
        let GkrBatchProof {
            sumcheck_proofs,
            layer_masks_by_instance,
            output_claims_by_instance,
        } = proof;
    
        if layer_masks_by_instance.len() != output_claims_by_instance.len() {
            return Err(GkrError::MalformedProof);
        }
    
        let n_instances = layer_masks_by_instance.len();
        let instance_n_layers = |instance: usize| layer_masks_by_instance[instance].len();
        let n_layers = (0..n_instances).map(instance_n_layers).max().unwrap();
    
        if n_layers != sumcheck_proofs.len() {
            return Err(GkrError::MalformedProof);
        }
    
        if gate_by_instance.len() != n_instances {
            return Err(GkrError::NumInstancesMismatch {
                given: gate_by_instance.len(),
                proof: n_instances,
            });
        }
    
        let mut ood_point = vec![];
        let mut claims_to_verify_by_instance = vec![None; n_instances];
    
        for (layer, sumcheck_proof) in sumcheck_proofs.iter().enumerate() {
            let n_remaining_layers = n_layers - layer;
    
            // Check for output layers.
            for instance in 0..n_instances {
                if instance_n_layers(instance) == n_remaining_layers {
                    let output_claims = output_claims_by_instance[instance].clone();
                    claims_to_verify_by_instance[instance] = Some(output_claims);
                }
            }
    
            // Seed the channel with layer claims.
            for claims_to_verify in claims_to_verify_by_instance.iter().flatten() {
                challenger.observe_slice(claims_to_verify);
            }
    
            let sumcheck_alpha = challenger.sample();
            let instance_lambda = challenger.sample();
    
            let mut sumcheck_claims = Vec::new();
            let mut sumcheck_instances = Vec::new();
    
            // Prepare the sumcheck claim.
            for (instance, claims_to_verify) in claims_to_verify_by_instance.iter().enumerate() {
                if let Some(claims_to_verify) = claims_to_verify {
                    let n_unused_variables = n_layers - instance_n_layers(instance);
                    let doubling_factor = F::from_canonical_u32(1 << n_unused_variables);
                    let claim =
                        random_linear_combination(claims_to_verify, instance_lambda) * doubling_factor;
                    sumcheck_claims.push(claim);
                    sumcheck_instances.push(instance);
                }
            }
    
            let sumcheck_claim = random_linear_combination(&sumcheck_claims, sumcheck_alpha);
            let (sumcheck_ood_point, sumcheck_eval) =
                sumcheck::partially_verify(sumcheck_claim, sumcheck_proof, challenger)
                    .map_err(|source| GkrError::InvalidSumcheck { layer, source })?;
    
            let mut layer_evals = Vec::new();
    
            // Evaluate the circuit locally at sumcheck OOD point.
            for &instance in &sumcheck_instances {
                let n_unused = n_layers - instance_n_layers(instance);
                let mask = &layer_masks_by_instance[instance][layer - n_unused];
                let gate = &gate_by_instance[instance];
                let gate_output = gate.eval(mask).map_err(|_| {
                    let instance_layer = instance_n_layers(layer) - n_remaining_layers;
                    GkrError::InvalidMask {
                        instance,
                        instance_layer,
                    }
                })?;
                // TODO: Consider simplifying the code by just using the same eq eval for all instances
                // regardless of size.
                let eq_eval = hypercube_eq(&ood_point[n_unused..], &sumcheck_ood_point[n_unused..]);
                layer_evals.push(eq_eval * random_linear_combination(&gate_output, instance_lambda));
            }
    
            let layer_eval = random_linear_combination(&layer_evals, sumcheck_alpha);
    
            if sumcheck_eval != layer_eval {
                return Err(GkrError::CircuitCheckFailure {
                    claim: sumcheck_eval,
                    output: layer_eval,
                    layer,
                });
            }
    
            // Seed the channel with the layer masks.
            for &instance in &sumcheck_instances {
                let n_unused = n_layers - instance_n_layers(instance);
                let mask = &layer_masks_by_instance[instance][layer - n_unused];
                for column in mask.columns() {
                    challenger.observe_slice(column);
                }
            }
    
            // Set the OOD evaluation point for layer above.
            let challenge = challenger.sample();
            ood_point = sumcheck_ood_point;
            ood_point.push(challenge);
    
            // Set the claims to verify in the layer above.
            for instance in sumcheck_instances {
                let n_unused = n_layers - instance_n_layers(instance);
                let mask = &layer_masks_by_instance[instance][layer - n_unused];
                claims_to_verify_by_instance[instance] = Some(mask.reduce_at_point(challenge));
            }
        }
    
        let claims_to_verify_by_instance = claims_to_verify_by_instance
            .into_iter()
            .map(Option::unwrap)
            .collect();
    
        Ok(GkrArtifact {
            ood_point,
            claims_to_verify_by_instance,
            n_variables_by_instance: (0..n_instances).map(instance_n_layers).collect(),
        })
    }
    *)
    Definition partially_verify_batch (ε : list Value.t) (τ : list Ty.t) (α : list Value.t) : M :=
      match ε, τ, α with
      | [], [ F; impl_FieldChallenger_F_ ], [ gate_by_instance; proof; challenger ] =>
        ltac:(M.monadic
          (let gate_by_instance :=
            M.alloc (|
              Ty.apply
                (Ty.path "alloc::vec::Vec")
                []
                [ Ty.path "openvm_stark_backend::gkr::gate::Gate"; Ty.path "alloc::alloc::Global" ],
              gate_by_instance
            |) in
          let proof :=
            M.alloc (|
              Ty.apply
                (Ty.path "&")
                []
                [ Ty.apply (Ty.path "openvm_stark_backend::gkr::types::GkrBatchProof") [] [ F ] ],
              proof
            |) in
          let challenger :=
            M.alloc (| Ty.apply (Ty.path "&mut") [] [ impl_FieldChallenger_F_ ], challenger |) in
          M.catch_return
            (Ty.apply
              (Ty.path "core::result::Result")
              []
              [
                Ty.apply (Ty.path "openvm_stark_backend::gkr::types::GkrArtifact") [] [ F ];
                Ty.apply (Ty.path "openvm_stark_backend::gkr::types::GkrError") [] [ F ]
              ]) (|
            ltac:(M.monadic
              (M.match_operator (|
                Ty.apply
                  (Ty.path "core::result::Result")
                  []
                  [
                    Ty.apply (Ty.path "openvm_stark_backend::gkr::types::GkrArtifact") [] [ F ];
                    Ty.apply (Ty.path "openvm_stark_backend::gkr::types::GkrError") [] [ F ]
                  ],
                proof,
                [
                  fun γ =>
                    ltac:(M.monadic
                      (let γ := M.deref (| M.read (| γ |) |) in
                      let γ1_0 :=
                        M.SubPointer.get_struct_record_field (|
                          γ,
                          "openvm_stark_backend::gkr::types::GkrBatchProof",
                          "sumcheck_proofs"
                        |) in
                      let γ1_1 :=
                        M.SubPointer.get_struct_record_field (|
                          γ,
                          "openvm_stark_backend::gkr::types::GkrBatchProof",
                          "layer_masks_by_instance"
                        |) in
                      let γ1_2 :=
                        M.SubPointer.get_struct_record_field (|
                          γ,
                          "openvm_stark_backend::gkr::types::GkrBatchProof",
                          "output_claims_by_instance"
                        |) in
                      let sumcheck_proofs :=
                        M.alloc (|
                          Ty.apply
                            (Ty.path "&")
                            []
                            [
                              Ty.apply
                                (Ty.path "alloc::vec::Vec")
                                []
                                [
                                  Ty.apply
                                    (Ty.path "openvm_stark_backend::sumcheck::SumcheckProof")
                                    []
                                    [ F ];
                                  Ty.path "alloc::alloc::Global"
                                ]
                            ],
                          γ1_0
                        |) in
                      let layer_masks_by_instance :=
                        M.alloc (|
                          Ty.apply
                            (Ty.path "&")
                            []
                            [
                              Ty.apply
                                (Ty.path "alloc::vec::Vec")
                                []
                                [
                                  Ty.apply
                                    (Ty.path "alloc::vec::Vec")
                                    []
                                    [
                                      Ty.apply
                                        (Ty.path "openvm_stark_backend::gkr::types::GkrMask")
                                        []
                                        [ F ];
                                      Ty.path "alloc::alloc::Global"
                                    ];
                                  Ty.path "alloc::alloc::Global"
                                ]
                            ],
                          γ1_1
                        |) in
                      let output_claims_by_instance :=
                        M.alloc (|
                          Ty.apply
                            (Ty.path "&")
                            []
                            [
                              Ty.apply
                                (Ty.path "alloc::vec::Vec")
                                []
                                [
                                  Ty.apply
                                    (Ty.path "alloc::vec::Vec")
                                    []
                                    [ F; Ty.path "alloc::alloc::Global" ];
                                  Ty.path "alloc::alloc::Global"
                                ]
                            ],
                          γ1_2
                        |) in
                      M.read (|
                        let~ _ : Ty.tuple [] :=
                          M.match_operator (|
                            Ty.tuple [],
                            M.alloc (| Ty.tuple [], Value.Tuple [] |),
                            [
                              fun γ =>
                                ltac:(M.monadic
                                  (let γ :=
                                    M.use
                                      (M.alloc (|
                                        Ty.path "bool",
                                        M.call_closure (|
                                          Ty.path "bool",
                                          BinOp.ne,
                                          [
                                            M.call_closure (|
                                              Ty.path "usize",
                                              M.get_associated_function (|
                                                Ty.apply
                                                  (Ty.path "alloc::vec::Vec")
                                                  []
                                                  [
                                                    Ty.apply
                                                      (Ty.path "alloc::vec::Vec")
                                                      []
                                                      [
                                                        Ty.apply
                                                          (Ty.path
                                                            "openvm_stark_backend::gkr::types::GkrMask")
                                                          []
                                                          [ F ];
                                                        Ty.path "alloc::alloc::Global"
                                                      ];
                                                    Ty.path "alloc::alloc::Global"
                                                  ],
                                                "len",
                                                [],
                                                []
                                              |),
                                              [
                                                M.borrow (|
                                                  Pointer.Kind.Ref,
                                                  M.deref (| M.read (| layer_masks_by_instance |) |)
                                                |)
                                              ]
                                            |);
                                            M.call_closure (|
                                              Ty.path "usize",
                                              M.get_associated_function (|
                                                Ty.apply
                                                  (Ty.path "alloc::vec::Vec")
                                                  []
                                                  [
                                                    Ty.apply
                                                      (Ty.path "alloc::vec::Vec")
                                                      []
                                                      [ F; Ty.path "alloc::alloc::Global" ];
                                                    Ty.path "alloc::alloc::Global"
                                                  ],
                                                "len",
                                                [],
                                                []
                                              |),
                                              [
                                                M.borrow (|
                                                  Pointer.Kind.Ref,
                                                  M.deref (|
                                                    M.read (| output_claims_by_instance |)
                                                  |)
                                                |)
                                              ]
                                            |)
                                          ]
                                        |)
                                      |)) in
                                  let _ :=
                                    is_constant_or_break_match (|
                                      M.read (| γ |),
                                      Value.Bool true
                                    |) in
                                  M.never_to_any (|
                                    M.read (|
                                      M.return_ (|
                                        Value.StructTuple
                                          "core::result::Result::Err"
                                          []
                                          [
                                            Ty.apply
                                              (Ty.path
                                                "openvm_stark_backend::gkr::types::GkrArtifact")
                                              []
                                              [ F ];
                                            Ty.apply
                                              (Ty.path "openvm_stark_backend::gkr::types::GkrError")
                                              []
                                              [ F ]
                                          ]
                                          [
                                            Value.StructTuple
                                              "openvm_stark_backend::gkr::types::GkrError::MalformedProof"
                                              []
                                              [ F ]
                                              []
                                          ]
                                      |)
                                    |)
                                  |)));
                              fun γ => ltac:(M.monadic (Value.Tuple []))
                            ]
                          |) in
                        let~ n_instances : Ty.path "usize" :=
                          M.call_closure (|
                            Ty.path "usize",
                            M.get_associated_function (|
                              Ty.apply
                                (Ty.path "alloc::vec::Vec")
                                []
                                [
                                  Ty.apply
                                    (Ty.path "alloc::vec::Vec")
                                    []
                                    [
                                      Ty.apply
                                        (Ty.path "openvm_stark_backend::gkr::types::GkrMask")
                                        []
                                        [ F ];
                                      Ty.path "alloc::alloc::Global"
                                    ];
                                  Ty.path "alloc::alloc::Global"
                                ],
                              "len",
                              [],
                              []
                            |),
                            [
                              M.borrow (|
                                Pointer.Kind.Ref,
                                M.deref (| M.read (| layer_masks_by_instance |) |)
                              |)
                            ]
                          |) in
                        let~ instance_n_layers :
                            Ty.function [ Ty.path "usize" ] (Ty.path "usize") :=
                          M.closure
                            (fun γ =>
                              ltac:(M.monadic
                                match γ with
                                | [ α0 ] =>
                                  ltac:(M.monadic
                                    (M.match_operator (|
                                      Ty.path "usize",
                                      M.alloc (| Ty.path "usize", α0 |),
                                      [
                                        fun γ =>
                                          ltac:(M.monadic
                                            (let instance := M.copy (| Ty.path "usize", γ |) in
                                            M.call_closure (|
                                              Ty.path "usize",
                                              M.get_associated_function (|
                                                Ty.apply
                                                  (Ty.path "alloc::vec::Vec")
                                                  []
                                                  [
                                                    Ty.apply
                                                      (Ty.path
                                                        "openvm_stark_backend::gkr::types::GkrMask")
                                                      []
                                                      [ F ];
                                                    Ty.path "alloc::alloc::Global"
                                                  ],
                                                "len",
                                                [],
                                                []
                                              |),
                                              [
                                                M.borrow (|
                                                  Pointer.Kind.Ref,
                                                  M.deref (|
                                                    M.call_closure (|
                                                      Ty.apply
                                                        (Ty.path "&")
                                                        []
                                                        [
                                                          Ty.apply
                                                            (Ty.path "alloc::vec::Vec")
                                                            []
                                                            [
                                                              Ty.apply
                                                                (Ty.path
                                                                  "openvm_stark_backend::gkr::types::GkrMask")
                                                                []
                                                                [ F ];
                                                              Ty.path "alloc::alloc::Global"
                                                            ]
                                                        ],
                                                      M.get_trait_method (|
                                                        "core::ops::index::Index",
                                                        Ty.apply
                                                          (Ty.path "alloc::vec::Vec")
                                                          []
                                                          [
                                                            Ty.apply
                                                              (Ty.path "alloc::vec::Vec")
                                                              []
                                                              [
                                                                Ty.apply
                                                                  (Ty.path
                                                                    "openvm_stark_backend::gkr::types::GkrMask")
                                                                  []
                                                                  [ F ];
                                                                Ty.path "alloc::alloc::Global"
                                                              ];
                                                            Ty.path "alloc::alloc::Global"
                                                          ],
                                                        [],
                                                        [ Ty.path "usize" ],
                                                        "index",
                                                        [],
                                                        []
                                                      |),
                                                      [
                                                        M.borrow (|
                                                          Pointer.Kind.Ref,
                                                          M.deref (|
                                                            M.read (| layer_masks_by_instance |)
                                                          |)
                                                        |);
                                                        M.read (| instance |)
                                                      ]
                                                    |)
                                                  |)
                                                |)
                                              ]
                                            |)))
                                      ]
                                    |)))
                                | _ => M.impossible "wrong number of arguments"
                                end)) in
                        let~ n_layers : Ty.path "usize" :=
                          M.call_closure (|
                            Ty.path "usize",
                            M.get_associated_function (|
                              Ty.apply (Ty.path "core::option::Option") [] [ Ty.path "usize" ],
                              "unwrap",
                              [],
                              []
                            |),
                            [
                              M.call_closure (|
                                Ty.apply (Ty.path "core::option::Option") [] [ Ty.path "usize" ],
                                M.get_trait_method (|
                                  "core::iter::traits::iterator::Iterator",
                                  Ty.apply
                                    (Ty.path "core::iter::adapters::map::Map")
                                    []
                                    [
                                      Ty.apply
                                        (Ty.path "core::ops::range::Range")
                                        []
                                        [ Ty.path "usize" ];
                                      Ty.function [ Ty.path "usize" ] (Ty.path "usize")
                                    ],
                                  [],
                                  [],
                                  "max",
                                  [],
                                  []
                                |),
                                [
                                  M.call_closure (|
                                    Ty.apply
                                      (Ty.path "core::iter::adapters::map::Map")
                                      []
                                      [
                                        Ty.apply
                                          (Ty.path "core::ops::range::Range")
                                          []
                                          [ Ty.path "usize" ];
                                        Ty.function [ Ty.path "usize" ] (Ty.path "usize")
                                      ],
                                    M.get_trait_method (|
                                      "core::iter::traits::iterator::Iterator",
                                      Ty.apply
                                        (Ty.path "core::ops::range::Range")
                                        []
                                        [ Ty.path "usize" ],
                                      [],
                                      [],
                                      "map",
                                      [],
                                      [
                                        Ty.path "usize";
                                        Ty.function [ Ty.path "usize" ] (Ty.path "usize")
                                      ]
                                    |),
                                    [
                                      Value.mkStructRecord
                                        "core::ops::range::Range"
                                        []
                                        [ Ty.path "usize" ]
                                        [
                                          ("start", Value.Integer IntegerKind.Usize 0);
                                          ("end_", M.read (| n_instances |))
                                        ];
                                      M.read (| instance_n_layers |)
                                    ]
                                  |)
                                ]
                              |)
                            ]
                          |) in
                        let~ _ : Ty.tuple [] :=
                          M.match_operator (|
                            Ty.tuple [],
                            M.alloc (| Ty.tuple [], Value.Tuple [] |),
                            [
                              fun γ =>
                                ltac:(M.monadic
                                  (let γ :=
                                    M.use
                                      (M.alloc (|
                                        Ty.path "bool",
                                        M.call_closure (|
                                          Ty.path "bool",
                                          BinOp.ne,
                                          [
                                            M.read (| n_layers |);
                                            M.call_closure (|
                                              Ty.path "usize",
                                              M.get_associated_function (|
                                                Ty.apply
                                                  (Ty.path "alloc::vec::Vec")
                                                  []
                                                  [
                                                    Ty.apply
                                                      (Ty.path
                                                        "openvm_stark_backend::sumcheck::SumcheckProof")
                                                      []
                                                      [ F ];
                                                    Ty.path "alloc::alloc::Global"
                                                  ],
                                                "len",
                                                [],
                                                []
                                              |),
                                              [
                                                M.borrow (|
                                                  Pointer.Kind.Ref,
                                                  M.deref (| M.read (| sumcheck_proofs |) |)
                                                |)
                                              ]
                                            |)
                                          ]
                                        |)
                                      |)) in
                                  let _ :=
                                    is_constant_or_break_match (|
                                      M.read (| γ |),
                                      Value.Bool true
                                    |) in
                                  M.never_to_any (|
                                    M.read (|
                                      M.return_ (|
                                        Value.StructTuple
                                          "core::result::Result::Err"
                                          []
                                          [
                                            Ty.apply
                                              (Ty.path
                                                "openvm_stark_backend::gkr::types::GkrArtifact")
                                              []
                                              [ F ];
                                            Ty.apply
                                              (Ty.path "openvm_stark_backend::gkr::types::GkrError")
                                              []
                                              [ F ]
                                          ]
                                          [
                                            Value.StructTuple
                                              "openvm_stark_backend::gkr::types::GkrError::MalformedProof"
                                              []
                                              [ F ]
                                              []
                                          ]
                                      |)
                                    |)
                                  |)));
                              fun γ => ltac:(M.monadic (Value.Tuple []))
                            ]
                          |) in
                        let~ _ : Ty.tuple [] :=
                          M.match_operator (|
                            Ty.tuple [],
                            M.alloc (| Ty.tuple [], Value.Tuple [] |),
                            [
                              fun γ =>
                                ltac:(M.monadic
                                  (let γ :=
                                    M.use
                                      (M.alloc (|
                                        Ty.path "bool",
                                        M.call_closure (|
                                          Ty.path "bool",
                                          BinOp.ne,
                                          [
                                            M.call_closure (|
                                              Ty.path "usize",
                                              M.get_associated_function (|
                                                Ty.apply
                                                  (Ty.path "alloc::vec::Vec")
                                                  []
                                                  [
                                                    Ty.path "openvm_stark_backend::gkr::gate::Gate";
                                                    Ty.path "alloc::alloc::Global"
                                                  ],
                                                "len",
                                                [],
                                                []
                                              |),
                                              [ M.borrow (| Pointer.Kind.Ref, gate_by_instance |) ]
                                            |);
                                            M.read (| n_instances |)
                                          ]
                                        |)
                                      |)) in
                                  let _ :=
                                    is_constant_or_break_match (|
                                      M.read (| γ |),
                                      Value.Bool true
                                    |) in
                                  M.never_to_any (|
                                    M.read (|
                                      M.return_ (|
                                        Value.StructTuple
                                          "core::result::Result::Err"
                                          []
                                          [
                                            Ty.apply
                                              (Ty.path
                                                "openvm_stark_backend::gkr::types::GkrArtifact")
                                              []
                                              [ F ];
                                            Ty.apply
                                              (Ty.path "openvm_stark_backend::gkr::types::GkrError")
                                              []
                                              [ F ]
                                          ]
                                          [
                                            Value.mkStructRecord
                                              "openvm_stark_backend::gkr::types::GkrError::NumInstancesMismatch"
                                              []
                                              [ F ]
                                              [
                                                ("given",
                                                  M.call_closure (|
                                                    Ty.path "usize",
                                                    M.get_associated_function (|
                                                      Ty.apply
                                                        (Ty.path "alloc::vec::Vec")
                                                        []
                                                        [
                                                          Ty.path
                                                            "openvm_stark_backend::gkr::gate::Gate";
                                                          Ty.path "alloc::alloc::Global"
                                                        ],
                                                      "len",
                                                      [],
                                                      []
                                                    |),
                                                    [
                                                      M.borrow (|
                                                        Pointer.Kind.Ref,
                                                        gate_by_instance
                                                      |)
                                                    ]
                                                  |));
                                                ("proof", M.read (| n_instances |))
                                              ]
                                          ]
                                      |)
                                    |)
                                  |)));
                              fun γ => ltac:(M.monadic (Value.Tuple []))
                            ]
                          |) in
                        let~ ood_point :
                            Ty.apply
                              (Ty.path "alloc::vec::Vec")
                              []
                              [ F; Ty.path "alloc::alloc::Global" ] :=
                          M.call_closure (|
                            Ty.apply
                              (Ty.path "alloc::vec::Vec")
                              []
                              [ F; Ty.path "alloc::alloc::Global" ],
                            M.get_associated_function (|
                              Ty.apply
                                (Ty.path "alloc::vec::Vec")
                                []
                                [ F; Ty.path "alloc::alloc::Global" ],
                              "new",
                              [],
                              []
                            |),
                            []
                          |) in
                        let~ claims_to_verify_by_instance :
                            Ty.apply
                              (Ty.path "alloc::vec::Vec")
                              []
                              [
                                Ty.apply
                                  (Ty.path "core::option::Option")
                                  []
                                  [
                                    Ty.apply
                                      (Ty.path "alloc::vec::Vec")
                                      []
                                      [ F; Ty.path "alloc::alloc::Global" ]
                                  ];
                                Ty.path "alloc::alloc::Global"
                              ] :=
                          M.call_closure (|
                            Ty.apply
                              (Ty.path "alloc::vec::Vec")
                              []
                              [
                                Ty.apply
                                  (Ty.path "core::option::Option")
                                  []
                                  [
                                    Ty.apply
                                      (Ty.path "alloc::vec::Vec")
                                      []
                                      [ F; Ty.path "alloc::alloc::Global" ]
                                  ];
                                Ty.path "alloc::alloc::Global"
                              ],
                            M.get_function (|
                              "alloc::vec::from_elem",
                              [],
                              [
                                Ty.apply
                                  (Ty.path "core::option::Option")
                                  []
                                  [
                                    Ty.apply
                                      (Ty.path "alloc::vec::Vec")
                                      []
                                      [ F; Ty.path "alloc::alloc::Global" ]
                                  ]
                              ]
                            |),
                            [
                              Value.StructTuple
                                "core::option::Option::None"
                                []
                                [
                                  Ty.apply
                                    (Ty.path "alloc::vec::Vec")
                                    []
                                    [ F; Ty.path "alloc::alloc::Global" ]
                                ]
                                [];
                              M.read (| n_instances |)
                            ]
                          |) in
                        let~ _ : Ty.tuple [] :=
                          M.read (|
                            M.use
                              (M.alloc (|
                                Ty.tuple [],
                                M.match_operator (|
                                  Ty.tuple [],
                                  M.alloc (|
                                    Ty.apply
                                      (Ty.path "core::iter::adapters::enumerate::Enumerate")
                                      []
                                      [
                                        Ty.apply
                                          (Ty.path "core::slice::iter::Iter")
                                          []
                                          [
                                            Ty.apply
                                              (Ty.path
                                                "openvm_stark_backend::sumcheck::SumcheckProof")
                                              []
                                              [ F ]
                                          ]
                                      ],
                                    M.call_closure (|
                                      Ty.apply
                                        (Ty.path "core::iter::adapters::enumerate::Enumerate")
                                        []
                                        [
                                          Ty.apply
                                            (Ty.path "core::slice::iter::Iter")
                                            []
                                            [
                                              Ty.apply
                                                (Ty.path
                                                  "openvm_stark_backend::sumcheck::SumcheckProof")
                                                []
                                                [ F ]
                                            ]
                                        ],
                                      M.get_trait_method (|
                                        "core::iter::traits::collect::IntoIterator",
                                        Ty.apply
                                          (Ty.path "core::iter::adapters::enumerate::Enumerate")
                                          []
                                          [
                                            Ty.apply
                                              (Ty.path "core::slice::iter::Iter")
                                              []
                                              [
                                                Ty.apply
                                                  (Ty.path
                                                    "openvm_stark_backend::sumcheck::SumcheckProof")
                                                  []
                                                  [ F ]
                                              ]
                                          ],
                                        [],
                                        [],
                                        "into_iter",
                                        [],
                                        []
                                      |),
                                      [
                                        M.call_closure (|
                                          Ty.apply
                                            (Ty.path "core::iter::adapters::enumerate::Enumerate")
                                            []
                                            [
                                              Ty.apply
                                                (Ty.path "core::slice::iter::Iter")
                                                []
                                                [
                                                  Ty.apply
                                                    (Ty.path
                                                      "openvm_stark_backend::sumcheck::SumcheckProof")
                                                    []
                                                    [ F ]
                                                ]
                                            ],
                                          M.get_trait_method (|
                                            "core::iter::traits::iterator::Iterator",
                                            Ty.apply
                                              (Ty.path "core::slice::iter::Iter")
                                              []
                                              [
                                                Ty.apply
                                                  (Ty.path
                                                    "openvm_stark_backend::sumcheck::SumcheckProof")
                                                  []
                                                  [ F ]
                                              ],
                                            [],
                                            [],
                                            "enumerate",
                                            [],
                                            []
                                          |),
                                          [
                                            M.call_closure (|
                                              Ty.apply
                                                (Ty.path "core::slice::iter::Iter")
                                                []
                                                [
                                                  Ty.apply
                                                    (Ty.path
                                                      "openvm_stark_backend::sumcheck::SumcheckProof")
                                                    []
                                                    [ F ]
                                                ],
                                              M.get_associated_function (|
                                                Ty.apply
                                                  (Ty.path "slice")
                                                  []
                                                  [
                                                    Ty.apply
                                                      (Ty.path
                                                        "openvm_stark_backend::sumcheck::SumcheckProof")
                                                      []
                                                      [ F ]
                                                  ],
                                                "iter",
                                                [],
                                                []
                                              |),
                                              [
                                                M.borrow (|
                                                  Pointer.Kind.Ref,
                                                  M.deref (|
                                                    M.call_closure (|
                                                      Ty.apply
                                                        (Ty.path "&")
                                                        []
                                                        [
                                                          Ty.apply
                                                            (Ty.path "slice")
                                                            []
                                                            [
                                                              Ty.apply
                                                                (Ty.path
                                                                  "openvm_stark_backend::sumcheck::SumcheckProof")
                                                                []
                                                                [ F ]
                                                            ]
                                                        ],
                                                      M.get_trait_method (|
                                                        "core::ops::deref::Deref",
                                                        Ty.apply
                                                          (Ty.path "alloc::vec::Vec")
                                                          []
                                                          [
                                                            Ty.apply
                                                              (Ty.path
                                                                "openvm_stark_backend::sumcheck::SumcheckProof")
                                                              []
                                                              [ F ];
                                                            Ty.path "alloc::alloc::Global"
                                                          ],
                                                        [],
                                                        [],
                                                        "deref",
                                                        [],
                                                        []
                                                      |),
                                                      [
                                                        M.borrow (|
                                                          Pointer.Kind.Ref,
                                                          M.deref (| M.read (| sumcheck_proofs |) |)
                                                        |)
                                                      ]
                                                    |)
                                                  |)
                                                |)
                                              ]
                                            |)
                                          ]
                                        |)
                                      ]
                                    |)
                                  |),
                                  [
                                    fun γ =>
                                      ltac:(M.monadic
                                        (let iter :=
                                          M.copy (|
                                            Ty.apply
                                              (Ty.path "core::iter::adapters::enumerate::Enumerate")
                                              []
                                              [
                                                Ty.apply
                                                  (Ty.path "core::slice::iter::Iter")
                                                  []
                                                  [
                                                    Ty.apply
                                                      (Ty.path
                                                        "openvm_stark_backend::sumcheck::SumcheckProof")
                                                      []
                                                      [ F ]
                                                  ]
                                              ],
                                            γ
                                          |) in
                                        M.read (|
                                          M.loop (|
                                            Ty.tuple [],
                                            ltac:(M.monadic
                                              (let~ _ : Ty.tuple [] :=
                                                M.match_operator (|
                                                  Ty.tuple [],
                                                  M.alloc (|
                                                    Ty.apply
                                                      (Ty.path "core::option::Option")
                                                      []
                                                      [
                                                        Ty.tuple
                                                          [
                                                            Ty.path "usize";
                                                            Ty.apply
                                                              (Ty.path "&")
                                                              []
                                                              [
                                                                Ty.apply
                                                                  (Ty.path
                                                                    "openvm_stark_backend::sumcheck::SumcheckProof")
                                                                  []
                                                                  [ F ]
                                                              ]
                                                          ]
                                                      ],
                                                    M.call_closure (|
                                                      Ty.apply
                                                        (Ty.path "core::option::Option")
                                                        []
                                                        [
                                                          Ty.tuple
                                                            [
                                                              Ty.path "usize";
                                                              Ty.apply
                                                                (Ty.path "&")
                                                                []
                                                                [
                                                                  Ty.apply
                                                                    (Ty.path
                                                                      "openvm_stark_backend::sumcheck::SumcheckProof")
                                                                    []
                                                                    [ F ]
                                                                ]
                                                            ]
                                                        ],
                                                      M.get_trait_method (|
                                                        "core::iter::traits::iterator::Iterator",
                                                        Ty.apply
                                                          (Ty.path
                                                            "core::iter::adapters::enumerate::Enumerate")
                                                          []
                                                          [
                                                            Ty.apply
                                                              (Ty.path "core::slice::iter::Iter")
                                                              []
                                                              [
                                                                Ty.apply
                                                                  (Ty.path
                                                                    "openvm_stark_backend::sumcheck::SumcheckProof")
                                                                  []
                                                                  [ F ]
                                                              ]
                                                          ],
                                                        [],
                                                        [],
                                                        "next",
                                                        [],
                                                        []
                                                      |),
                                                      [
                                                        M.borrow (|
                                                          Pointer.Kind.MutRef,
                                                          M.deref (|
                                                            M.borrow (| Pointer.Kind.MutRef, iter |)
                                                          |)
                                                        |)
                                                      ]
                                                    |)
                                                  |),
                                                  [
                                                    fun γ =>
                                                      ltac:(M.monadic
                                                        (let _ :=
                                                          M.is_struct_tuple (|
                                                            γ,
                                                            "core::option::Option::None"
                                                          |) in
                                                        M.never_to_any (|
                                                          M.read (| M.break (||) |)
                                                        |)));
                                                    fun γ =>
                                                      ltac:(M.monadic
                                                        (let γ0_0 :=
                                                          M.SubPointer.get_struct_tuple_field (|
                                                            γ,
                                                            "core::option::Option::Some",
                                                            0
                                                          |) in
                                                        let γ1_0 :=
                                                          M.SubPointer.get_tuple_field (|
                                                            γ0_0,
                                                            0
                                                          |) in
                                                        let γ1_1 :=
                                                          M.SubPointer.get_tuple_field (|
                                                            γ0_0,
                                                            1
                                                          |) in
                                                        let layer :=
                                                          M.copy (| Ty.path "usize", γ1_0 |) in
                                                        let sumcheck_proof :=
                                                          M.copy (|
                                                            Ty.apply
                                                              (Ty.path "&")
                                                              []
                                                              [
                                                                Ty.apply
                                                                  (Ty.path
                                                                    "openvm_stark_backend::sumcheck::SumcheckProof")
                                                                  []
                                                                  [ F ]
                                                              ],
                                                            γ1_1
                                                          |) in
                                                        M.read (|
                                                          let~ n_remaining_layers :
                                                              Ty.path "usize" :=
                                                            M.call_closure (|
                                                              Ty.path "usize",
                                                              BinOp.Wrap.sub,
                                                              [
                                                                M.read (| n_layers |);
                                                                M.read (| layer |)
                                                              ]
                                                            |) in
                                                          let~ _ : Ty.tuple [] :=
                                                            M.read (|
                                                              M.use
                                                                (M.alloc (|
                                                                  Ty.tuple [],
                                                                  M.match_operator (|
                                                                    Ty.tuple [],
                                                                    M.alloc (|
                                                                      Ty.apply
                                                                        (Ty.path
                                                                          "core::ops::range::Range")
                                                                        []
                                                                        [ Ty.path "usize" ],
                                                                      M.call_closure (|
                                                                        Ty.apply
                                                                          (Ty.path
                                                                            "core::ops::range::Range")
                                                                          []
                                                                          [ Ty.path "usize" ],
                                                                        M.get_trait_method (|
                                                                          "core::iter::traits::collect::IntoIterator",
                                                                          Ty.apply
                                                                            (Ty.path
                                                                              "core::ops::range::Range")
                                                                            []
                                                                            [ Ty.path "usize" ],
                                                                          [],
                                                                          [],
                                                                          "into_iter",
                                                                          [],
                                                                          []
                                                                        |),
                                                                        [
                                                                          Value.mkStructRecord
                                                                            "core::ops::range::Range"
                                                                            []
                                                                            [ Ty.path "usize" ]
                                                                            [
                                                                              ("start",
                                                                                Value.Integer
                                                                                  IntegerKind.Usize
                                                                                  0);
                                                                              ("end_",
                                                                                M.read (|
                                                                                  n_instances
                                                                                |))
                                                                            ]
                                                                        ]
                                                                      |)
                                                                    |),
                                                                    [
                                                                      fun γ =>
                                                                        ltac:(M.monadic
                                                                          (let iter :=
                                                                            M.copy (|
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "core::ops::range::Range")
                                                                                []
                                                                                [ Ty.path "usize" ],
                                                                              γ
                                                                            |) in
                                                                          M.read (|
                                                                            M.loop (|
                                                                              Ty.tuple [],
                                                                              ltac:(M.monadic
                                                                                (let~ _ :
                                                                                    Ty.tuple [] :=
                                                                                  M.match_operator (|
                                                                                    Ty.tuple [],
                                                                                    M.alloc (|
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "core::option::Option")
                                                                                        []
                                                                                        [
                                                                                          Ty.path
                                                                                            "usize"
                                                                                        ],
                                                                                      M.call_closure (|
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "core::option::Option")
                                                                                          []
                                                                                          [
                                                                                            Ty.path
                                                                                              "usize"
                                                                                          ],
                                                                                        M.get_trait_method (|
                                                                                          "core::iter::traits::iterator::Iterator",
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "core::ops::range::Range")
                                                                                            []
                                                                                            [
                                                                                              Ty.path
                                                                                                "usize"
                                                                                            ],
                                                                                          [],
                                                                                          [],
                                                                                          "next",
                                                                                          [],
                                                                                          []
                                                                                        |),
                                                                                        [
                                                                                          M.borrow (|
                                                                                            Pointer.Kind.MutRef,
                                                                                            M.deref (|
                                                                                              M.borrow (|
                                                                                                Pointer.Kind.MutRef,
                                                                                                iter
                                                                                              |)
                                                                                            |)
                                                                                          |)
                                                                                        ]
                                                                                      |)
                                                                                    |),
                                                                                    [
                                                                                      fun γ =>
                                                                                        ltac:(M.monadic
                                                                                          (let _ :=
                                                                                            M.is_struct_tuple (|
                                                                                              γ,
                                                                                              "core::option::Option::None"
                                                                                            |) in
                                                                                          M.never_to_any (|
                                                                                            M.read (|
                                                                                              M.break (||)
                                                                                            |)
                                                                                          |)));
                                                                                      fun γ =>
                                                                                        ltac:(M.monadic
                                                                                          (let
                                                                                                γ0_0 :=
                                                                                            M.SubPointer.get_struct_tuple_field (|
                                                                                              γ,
                                                                                              "core::option::Option::Some",
                                                                                              0
                                                                                            |) in
                                                                                          let
                                                                                                instance :=
                                                                                            M.copy (|
                                                                                              Ty.path
                                                                                                "usize",
                                                                                              γ0_0
                                                                                            |) in
                                                                                          M.match_operator (|
                                                                                            Ty.tuple
                                                                                              [],
                                                                                            M.alloc (|
                                                                                              Ty.tuple
                                                                                                [],
                                                                                              Value.Tuple
                                                                                                []
                                                                                            |),
                                                                                            [
                                                                                              fun
                                                                                                  γ =>
                                                                                                ltac:(M.monadic
                                                                                                  (let
                                                                                                        γ :=
                                                                                                    M.use
                                                                                                      (M.alloc (|
                                                                                                        Ty.path
                                                                                                          "bool",
                                                                                                        M.call_closure (|
                                                                                                          Ty.path
                                                                                                            "bool",
                                                                                                          BinOp.eq,
                                                                                                          [
                                                                                                            M.call_closure (|
                                                                                                              Ty.path
                                                                                                                "usize",
                                                                                                              M.get_trait_method (|
                                                                                                                "core::ops::function::Fn",
                                                                                                                Ty.function
                                                                                                                  [
                                                                                                                    Ty.path
                                                                                                                      "usize"
                                                                                                                  ]
                                                                                                                  (Ty.path
                                                                                                                    "usize"),
                                                                                                                [],
                                                                                                                [
                                                                                                                  Ty.tuple
                                                                                                                    [
                                                                                                                      Ty.path
                                                                                                                        "usize"
                                                                                                                    ]
                                                                                                                ],
                                                                                                                "call",
                                                                                                                [],
                                                                                                                []
                                                                                                              |),
                                                                                                              [
                                                                                                                M.borrow (|
                                                                                                                  Pointer.Kind.Ref,
                                                                                                                  instance_n_layers
                                                                                                                |);
                                                                                                                Value.Tuple
                                                                                                                  [
                                                                                                                    M.read (|
                                                                                                                      instance
                                                                                                                    |)
                                                                                                                  ]
                                                                                                              ]
                                                                                                            |);
                                                                                                            M.read (|
                                                                                                              n_remaining_layers
                                                                                                            |)
                                                                                                          ]
                                                                                                        |)
                                                                                                      |)) in
                                                                                                  let
                                                                                                        _ :=
                                                                                                    is_constant_or_break_match (|
                                                                                                      M.read (|
                                                                                                        γ
                                                                                                      |),
                                                                                                      Value.Bool
                                                                                                        true
                                                                                                    |) in
                                                                                                  M.read (|
                                                                                                    let~
                                                                                                          output_claims :
                                                                                                        Ty.apply
                                                                                                          (Ty.path
                                                                                                            "alloc::vec::Vec")
                                                                                                          []
                                                                                                          [
                                                                                                            F;
                                                                                                            Ty.path
                                                                                                              "alloc::alloc::Global"
                                                                                                          ] :=
                                                                                                      M.call_closure (|
                                                                                                        Ty.apply
                                                                                                          (Ty.path
                                                                                                            "alloc::vec::Vec")
                                                                                                          []
                                                                                                          [
                                                                                                            F;
                                                                                                            Ty.path
                                                                                                              "alloc::alloc::Global"
                                                                                                          ],
                                                                                                        M.get_trait_method (|
                                                                                                          "core::clone::Clone",
                                                                                                          Ty.apply
                                                                                                            (Ty.path
                                                                                                              "alloc::vec::Vec")
                                                                                                            []
                                                                                                            [
                                                                                                              F;
                                                                                                              Ty.path
                                                                                                                "alloc::alloc::Global"
                                                                                                            ],
                                                                                                          [],
                                                                                                          [],
                                                                                                          "clone",
                                                                                                          [],
                                                                                                          []
                                                                                                        |),
                                                                                                        [
                                                                                                          M.borrow (|
                                                                                                            Pointer.Kind.Ref,
                                                                                                            M.deref (|
                                                                                                              M.call_closure (|
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "&")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "alloc::vec::Vec")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        F;
                                                                                                                        Ty.path
                                                                                                                          "alloc::alloc::Global"
                                                                                                                      ]
                                                                                                                  ],
                                                                                                                M.get_trait_method (|
                                                                                                                  "core::ops::index::Index",
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "alloc::vec::Vec")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "alloc::vec::Vec")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          F;
                                                                                                                          Ty.path
                                                                                                                            "alloc::alloc::Global"
                                                                                                                        ];
                                                                                                                      Ty.path
                                                                                                                        "alloc::alloc::Global"
                                                                                                                    ],
                                                                                                                  [],
                                                                                                                  [
                                                                                                                    Ty.path
                                                                                                                      "usize"
                                                                                                                  ],
                                                                                                                  "index",
                                                                                                                  [],
                                                                                                                  []
                                                                                                                |),
                                                                                                                [
                                                                                                                  M.borrow (|
                                                                                                                    Pointer.Kind.Ref,
                                                                                                                    M.deref (|
                                                                                                                      M.read (|
                                                                                                                        output_claims_by_instance
                                                                                                                      |)
                                                                                                                    |)
                                                                                                                  |);
                                                                                                                  M.read (|
                                                                                                                    instance
                                                                                                                  |)
                                                                                                                ]
                                                                                                              |)
                                                                                                            |)
                                                                                                          |)
                                                                                                        ]
                                                                                                      |) in
                                                                                                    let~
                                                                                                          _ :
                                                                                                        Ty.tuple
                                                                                                          [] :=
                                                                                                      M.write (|
                                                                                                        M.deref (|
                                                                                                          M.call_closure (|
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "&mut")
                                                                                                              []
                                                                                                              [
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "core::option::Option")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "alloc::vec::Vec")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        F;
                                                                                                                        Ty.path
                                                                                                                          "alloc::alloc::Global"
                                                                                                                      ]
                                                                                                                  ]
                                                                                                              ],
                                                                                                            M.get_trait_method (|
                                                                                                              "core::ops::index::IndexMut",
                                                                                                              Ty.apply
                                                                                                                (Ty.path
                                                                                                                  "alloc::vec::Vec")
                                                                                                                []
                                                                                                                [
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "core::option::Option")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "alloc::vec::Vec")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          F;
                                                                                                                          Ty.path
                                                                                                                            "alloc::alloc::Global"
                                                                                                                        ]
                                                                                                                    ];
                                                                                                                  Ty.path
                                                                                                                    "alloc::alloc::Global"
                                                                                                                ],
                                                                                                              [],
                                                                                                              [
                                                                                                                Ty.path
                                                                                                                  "usize"
                                                                                                              ],
                                                                                                              "index_mut",
                                                                                                              [],
                                                                                                              []
                                                                                                            |),
                                                                                                            [
                                                                                                              M.borrow (|
                                                                                                                Pointer.Kind.MutRef,
                                                                                                                claims_to_verify_by_instance
                                                                                                              |);
                                                                                                              M.read (|
                                                                                                                instance
                                                                                                              |)
                                                                                                            ]
                                                                                                          |)
                                                                                                        |),
                                                                                                        Value.StructTuple
                                                                                                          "core::option::Option::Some"
                                                                                                          []
                                                                                                          [
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "alloc::vec::Vec")
                                                                                                              []
                                                                                                              [
                                                                                                                F;
                                                                                                                Ty.path
                                                                                                                  "alloc::alloc::Global"
                                                                                                              ]
                                                                                                          ]
                                                                                                          [
                                                                                                            M.read (|
                                                                                                              output_claims
                                                                                                            |)
                                                                                                          ]
                                                                                                      |) in
                                                                                                    M.alloc (|
                                                                                                      Ty.tuple
                                                                                                        [],
                                                                                                      Value.Tuple
                                                                                                        []
                                                                                                    |)
                                                                                                  |)));
                                                                                              fun
                                                                                                  γ =>
                                                                                                ltac:(M.monadic
                                                                                                  (Value.Tuple
                                                                                                    []))
                                                                                            ]
                                                                                          |)))
                                                                                    ]
                                                                                  |) in
                                                                                M.alloc (|
                                                                                  Ty.tuple [],
                                                                                  Value.Tuple []
                                                                                |)))
                                                                            |)
                                                                          |)))
                                                                    ]
                                                                  |)
                                                                |))
                                                            |) in
                                                          let~ _ : Ty.tuple [] :=
                                                            M.read (|
                                                              M.use
                                                                (M.alloc (|
                                                                  Ty.tuple [],
                                                                  M.match_operator (|
                                                                    Ty.tuple [],
                                                                    M.alloc (|
                                                                      Ty.apply
                                                                        (Ty.path
                                                                          "core::iter::adapters::flatten::Flatten")
                                                                        []
                                                                        [
                                                                          Ty.apply
                                                                            (Ty.path
                                                                              "core::slice::iter::Iter")
                                                                            []
                                                                            [
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "core::option::Option")
                                                                                []
                                                                                [
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "alloc::vec::Vec")
                                                                                    []
                                                                                    [
                                                                                      F;
                                                                                      Ty.path
                                                                                        "alloc::alloc::Global"
                                                                                    ]
                                                                                ]
                                                                            ]
                                                                        ],
                                                                      M.call_closure (|
                                                                        Ty.apply
                                                                          (Ty.path
                                                                            "core::iter::adapters::flatten::Flatten")
                                                                          []
                                                                          [
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "core::slice::iter::Iter")
                                                                              []
                                                                              [
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "core::option::Option")
                                                                                  []
                                                                                  [
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "alloc::vec::Vec")
                                                                                      []
                                                                                      [
                                                                                        F;
                                                                                        Ty.path
                                                                                          "alloc::alloc::Global"
                                                                                      ]
                                                                                  ]
                                                                              ]
                                                                          ],
                                                                        M.get_trait_method (|
                                                                          "core::iter::traits::collect::IntoIterator",
                                                                          Ty.apply
                                                                            (Ty.path
                                                                              "core::iter::adapters::flatten::Flatten")
                                                                            []
                                                                            [
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "core::slice::iter::Iter")
                                                                                []
                                                                                [
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "core::option::Option")
                                                                                    []
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "alloc::vec::Vec")
                                                                                        []
                                                                                        [
                                                                                          F;
                                                                                          Ty.path
                                                                                            "alloc::alloc::Global"
                                                                                        ]
                                                                                    ]
                                                                                ]
                                                                            ],
                                                                          [],
                                                                          [],
                                                                          "into_iter",
                                                                          [],
                                                                          []
                                                                        |),
                                                                        [
                                                                          M.call_closure (|
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "core::iter::adapters::flatten::Flatten")
                                                                              []
                                                                              [
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "core::slice::iter::Iter")
                                                                                  []
                                                                                  [
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "core::option::Option")
                                                                                      []
                                                                                      [
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "alloc::vec::Vec")
                                                                                          []
                                                                                          [
                                                                                            F;
                                                                                            Ty.path
                                                                                              "alloc::alloc::Global"
                                                                                          ]
                                                                                      ]
                                                                                  ]
                                                                              ],
                                                                            M.get_trait_method (|
                                                                              "core::iter::traits::iterator::Iterator",
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "core::slice::iter::Iter")
                                                                                []
                                                                                [
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "core::option::Option")
                                                                                    []
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "alloc::vec::Vec")
                                                                                        []
                                                                                        [
                                                                                          F;
                                                                                          Ty.path
                                                                                            "alloc::alloc::Global"
                                                                                        ]
                                                                                    ]
                                                                                ],
                                                                              [],
                                                                              [],
                                                                              "flatten",
                                                                              [],
                                                                              []
                                                                            |),
                                                                            [
                                                                              M.call_closure (|
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "core::slice::iter::Iter")
                                                                                  []
                                                                                  [
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "core::option::Option")
                                                                                      []
                                                                                      [
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "alloc::vec::Vec")
                                                                                          []
                                                                                          [
                                                                                            F;
                                                                                            Ty.path
                                                                                              "alloc::alloc::Global"
                                                                                          ]
                                                                                      ]
                                                                                  ],
                                                                                M.get_associated_function (|
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "slice")
                                                                                    []
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "core::option::Option")
                                                                                        []
                                                                                        [
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "alloc::vec::Vec")
                                                                                            []
                                                                                            [
                                                                                              F;
                                                                                              Ty.path
                                                                                                "alloc::alloc::Global"
                                                                                            ]
                                                                                        ]
                                                                                    ],
                                                                                  "iter",
                                                                                  [],
                                                                                  []
                                                                                |),
                                                                                [
                                                                                  M.borrow (|
                                                                                    Pointer.Kind.Ref,
                                                                                    M.deref (|
                                                                                      M.call_closure (|
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "&")
                                                                                          []
                                                                                          [
                                                                                            Ty.apply
                                                                                              (Ty.path
                                                                                                "slice")
                                                                                              []
                                                                                              [
                                                                                                Ty.apply
                                                                                                  (Ty.path
                                                                                                    "core::option::Option")
                                                                                                  []
                                                                                                  [
                                                                                                    Ty.apply
                                                                                                      (Ty.path
                                                                                                        "alloc::vec::Vec")
                                                                                                      []
                                                                                                      [
                                                                                                        F;
                                                                                                        Ty.path
                                                                                                          "alloc::alloc::Global"
                                                                                                      ]
                                                                                                  ]
                                                                                              ]
                                                                                          ],
                                                                                        M.get_trait_method (|
                                                                                          "core::ops::deref::Deref",
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "alloc::vec::Vec")
                                                                                            []
                                                                                            [
                                                                                              Ty.apply
                                                                                                (Ty.path
                                                                                                  "core::option::Option")
                                                                                                []
                                                                                                [
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "alloc::vec::Vec")
                                                                                                    []
                                                                                                    [
                                                                                                      F;
                                                                                                      Ty.path
                                                                                                        "alloc::alloc::Global"
                                                                                                    ]
                                                                                                ];
                                                                                              Ty.path
                                                                                                "alloc::alloc::Global"
                                                                                            ],
                                                                                          [],
                                                                                          [],
                                                                                          "deref",
                                                                                          [],
                                                                                          []
                                                                                        |),
                                                                                        [
                                                                                          M.borrow (|
                                                                                            Pointer.Kind.Ref,
                                                                                            claims_to_verify_by_instance
                                                                                          |)
                                                                                        ]
                                                                                      |)
                                                                                    |)
                                                                                  |)
                                                                                ]
                                                                              |)
                                                                            ]
                                                                          |)
                                                                        ]
                                                                      |)
                                                                    |),
                                                                    [
                                                                      fun γ =>
                                                                        ltac:(M.monadic
                                                                          (let iter :=
                                                                            M.copy (|
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "core::iter::adapters::flatten::Flatten")
                                                                                []
                                                                                [
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "core::slice::iter::Iter")
                                                                                    []
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "core::option::Option")
                                                                                        []
                                                                                        [
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "alloc::vec::Vec")
                                                                                            []
                                                                                            [
                                                                                              F;
                                                                                              Ty.path
                                                                                                "alloc::alloc::Global"
                                                                                            ]
                                                                                        ]
                                                                                    ]
                                                                                ],
                                                                              γ
                                                                            |) in
                                                                          M.read (|
                                                                            M.loop (|
                                                                              Ty.tuple [],
                                                                              ltac:(M.monadic
                                                                                (let~ _ :
                                                                                    Ty.tuple [] :=
                                                                                  M.match_operator (|
                                                                                    Ty.tuple [],
                                                                                    M.alloc (|
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "core::option::Option")
                                                                                        []
                                                                                        [
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "&")
                                                                                            []
                                                                                            [
                                                                                              Ty.apply
                                                                                                (Ty.path
                                                                                                  "alloc::vec::Vec")
                                                                                                []
                                                                                                [
                                                                                                  F;
                                                                                                  Ty.path
                                                                                                    "alloc::alloc::Global"
                                                                                                ]
                                                                                            ]
                                                                                        ],
                                                                                      M.call_closure (|
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "core::option::Option")
                                                                                          []
                                                                                          [
                                                                                            Ty.apply
                                                                                              (Ty.path
                                                                                                "&")
                                                                                              []
                                                                                              [
                                                                                                Ty.apply
                                                                                                  (Ty.path
                                                                                                    "alloc::vec::Vec")
                                                                                                  []
                                                                                                  [
                                                                                                    F;
                                                                                                    Ty.path
                                                                                                      "alloc::alloc::Global"
                                                                                                  ]
                                                                                              ]
                                                                                          ],
                                                                                        M.get_trait_method (|
                                                                                          "core::iter::traits::iterator::Iterator",
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "core::iter::adapters::flatten::Flatten")
                                                                                            []
                                                                                            [
                                                                                              Ty.apply
                                                                                                (Ty.path
                                                                                                  "core::slice::iter::Iter")
                                                                                                []
                                                                                                [
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "core::option::Option")
                                                                                                    []
                                                                                                    [
                                                                                                      Ty.apply
                                                                                                        (Ty.path
                                                                                                          "alloc::vec::Vec")
                                                                                                        []
                                                                                                        [
                                                                                                          F;
                                                                                                          Ty.path
                                                                                                            "alloc::alloc::Global"
                                                                                                        ]
                                                                                                    ]
                                                                                                ]
                                                                                            ],
                                                                                          [],
                                                                                          [],
                                                                                          "next",
                                                                                          [],
                                                                                          []
                                                                                        |),
                                                                                        [
                                                                                          M.borrow (|
                                                                                            Pointer.Kind.MutRef,
                                                                                            M.deref (|
                                                                                              M.borrow (|
                                                                                                Pointer.Kind.MutRef,
                                                                                                iter
                                                                                              |)
                                                                                            |)
                                                                                          |)
                                                                                        ]
                                                                                      |)
                                                                                    |),
                                                                                    [
                                                                                      fun γ =>
                                                                                        ltac:(M.monadic
                                                                                          (let _ :=
                                                                                            M.is_struct_tuple (|
                                                                                              γ,
                                                                                              "core::option::Option::None"
                                                                                            |) in
                                                                                          M.never_to_any (|
                                                                                            M.read (|
                                                                                              M.break (||)
                                                                                            |)
                                                                                          |)));
                                                                                      fun γ =>
                                                                                        ltac:(M.monadic
                                                                                          (let
                                                                                                γ0_0 :=
                                                                                            M.SubPointer.get_struct_tuple_field (|
                                                                                              γ,
                                                                                              "core::option::Option::Some",
                                                                                              0
                                                                                            |) in
                                                                                          let
                                                                                                claims_to_verify :=
                                                                                            M.copy (|
                                                                                              Ty.apply
                                                                                                (Ty.path
                                                                                                  "&")
                                                                                                []
                                                                                                [
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "alloc::vec::Vec")
                                                                                                    []
                                                                                                    [
                                                                                                      F;
                                                                                                      Ty.path
                                                                                                        "alloc::alloc::Global"
                                                                                                    ]
                                                                                                ],
                                                                                              γ0_0
                                                                                            |) in
                                                                                          M.read (|
                                                                                            let~ _ :
                                                                                                Ty.tuple
                                                                                                  [] :=
                                                                                              M.call_closure (|
                                                                                                Ty.tuple
                                                                                                  [],
                                                                                                M.get_trait_method (|
                                                                                                  "p3_challenger::CanObserve",
                                                                                                  impl_FieldChallenger_F_,
                                                                                                  [],
                                                                                                  [
                                                                                                    F
                                                                                                  ],
                                                                                                  "observe_slice",
                                                                                                  [],
                                                                                                  []
                                                                                                |),
                                                                                                [
                                                                                                  M.borrow (|
                                                                                                    Pointer.Kind.MutRef,
                                                                                                    M.deref (|
                                                                                                      M.read (|
                                                                                                        challenger
                                                                                                      |)
                                                                                                    |)
                                                                                                  |);
                                                                                                  M.borrow (|
                                                                                                    Pointer.Kind.Ref,
                                                                                                    M.deref (|
                                                                                                      M.call_closure (|
                                                                                                        Ty.apply
                                                                                                          (Ty.path
                                                                                                            "&")
                                                                                                          []
                                                                                                          [
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "slice")
                                                                                                              []
                                                                                                              [
                                                                                                                F
                                                                                                              ]
                                                                                                          ],
                                                                                                        M.get_trait_method (|
                                                                                                          "core::ops::deref::Deref",
                                                                                                          Ty.apply
                                                                                                            (Ty.path
                                                                                                              "alloc::vec::Vec")
                                                                                                            []
                                                                                                            [
                                                                                                              F;
                                                                                                              Ty.path
                                                                                                                "alloc::alloc::Global"
                                                                                                            ],
                                                                                                          [],
                                                                                                          [],
                                                                                                          "deref",
                                                                                                          [],
                                                                                                          []
                                                                                                        |),
                                                                                                        [
                                                                                                          M.borrow (|
                                                                                                            Pointer.Kind.Ref,
                                                                                                            M.deref (|
                                                                                                              M.read (|
                                                                                                                claims_to_verify
                                                                                                              |)
                                                                                                            |)
                                                                                                          |)
                                                                                                        ]
                                                                                                      |)
                                                                                                    |)
                                                                                                  |)
                                                                                                ]
                                                                                              |) in
                                                                                            M.alloc (|
                                                                                              Ty.tuple
                                                                                                [],
                                                                                              Value.Tuple
                                                                                                []
                                                                                            |)
                                                                                          |)))
                                                                                    ]
                                                                                  |) in
                                                                                M.alloc (|
                                                                                  Ty.tuple [],
                                                                                  Value.Tuple []
                                                                                |)))
                                                                            |)
                                                                          |)))
                                                                    ]
                                                                  |)
                                                                |))
                                                            |) in
                                                          let~ sumcheck_alpha : F :=
                                                            M.call_closure (|
                                                              F,
                                                              M.get_trait_method (|
                                                                "p3_challenger::CanSample",
                                                                impl_FieldChallenger_F_,
                                                                [],
                                                                [ F ],
                                                                "sample",
                                                                [],
                                                                []
                                                              |),
                                                              [
                                                                M.borrow (|
                                                                  Pointer.Kind.MutRef,
                                                                  M.deref (|
                                                                    M.read (| challenger |)
                                                                  |)
                                                                |)
                                                              ]
                                                            |) in
                                                          let~ instance_lambda : F :=
                                                            M.call_closure (|
                                                              F,
                                                              M.get_trait_method (|
                                                                "p3_challenger::CanSample",
                                                                impl_FieldChallenger_F_,
                                                                [],
                                                                [ F ],
                                                                "sample",
                                                                [],
                                                                []
                                                              |),
                                                              [
                                                                M.borrow (|
                                                                  Pointer.Kind.MutRef,
                                                                  M.deref (|
                                                                    M.read (| challenger |)
                                                                  |)
                                                                |)
                                                              ]
                                                            |) in
                                                          let~ sumcheck_claims :
                                                              Ty.apply
                                                                (Ty.path "alloc::vec::Vec")
                                                                []
                                                                [ F; Ty.path "alloc::alloc::Global"
                                                                ] :=
                                                            M.call_closure (|
                                                              Ty.apply
                                                                (Ty.path "alloc::vec::Vec")
                                                                []
                                                                [ F; Ty.path "alloc::alloc::Global"
                                                                ],
                                                              M.get_associated_function (|
                                                                Ty.apply
                                                                  (Ty.path "alloc::vec::Vec")
                                                                  []
                                                                  [
                                                                    F;
                                                                    Ty.path "alloc::alloc::Global"
                                                                  ],
                                                                "new",
                                                                [],
                                                                []
                                                              |),
                                                              []
                                                            |) in
                                                          let~ sumcheck_instances :
                                                              Ty.apply
                                                                (Ty.path "alloc::vec::Vec")
                                                                []
                                                                [
                                                                  Ty.path "usize";
                                                                  Ty.path "alloc::alloc::Global"
                                                                ] :=
                                                            M.call_closure (|
                                                              Ty.apply
                                                                (Ty.path "alloc::vec::Vec")
                                                                []
                                                                [
                                                                  Ty.path "usize";
                                                                  Ty.path "alloc::alloc::Global"
                                                                ],
                                                              M.get_associated_function (|
                                                                Ty.apply
                                                                  (Ty.path "alloc::vec::Vec")
                                                                  []
                                                                  [
                                                                    Ty.path "usize";
                                                                    Ty.path "alloc::alloc::Global"
                                                                  ],
                                                                "new",
                                                                [],
                                                                []
                                                              |),
                                                              []
                                                            |) in
                                                          let~ _ : Ty.tuple [] :=
                                                            M.read (|
                                                              M.use
                                                                (M.alloc (|
                                                                  Ty.tuple [],
                                                                  M.match_operator (|
                                                                    Ty.tuple [],
                                                                    M.alloc (|
                                                                      Ty.apply
                                                                        (Ty.path
                                                                          "core::iter::adapters::enumerate::Enumerate")
                                                                        []
                                                                        [
                                                                          Ty.apply
                                                                            (Ty.path
                                                                              "core::slice::iter::Iter")
                                                                            []
                                                                            [
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "core::option::Option")
                                                                                []
                                                                                [
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "alloc::vec::Vec")
                                                                                    []
                                                                                    [
                                                                                      F;
                                                                                      Ty.path
                                                                                        "alloc::alloc::Global"
                                                                                    ]
                                                                                ]
                                                                            ]
                                                                        ],
                                                                      M.call_closure (|
                                                                        Ty.apply
                                                                          (Ty.path
                                                                            "core::iter::adapters::enumerate::Enumerate")
                                                                          []
                                                                          [
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "core::slice::iter::Iter")
                                                                              []
                                                                              [
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "core::option::Option")
                                                                                  []
                                                                                  [
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "alloc::vec::Vec")
                                                                                      []
                                                                                      [
                                                                                        F;
                                                                                        Ty.path
                                                                                          "alloc::alloc::Global"
                                                                                      ]
                                                                                  ]
                                                                              ]
                                                                          ],
                                                                        M.get_trait_method (|
                                                                          "core::iter::traits::collect::IntoIterator",
                                                                          Ty.apply
                                                                            (Ty.path
                                                                              "core::iter::adapters::enumerate::Enumerate")
                                                                            []
                                                                            [
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "core::slice::iter::Iter")
                                                                                []
                                                                                [
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "core::option::Option")
                                                                                    []
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "alloc::vec::Vec")
                                                                                        []
                                                                                        [
                                                                                          F;
                                                                                          Ty.path
                                                                                            "alloc::alloc::Global"
                                                                                        ]
                                                                                    ]
                                                                                ]
                                                                            ],
                                                                          [],
                                                                          [],
                                                                          "into_iter",
                                                                          [],
                                                                          []
                                                                        |),
                                                                        [
                                                                          M.call_closure (|
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "core::iter::adapters::enumerate::Enumerate")
                                                                              []
                                                                              [
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "core::slice::iter::Iter")
                                                                                  []
                                                                                  [
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "core::option::Option")
                                                                                      []
                                                                                      [
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "alloc::vec::Vec")
                                                                                          []
                                                                                          [
                                                                                            F;
                                                                                            Ty.path
                                                                                              "alloc::alloc::Global"
                                                                                          ]
                                                                                      ]
                                                                                  ]
                                                                              ],
                                                                            M.get_trait_method (|
                                                                              "core::iter::traits::iterator::Iterator",
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "core::slice::iter::Iter")
                                                                                []
                                                                                [
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "core::option::Option")
                                                                                    []
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "alloc::vec::Vec")
                                                                                        []
                                                                                        [
                                                                                          F;
                                                                                          Ty.path
                                                                                            "alloc::alloc::Global"
                                                                                        ]
                                                                                    ]
                                                                                ],
                                                                              [],
                                                                              [],
                                                                              "enumerate",
                                                                              [],
                                                                              []
                                                                            |),
                                                                            [
                                                                              M.call_closure (|
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "core::slice::iter::Iter")
                                                                                  []
                                                                                  [
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "core::option::Option")
                                                                                      []
                                                                                      [
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "alloc::vec::Vec")
                                                                                          []
                                                                                          [
                                                                                            F;
                                                                                            Ty.path
                                                                                              "alloc::alloc::Global"
                                                                                          ]
                                                                                      ]
                                                                                  ],
                                                                                M.get_associated_function (|
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "slice")
                                                                                    []
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "core::option::Option")
                                                                                        []
                                                                                        [
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "alloc::vec::Vec")
                                                                                            []
                                                                                            [
                                                                                              F;
                                                                                              Ty.path
                                                                                                "alloc::alloc::Global"
                                                                                            ]
                                                                                        ]
                                                                                    ],
                                                                                  "iter",
                                                                                  [],
                                                                                  []
                                                                                |),
                                                                                [
                                                                                  M.borrow (|
                                                                                    Pointer.Kind.Ref,
                                                                                    M.deref (|
                                                                                      M.call_closure (|
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "&")
                                                                                          []
                                                                                          [
                                                                                            Ty.apply
                                                                                              (Ty.path
                                                                                                "slice")
                                                                                              []
                                                                                              [
                                                                                                Ty.apply
                                                                                                  (Ty.path
                                                                                                    "core::option::Option")
                                                                                                  []
                                                                                                  [
                                                                                                    Ty.apply
                                                                                                      (Ty.path
                                                                                                        "alloc::vec::Vec")
                                                                                                      []
                                                                                                      [
                                                                                                        F;
                                                                                                        Ty.path
                                                                                                          "alloc::alloc::Global"
                                                                                                      ]
                                                                                                  ]
                                                                                              ]
                                                                                          ],
                                                                                        M.get_trait_method (|
                                                                                          "core::ops::deref::Deref",
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "alloc::vec::Vec")
                                                                                            []
                                                                                            [
                                                                                              Ty.apply
                                                                                                (Ty.path
                                                                                                  "core::option::Option")
                                                                                                []
                                                                                                [
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "alloc::vec::Vec")
                                                                                                    []
                                                                                                    [
                                                                                                      F;
                                                                                                      Ty.path
                                                                                                        "alloc::alloc::Global"
                                                                                                    ]
                                                                                                ];
                                                                                              Ty.path
                                                                                                "alloc::alloc::Global"
                                                                                            ],
                                                                                          [],
                                                                                          [],
                                                                                          "deref",
                                                                                          [],
                                                                                          []
                                                                                        |),
                                                                                        [
                                                                                          M.borrow (|
                                                                                            Pointer.Kind.Ref,
                                                                                            claims_to_verify_by_instance
                                                                                          |)
                                                                                        ]
                                                                                      |)
                                                                                    |)
                                                                                  |)
                                                                                ]
                                                                              |)
                                                                            ]
                                                                          |)
                                                                        ]
                                                                      |)
                                                                    |),
                                                                    [
                                                                      fun γ =>
                                                                        ltac:(M.monadic
                                                                          (let iter :=
                                                                            M.copy (|
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "core::iter::adapters::enumerate::Enumerate")
                                                                                []
                                                                                [
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "core::slice::iter::Iter")
                                                                                    []
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "core::option::Option")
                                                                                        []
                                                                                        [
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "alloc::vec::Vec")
                                                                                            []
                                                                                            [
                                                                                              F;
                                                                                              Ty.path
                                                                                                "alloc::alloc::Global"
                                                                                            ]
                                                                                        ]
                                                                                    ]
                                                                                ],
                                                                              γ
                                                                            |) in
                                                                          M.read (|
                                                                            M.loop (|
                                                                              Ty.tuple [],
                                                                              ltac:(M.monadic
                                                                                (let~ _ :
                                                                                    Ty.tuple [] :=
                                                                                  M.match_operator (|
                                                                                    Ty.tuple [],
                                                                                    M.alloc (|
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "core::option::Option")
                                                                                        []
                                                                                        [
                                                                                          Ty.tuple
                                                                                            [
                                                                                              Ty.path
                                                                                                "usize";
                                                                                              Ty.apply
                                                                                                (Ty.path
                                                                                                  "&")
                                                                                                []
                                                                                                [
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "core::option::Option")
                                                                                                    []
                                                                                                    [
                                                                                                      Ty.apply
                                                                                                        (Ty.path
                                                                                                          "alloc::vec::Vec")
                                                                                                        []
                                                                                                        [
                                                                                                          F;
                                                                                                          Ty.path
                                                                                                            "alloc::alloc::Global"
                                                                                                        ]
                                                                                                    ]
                                                                                                ]
                                                                                            ]
                                                                                        ],
                                                                                      M.call_closure (|
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "core::option::Option")
                                                                                          []
                                                                                          [
                                                                                            Ty.tuple
                                                                                              [
                                                                                                Ty.path
                                                                                                  "usize";
                                                                                                Ty.apply
                                                                                                  (Ty.path
                                                                                                    "&")
                                                                                                  []
                                                                                                  [
                                                                                                    Ty.apply
                                                                                                      (Ty.path
                                                                                                        "core::option::Option")
                                                                                                      []
                                                                                                      [
                                                                                                        Ty.apply
                                                                                                          (Ty.path
                                                                                                            "alloc::vec::Vec")
                                                                                                          []
                                                                                                          [
                                                                                                            F;
                                                                                                            Ty.path
                                                                                                              "alloc::alloc::Global"
                                                                                                          ]
                                                                                                      ]
                                                                                                  ]
                                                                                              ]
                                                                                          ],
                                                                                        M.get_trait_method (|
                                                                                          "core::iter::traits::iterator::Iterator",
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "core::iter::adapters::enumerate::Enumerate")
                                                                                            []
                                                                                            [
                                                                                              Ty.apply
                                                                                                (Ty.path
                                                                                                  "core::slice::iter::Iter")
                                                                                                []
                                                                                                [
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "core::option::Option")
                                                                                                    []
                                                                                                    [
                                                                                                      Ty.apply
                                                                                                        (Ty.path
                                                                                                          "alloc::vec::Vec")
                                                                                                        []
                                                                                                        [
                                                                                                          F;
                                                                                                          Ty.path
                                                                                                            "alloc::alloc::Global"
                                                                                                        ]
                                                                                                    ]
                                                                                                ]
                                                                                            ],
                                                                                          [],
                                                                                          [],
                                                                                          "next",
                                                                                          [],
                                                                                          []
                                                                                        |),
                                                                                        [
                                                                                          M.borrow (|
                                                                                            Pointer.Kind.MutRef,
                                                                                            M.deref (|
                                                                                              M.borrow (|
                                                                                                Pointer.Kind.MutRef,
                                                                                                iter
                                                                                              |)
                                                                                            |)
                                                                                          |)
                                                                                        ]
                                                                                      |)
                                                                                    |),
                                                                                    [
                                                                                      fun γ =>
                                                                                        ltac:(M.monadic
                                                                                          (let _ :=
                                                                                            M.is_struct_tuple (|
                                                                                              γ,
                                                                                              "core::option::Option::None"
                                                                                            |) in
                                                                                          M.never_to_any (|
                                                                                            M.read (|
                                                                                              M.break (||)
                                                                                            |)
                                                                                          |)));
                                                                                      fun γ =>
                                                                                        ltac:(M.monadic
                                                                                          (let
                                                                                                γ0_0 :=
                                                                                            M.SubPointer.get_struct_tuple_field (|
                                                                                              γ,
                                                                                              "core::option::Option::Some",
                                                                                              0
                                                                                            |) in
                                                                                          let
                                                                                                γ1_0 :=
                                                                                            M.SubPointer.get_tuple_field (|
                                                                                              γ0_0,
                                                                                              0
                                                                                            |) in
                                                                                          let
                                                                                                γ1_1 :=
                                                                                            M.SubPointer.get_tuple_field (|
                                                                                              γ0_0,
                                                                                              1
                                                                                            |) in
                                                                                          let
                                                                                                instance :=
                                                                                            M.copy (|
                                                                                              Ty.path
                                                                                                "usize",
                                                                                              γ1_0
                                                                                            |) in
                                                                                          let
                                                                                                claims_to_verify :=
                                                                                            M.copy (|
                                                                                              Ty.apply
                                                                                                (Ty.path
                                                                                                  "&")
                                                                                                []
                                                                                                [
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "core::option::Option")
                                                                                                    []
                                                                                                    [
                                                                                                      Ty.apply
                                                                                                        (Ty.path
                                                                                                          "alloc::vec::Vec")
                                                                                                        []
                                                                                                        [
                                                                                                          F;
                                                                                                          Ty.path
                                                                                                            "alloc::alloc::Global"
                                                                                                        ]
                                                                                                    ]
                                                                                                ],
                                                                                              γ1_1
                                                                                            |) in
                                                                                          M.match_operator (|
                                                                                            Ty.tuple
                                                                                              [],
                                                                                            M.alloc (|
                                                                                              Ty.tuple
                                                                                                [],
                                                                                              Value.Tuple
                                                                                                []
                                                                                            |),
                                                                                            [
                                                                                              fun
                                                                                                  γ =>
                                                                                                ltac:(M.monadic
                                                                                                  (let
                                                                                                        γ :=
                                                                                                    claims_to_verify in
                                                                                                  let
                                                                                                        γ :=
                                                                                                    M.deref (|
                                                                                                      M.read (|
                                                                                                        γ
                                                                                                      |)
                                                                                                    |) in
                                                                                                  let
                                                                                                        γ1_0 :=
                                                                                                    M.SubPointer.get_struct_tuple_field (|
                                                                                                      γ,
                                                                                                      "core::option::Option::Some",
                                                                                                      0
                                                                                                    |) in
                                                                                                  let
                                                                                                        claims_to_verify :=
                                                                                                    M.alloc (|
                                                                                                      Ty.apply
                                                                                                        (Ty.path
                                                                                                          "&")
                                                                                                        []
                                                                                                        [
                                                                                                          Ty.apply
                                                                                                            (Ty.path
                                                                                                              "alloc::vec::Vec")
                                                                                                            []
                                                                                                            [
                                                                                                              F;
                                                                                                              Ty.path
                                                                                                                "alloc::alloc::Global"
                                                                                                            ]
                                                                                                        ],
                                                                                                      γ1_0
                                                                                                    |) in
                                                                                                  M.read (|
                                                                                                    let~
                                                                                                          n_unused_variables :
                                                                                                        Ty.path
                                                                                                          "usize" :=
                                                                                                      M.call_closure (|
                                                                                                        Ty.path
                                                                                                          "usize",
                                                                                                        BinOp.Wrap.sub,
                                                                                                        [
                                                                                                          M.read (|
                                                                                                            n_layers
                                                                                                          |);
                                                                                                          M.call_closure (|
                                                                                                            Ty.path
                                                                                                              "usize",
                                                                                                            M.get_trait_method (|
                                                                                                              "core::ops::function::Fn",
                                                                                                              Ty.function
                                                                                                                [
                                                                                                                  Ty.path
                                                                                                                    "usize"
                                                                                                                ]
                                                                                                                (Ty.path
                                                                                                                  "usize"),
                                                                                                              [],
                                                                                                              [
                                                                                                                Ty.tuple
                                                                                                                  [
                                                                                                                    Ty.path
                                                                                                                      "usize"
                                                                                                                  ]
                                                                                                              ],
                                                                                                              "call",
                                                                                                              [],
                                                                                                              []
                                                                                                            |),
                                                                                                            [
                                                                                                              M.borrow (|
                                                                                                                Pointer.Kind.Ref,
                                                                                                                instance_n_layers
                                                                                                              |);
                                                                                                              Value.Tuple
                                                                                                                [
                                                                                                                  M.read (|
                                                                                                                    instance
                                                                                                                  |)
                                                                                                                ]
                                                                                                            ]
                                                                                                          |)
                                                                                                        ]
                                                                                                      |) in
                                                                                                    let~
                                                                                                          doubling_factor :
                                                                                                        F :=
                                                                                                      M.call_closure (|
                                                                                                        F,
                                                                                                        M.get_trait_method (|
                                                                                                          "p3_field::field::FieldAlgebra",
                                                                                                          F,
                                                                                                          [],
                                                                                                          [],
                                                                                                          "from_canonical_u32",
                                                                                                          [],
                                                                                                          []
                                                                                                        |),
                                                                                                        [
                                                                                                          M.call_closure (|
                                                                                                            Ty.path
                                                                                                              "u32",
                                                                                                            BinOp.Wrap.shl,
                                                                                                            [
                                                                                                              Value.Integer
                                                                                                                IntegerKind.U32
                                                                                                                1;
                                                                                                              M.read (|
                                                                                                                n_unused_variables
                                                                                                              |)
                                                                                                            ]
                                                                                                          |)
                                                                                                        ]
                                                                                                      |) in
                                                                                                    let~
                                                                                                          claim :
                                                                                                        F :=
                                                                                                      M.call_closure (|
                                                                                                        F,
                                                                                                        M.get_trait_method (|
                                                                                                          "core::ops::arith::Mul",
                                                                                                          F,
                                                                                                          [],
                                                                                                          [
                                                                                                            F
                                                                                                          ],
                                                                                                          "mul",
                                                                                                          [],
                                                                                                          []
                                                                                                        |),
                                                                                                        [
                                                                                                          M.call_closure (|
                                                                                                            F,
                                                                                                            M.get_function (|
                                                                                                              "openvm_stark_backend::poly::uni::random_linear_combination",
                                                                                                              [],
                                                                                                              [
                                                                                                                F
                                                                                                              ]
                                                                                                            |),
                                                                                                            [
                                                                                                              M.borrow (|
                                                                                                                Pointer.Kind.Ref,
                                                                                                                M.deref (|
                                                                                                                  M.call_closure (|
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "&")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "slice")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            F
                                                                                                                          ]
                                                                                                                      ],
                                                                                                                    M.get_trait_method (|
                                                                                                                      "core::ops::deref::Deref",
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "alloc::vec::Vec")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          F;
                                                                                                                          Ty.path
                                                                                                                            "alloc::alloc::Global"
                                                                                                                        ],
                                                                                                                      [],
                                                                                                                      [],
                                                                                                                      "deref",
                                                                                                                      [],
                                                                                                                      []
                                                                                                                    |),
                                                                                                                    [
                                                                                                                      M.borrow (|
                                                                                                                        Pointer.Kind.Ref,
                                                                                                                        M.deref (|
                                                                                                                          M.read (|
                                                                                                                            claims_to_verify
                                                                                                                          |)
                                                                                                                        |)
                                                                                                                      |)
                                                                                                                    ]
                                                                                                                  |)
                                                                                                                |)
                                                                                                              |);
                                                                                                              M.read (|
                                                                                                                instance_lambda
                                                                                                              |)
                                                                                                            ]
                                                                                                          |);
                                                                                                          M.read (|
                                                                                                            doubling_factor
                                                                                                          |)
                                                                                                        ]
                                                                                                      |) in
                                                                                                    let~
                                                                                                          _ :
                                                                                                        Ty.tuple
                                                                                                          [] :=
                                                                                                      M.call_closure (|
                                                                                                        Ty.tuple
                                                                                                          [],
                                                                                                        M.get_associated_function (|
                                                                                                          Ty.apply
                                                                                                            (Ty.path
                                                                                                              "alloc::vec::Vec")
                                                                                                            []
                                                                                                            [
                                                                                                              F;
                                                                                                              Ty.path
                                                                                                                "alloc::alloc::Global"
                                                                                                            ],
                                                                                                          "push",
                                                                                                          [],
                                                                                                          []
                                                                                                        |),
                                                                                                        [
                                                                                                          M.borrow (|
                                                                                                            Pointer.Kind.MutRef,
                                                                                                            sumcheck_claims
                                                                                                          |);
                                                                                                          M.read (|
                                                                                                            claim
                                                                                                          |)
                                                                                                        ]
                                                                                                      |) in
                                                                                                    let~
                                                                                                          _ :
                                                                                                        Ty.tuple
                                                                                                          [] :=
                                                                                                      M.call_closure (|
                                                                                                        Ty.tuple
                                                                                                          [],
                                                                                                        M.get_associated_function (|
                                                                                                          Ty.apply
                                                                                                            (Ty.path
                                                                                                              "alloc::vec::Vec")
                                                                                                            []
                                                                                                            [
                                                                                                              Ty.path
                                                                                                                "usize";
                                                                                                              Ty.path
                                                                                                                "alloc::alloc::Global"
                                                                                                            ],
                                                                                                          "push",
                                                                                                          [],
                                                                                                          []
                                                                                                        |),
                                                                                                        [
                                                                                                          M.borrow (|
                                                                                                            Pointer.Kind.MutRef,
                                                                                                            sumcheck_instances
                                                                                                          |);
                                                                                                          M.read (|
                                                                                                            instance
                                                                                                          |)
                                                                                                        ]
                                                                                                      |) in
                                                                                                    M.alloc (|
                                                                                                      Ty.tuple
                                                                                                        [],
                                                                                                      Value.Tuple
                                                                                                        []
                                                                                                    |)
                                                                                                  |)));
                                                                                              fun
                                                                                                  γ =>
                                                                                                ltac:(M.monadic
                                                                                                  (Value.Tuple
                                                                                                    []))
                                                                                            ]
                                                                                          |)))
                                                                                    ]
                                                                                  |) in
                                                                                M.alloc (|
                                                                                  Ty.tuple [],
                                                                                  Value.Tuple []
                                                                                |)))
                                                                            |)
                                                                          |)))
                                                                    ]
                                                                  |)
                                                                |))
                                                            |) in
                                                          let~ sumcheck_claim : F :=
                                                            M.call_closure (|
                                                              F,
                                                              M.get_function (|
                                                                "openvm_stark_backend::poly::uni::random_linear_combination",
                                                                [],
                                                                [ F ]
                                                              |),
                                                              [
                                                                M.borrow (|
                                                                  Pointer.Kind.Ref,
                                                                  M.deref (|
                                                                    M.call_closure (|
                                                                      Ty.apply
                                                                        (Ty.path "&")
                                                                        []
                                                                        [
                                                                          Ty.apply
                                                                            (Ty.path "slice")
                                                                            []
                                                                            [ F ]
                                                                        ],
                                                                      M.get_trait_method (|
                                                                        "core::ops::deref::Deref",
                                                                        Ty.apply
                                                                          (Ty.path
                                                                            "alloc::vec::Vec")
                                                                          []
                                                                          [
                                                                            F;
                                                                            Ty.path
                                                                              "alloc::alloc::Global"
                                                                          ],
                                                                        [],
                                                                        [],
                                                                        "deref",
                                                                        [],
                                                                        []
                                                                      |),
                                                                      [
                                                                        M.borrow (|
                                                                          Pointer.Kind.Ref,
                                                                          M.deref (|
                                                                            M.borrow (|
                                                                              Pointer.Kind.Ref,
                                                                              sumcheck_claims
                                                                            |)
                                                                          |)
                                                                        |)
                                                                      ]
                                                                    |)
                                                                  |)
                                                                |);
                                                                M.read (| sumcheck_alpha |)
                                                              ]
                                                            |) in
                                                          M.alloc (|
                                                            Ty.tuple [],
                                                            M.match_operator (|
                                                              Ty.tuple [],
                                                              M.alloc (|
                                                                Ty.tuple
                                                                  [
                                                                    Ty.apply
                                                                      (Ty.path "alloc::vec::Vec")
                                                                      []
                                                                      [
                                                                        F;
                                                                        Ty.path
                                                                          "alloc::alloc::Global"
                                                                      ];
                                                                    F
                                                                  ],
                                                                M.match_operator (|
                                                                  Ty.tuple
                                                                    [
                                                                      Ty.apply
                                                                        (Ty.path "alloc::vec::Vec")
                                                                        []
                                                                        [
                                                                          F;
                                                                          Ty.path
                                                                            "alloc::alloc::Global"
                                                                        ];
                                                                      F
                                                                    ],
                                                                  M.alloc (|
                                                                    Ty.apply
                                                                      (Ty.path
                                                                        "core::ops::control_flow::ControlFlow")
                                                                      []
                                                                      [
                                                                        Ty.apply
                                                                          (Ty.path
                                                                            "core::result::Result")
                                                                          []
                                                                          [
                                                                            Ty.path
                                                                              "core::convert::Infallible";
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "openvm_stark_backend::gkr::types::GkrError")
                                                                              []
                                                                              [ F ]
                                                                          ];
                                                                        Ty.tuple
                                                                          [
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "alloc::vec::Vec")
                                                                              []
                                                                              [
                                                                                F;
                                                                                Ty.path
                                                                                  "alloc::alloc::Global"
                                                                              ];
                                                                            F
                                                                          ]
                                                                      ],
                                                                    M.call_closure (|
                                                                      Ty.apply
                                                                        (Ty.path
                                                                          "core::ops::control_flow::ControlFlow")
                                                                        []
                                                                        [
                                                                          Ty.apply
                                                                            (Ty.path
                                                                              "core::result::Result")
                                                                            []
                                                                            [
                                                                              Ty.path
                                                                                "core::convert::Infallible";
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "openvm_stark_backend::gkr::types::GkrError")
                                                                                []
                                                                                [ F ]
                                                                            ];
                                                                          Ty.tuple
                                                                            [
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "alloc::vec::Vec")
                                                                                []
                                                                                [
                                                                                  F;
                                                                                  Ty.path
                                                                                    "alloc::alloc::Global"
                                                                                ];
                                                                              F
                                                                            ]
                                                                        ],
                                                                      M.get_trait_method (|
                                                                        "core::ops::try_trait::Try",
                                                                        Ty.apply
                                                                          (Ty.path
                                                                            "core::result::Result")
                                                                          []
                                                                          [
                                                                            Ty.tuple
                                                                              [
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "alloc::vec::Vec")
                                                                                  []
                                                                                  [
                                                                                    F;
                                                                                    Ty.path
                                                                                      "alloc::alloc::Global"
                                                                                  ];
                                                                                F
                                                                              ];
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "openvm_stark_backend::gkr::types::GkrError")
                                                                              []
                                                                              [ F ]
                                                                          ],
                                                                        [],
                                                                        [],
                                                                        "branch",
                                                                        [],
                                                                        []
                                                                      |),
                                                                      [
                                                                        M.call_closure (|
                                                                          Ty.apply
                                                                            (Ty.path
                                                                              "core::result::Result")
                                                                            []
                                                                            [
                                                                              Ty.tuple
                                                                                [
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "alloc::vec::Vec")
                                                                                    []
                                                                                    [
                                                                                      F;
                                                                                      Ty.path
                                                                                        "alloc::alloc::Global"
                                                                                    ];
                                                                                  F
                                                                                ];
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "openvm_stark_backend::gkr::types::GkrError")
                                                                                []
                                                                                [ F ]
                                                                            ],
                                                                          M.get_associated_function (|
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "core::result::Result")
                                                                              []
                                                                              [
                                                                                Ty.tuple
                                                                                  [
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "alloc::vec::Vec")
                                                                                      []
                                                                                      [
                                                                                        F;
                                                                                        Ty.path
                                                                                          "alloc::alloc::Global"
                                                                                      ];
                                                                                    F
                                                                                  ];
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "openvm_stark_backend::sumcheck::SumcheckError")
                                                                                  []
                                                                                  [ F ]
                                                                              ],
                                                                            "map_err",
                                                                            [],
                                                                            [
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "openvm_stark_backend::gkr::types::GkrError")
                                                                                []
                                                                                [ F ];
                                                                              Ty.function
                                                                                [
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "openvm_stark_backend::sumcheck::SumcheckError")
                                                                                    []
                                                                                    [ F ]
                                                                                ]
                                                                                (Ty.apply
                                                                                  (Ty.path
                                                                                    "openvm_stark_backend::gkr::types::GkrError")
                                                                                  []
                                                                                  [ F ])
                                                                            ]
                                                                          |),
                                                                          [
                                                                            M.call_closure (|
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "core::result::Result")
                                                                                []
                                                                                [
                                                                                  Ty.tuple
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "alloc::vec::Vec")
                                                                                        []
                                                                                        [
                                                                                          F;
                                                                                          Ty.path
                                                                                            "alloc::alloc::Global"
                                                                                        ];
                                                                                      F
                                                                                    ];
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "openvm_stark_backend::sumcheck::SumcheckError")
                                                                                    []
                                                                                    [ F ]
                                                                                ],
                                                                              M.get_function (|
                                                                                "openvm_stark_backend::sumcheck::partially_verify",
                                                                                [],
                                                                                [
                                                                                  F;
                                                                                  impl_FieldChallenger_F_
                                                                                ]
                                                                              |),
                                                                              [
                                                                                M.read (|
                                                                                  sumcheck_claim
                                                                                |);
                                                                                M.borrow (|
                                                                                  Pointer.Kind.Ref,
                                                                                  M.deref (|
                                                                                    M.read (|
                                                                                      sumcheck_proof
                                                                                    |)
                                                                                  |)
                                                                                |);
                                                                                M.borrow (|
                                                                                  Pointer.Kind.MutRef,
                                                                                  M.deref (|
                                                                                    M.read (|
                                                                                      challenger
                                                                                    |)
                                                                                  |)
                                                                                |)
                                                                              ]
                                                                            |);
                                                                            M.closure
                                                                              (fun γ =>
                                                                                ltac:(M.monadic
                                                                                  match γ with
                                                                                  | [ α0 ] =>
                                                                                    ltac:(M.monadic
                                                                                      (M.match_operator (|
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "openvm_stark_backend::gkr::types::GkrError")
                                                                                          []
                                                                                          [ F ],
                                                                                        M.alloc (|
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "openvm_stark_backend::sumcheck::SumcheckError")
                                                                                            []
                                                                                            [ F ],
                                                                                          α0
                                                                                        |),
                                                                                        [
                                                                                          fun γ =>
                                                                                            ltac:(M.monadic
                                                                                              (let
                                                                                                    source :=
                                                                                                M.copy (|
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "openvm_stark_backend::sumcheck::SumcheckError")
                                                                                                    []
                                                                                                    [
                                                                                                      F
                                                                                                    ],
                                                                                                  γ
                                                                                                |) in
                                                                                              Value.mkStructRecord
                                                                                                "openvm_stark_backend::gkr::types::GkrError::InvalidSumcheck"
                                                                                                []
                                                                                                [ F
                                                                                                ]
                                                                                                [
                                                                                                  ("layer",
                                                                                                    M.read (|
                                                                                                      layer
                                                                                                    |));
                                                                                                  ("source",
                                                                                                    M.read (|
                                                                                                      source
                                                                                                    |))
                                                                                                ]))
                                                                                        ]
                                                                                      |)))
                                                                                  | _ =>
                                                                                    M.impossible
                                                                                      "wrong number of arguments"
                                                                                  end))
                                                                          ]
                                                                        |)
                                                                      ]
                                                                    |)
                                                                  |),
                                                                  [
                                                                    fun γ =>
                                                                      ltac:(M.monadic
                                                                        (let γ0_0 :=
                                                                          M.SubPointer.get_struct_tuple_field (|
                                                                            γ,
                                                                            "core::ops::control_flow::ControlFlow::Break",
                                                                            0
                                                                          |) in
                                                                        let residual :=
                                                                          M.copy (|
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "core::result::Result")
                                                                              []
                                                                              [
                                                                                Ty.path
                                                                                  "core::convert::Infallible";
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "openvm_stark_backend::gkr::types::GkrError")
                                                                                  []
                                                                                  [ F ]
                                                                              ],
                                                                            γ0_0
                                                                          |) in
                                                                        M.never_to_any (|
                                                                          M.read (|
                                                                            M.return_ (|
                                                                              M.call_closure (|
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "core::result::Result")
                                                                                  []
                                                                                  [
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "openvm_stark_backend::gkr::types::GkrArtifact")
                                                                                      []
                                                                                      [ F ];
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "openvm_stark_backend::gkr::types::GkrError")
                                                                                      []
                                                                                      [ F ]
                                                                                  ],
                                                                                M.get_trait_method (|
                                                                                  "core::ops::try_trait::FromResidual",
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "core::result::Result")
                                                                                    []
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "openvm_stark_backend::gkr::types::GkrArtifact")
                                                                                        []
                                                                                        [ F ];
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "openvm_stark_backend::gkr::types::GkrError")
                                                                                        []
                                                                                        [ F ]
                                                                                    ],
                                                                                  [],
                                                                                  [
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "core::result::Result")
                                                                                      []
                                                                                      [
                                                                                        Ty.path
                                                                                          "core::convert::Infallible";
                                                                                        Ty.apply
                                                                                          (Ty.path
                                                                                            "openvm_stark_backend::gkr::types::GkrError")
                                                                                          []
                                                                                          [ F ]
                                                                                      ]
                                                                                  ],
                                                                                  "from_residual",
                                                                                  [],
                                                                                  []
                                                                                |),
                                                                                [
                                                                                  M.read (|
                                                                                    residual
                                                                                  |)
                                                                                ]
                                                                              |)
                                                                            |)
                                                                          |)
                                                                        |)));
                                                                    fun γ =>
                                                                      ltac:(M.monadic
                                                                        (let γ0_0 :=
                                                                          M.SubPointer.get_struct_tuple_field (|
                                                                            γ,
                                                                            "core::ops::control_flow::ControlFlow::Continue",
                                                                            0
                                                                          |) in
                                                                        let val :=
                                                                          M.copy (|
                                                                            Ty.tuple
                                                                              [
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "alloc::vec::Vec")
                                                                                  []
                                                                                  [
                                                                                    F;
                                                                                    Ty.path
                                                                                      "alloc::alloc::Global"
                                                                                  ];
                                                                                F
                                                                              ],
                                                                            γ0_0
                                                                          |) in
                                                                        M.read (| val |)))
                                                                  ]
                                                                |)
                                                              |),
                                                              [
                                                                fun γ =>
                                                                  ltac:(M.monadic
                                                                    (let γ0_0 :=
                                                                      M.SubPointer.get_tuple_field (|
                                                                        γ,
                                                                        0
                                                                      |) in
                                                                    let γ0_1 :=
                                                                      M.SubPointer.get_tuple_field (|
                                                                        γ,
                                                                        1
                                                                      |) in
                                                                    let sumcheck_ood_point :=
                                                                      M.copy (|
                                                                        Ty.apply
                                                                          (Ty.path
                                                                            "alloc::vec::Vec")
                                                                          []
                                                                          [
                                                                            F;
                                                                            Ty.path
                                                                              "alloc::alloc::Global"
                                                                          ],
                                                                        γ0_0
                                                                      |) in
                                                                    let sumcheck_eval :=
                                                                      M.copy (| F, γ0_1 |) in
                                                                    M.read (|
                                                                      let~ layer_evals :
                                                                          Ty.apply
                                                                            (Ty.path
                                                                              "alloc::vec::Vec")
                                                                            []
                                                                            [
                                                                              F;
                                                                              Ty.path
                                                                                "alloc::alloc::Global"
                                                                            ] :=
                                                                        M.call_closure (|
                                                                          Ty.apply
                                                                            (Ty.path
                                                                              "alloc::vec::Vec")
                                                                            []
                                                                            [
                                                                              F;
                                                                              Ty.path
                                                                                "alloc::alloc::Global"
                                                                            ],
                                                                          M.get_associated_function (|
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "alloc::vec::Vec")
                                                                              []
                                                                              [
                                                                                F;
                                                                                Ty.path
                                                                                  "alloc::alloc::Global"
                                                                              ],
                                                                            "new",
                                                                            [],
                                                                            []
                                                                          |),
                                                                          []
                                                                        |) in
                                                                      let~ _ : Ty.tuple [] :=
                                                                        M.read (|
                                                                          M.use
                                                                            (M.alloc (|
                                                                              Ty.tuple [],
                                                                              M.match_operator (|
                                                                                Ty.tuple [],
                                                                                M.alloc (|
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "core::slice::iter::Iter")
                                                                                    []
                                                                                    [
                                                                                      Ty.path
                                                                                        "usize"
                                                                                    ],
                                                                                  M.call_closure (|
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "core::slice::iter::Iter")
                                                                                      []
                                                                                      [
                                                                                        Ty.path
                                                                                          "usize"
                                                                                      ],
                                                                                    M.get_trait_method (|
                                                                                      "core::iter::traits::collect::IntoIterator",
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "&")
                                                                                        []
                                                                                        [
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "alloc::vec::Vec")
                                                                                            []
                                                                                            [
                                                                                              Ty.path
                                                                                                "usize";
                                                                                              Ty.path
                                                                                                "alloc::alloc::Global"
                                                                                            ]
                                                                                        ],
                                                                                      [],
                                                                                      [],
                                                                                      "into_iter",
                                                                                      [],
                                                                                      []
                                                                                    |),
                                                                                    [
                                                                                      M.borrow (|
                                                                                        Pointer.Kind.Ref,
                                                                                        sumcheck_instances
                                                                                      |)
                                                                                    ]
                                                                                  |)
                                                                                |),
                                                                                [
                                                                                  fun γ =>
                                                                                    ltac:(M.monadic
                                                                                      (let iter :=
                                                                                        M.copy (|
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "core::slice::iter::Iter")
                                                                                            []
                                                                                            [
                                                                                              Ty.path
                                                                                                "usize"
                                                                                            ],
                                                                                          γ
                                                                                        |) in
                                                                                      M.read (|
                                                                                        M.loop (|
                                                                                          Ty.tuple
                                                                                            [],
                                                                                          ltac:(M.monadic
                                                                                            (let~
                                                                                                  _ :
                                                                                                Ty.tuple
                                                                                                  [] :=
                                                                                              M.match_operator (|
                                                                                                Ty.tuple
                                                                                                  [],
                                                                                                M.alloc (|
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "core::option::Option")
                                                                                                    []
                                                                                                    [
                                                                                                      Ty.apply
                                                                                                        (Ty.path
                                                                                                          "&")
                                                                                                        []
                                                                                                        [
                                                                                                          Ty.path
                                                                                                            "usize"
                                                                                                        ]
                                                                                                    ],
                                                                                                  M.call_closure (|
                                                                                                    Ty.apply
                                                                                                      (Ty.path
                                                                                                        "core::option::Option")
                                                                                                      []
                                                                                                      [
                                                                                                        Ty.apply
                                                                                                          (Ty.path
                                                                                                            "&")
                                                                                                          []
                                                                                                          [
                                                                                                            Ty.path
                                                                                                              "usize"
                                                                                                          ]
                                                                                                      ],
                                                                                                    M.get_trait_method (|
                                                                                                      "core::iter::traits::iterator::Iterator",
                                                                                                      Ty.apply
                                                                                                        (Ty.path
                                                                                                          "core::slice::iter::Iter")
                                                                                                        []
                                                                                                        [
                                                                                                          Ty.path
                                                                                                            "usize"
                                                                                                        ],
                                                                                                      [],
                                                                                                      [],
                                                                                                      "next",
                                                                                                      [],
                                                                                                      []
                                                                                                    |),
                                                                                                    [
                                                                                                      M.borrow (|
                                                                                                        Pointer.Kind.MutRef,
                                                                                                        M.deref (|
                                                                                                          M.borrow (|
                                                                                                            Pointer.Kind.MutRef,
                                                                                                            iter
                                                                                                          |)
                                                                                                        |)
                                                                                                      |)
                                                                                                    ]
                                                                                                  |)
                                                                                                |),
                                                                                                [
                                                                                                  fun
                                                                                                      γ =>
                                                                                                    ltac:(M.monadic
                                                                                                      (let
                                                                                                            _ :=
                                                                                                        M.is_struct_tuple (|
                                                                                                          γ,
                                                                                                          "core::option::Option::None"
                                                                                                        |) in
                                                                                                      M.never_to_any (|
                                                                                                        M.read (|
                                                                                                          M.break (||)
                                                                                                        |)
                                                                                                      |)));
                                                                                                  fun
                                                                                                      γ =>
                                                                                                    ltac:(M.monadic
                                                                                                      (let
                                                                                                            γ0_0 :=
                                                                                                        M.SubPointer.get_struct_tuple_field (|
                                                                                                          γ,
                                                                                                          "core::option::Option::Some",
                                                                                                          0
                                                                                                        |) in
                                                                                                      let
                                                                                                            γ0_0 :=
                                                                                                        M.deref (|
                                                                                                          M.read (|
                                                                                                            γ0_0
                                                                                                          |)
                                                                                                        |) in
                                                                                                      let
                                                                                                            instance :=
                                                                                                        M.copy (|
                                                                                                          Ty.path
                                                                                                            "usize",
                                                                                                          γ0_0
                                                                                                        |) in
                                                                                                      M.read (|
                                                                                                        let~
                                                                                                              n_unused :
                                                                                                            Ty.path
                                                                                                              "usize" :=
                                                                                                          M.call_closure (|
                                                                                                            Ty.path
                                                                                                              "usize",
                                                                                                            BinOp.Wrap.sub,
                                                                                                            [
                                                                                                              M.read (|
                                                                                                                n_layers
                                                                                                              |);
                                                                                                              M.call_closure (|
                                                                                                                Ty.path
                                                                                                                  "usize",
                                                                                                                M.get_trait_method (|
                                                                                                                  "core::ops::function::Fn",
                                                                                                                  Ty.function
                                                                                                                    [
                                                                                                                      Ty.path
                                                                                                                        "usize"
                                                                                                                    ]
                                                                                                                    (Ty.path
                                                                                                                      "usize"),
                                                                                                                  [],
                                                                                                                  [
                                                                                                                    Ty.tuple
                                                                                                                      [
                                                                                                                        Ty.path
                                                                                                                          "usize"
                                                                                                                      ]
                                                                                                                  ],
                                                                                                                  "call",
                                                                                                                  [],
                                                                                                                  []
                                                                                                                |),
                                                                                                                [
                                                                                                                  M.borrow (|
                                                                                                                    Pointer.Kind.Ref,
                                                                                                                    instance_n_layers
                                                                                                                  |);
                                                                                                                  Value.Tuple
                                                                                                                    [
                                                                                                                      M.read (|
                                                                                                                        instance
                                                                                                                      |)
                                                                                                                    ]
                                                                                                                ]
                                                                                                              |)
                                                                                                            ]
                                                                                                          |) in
                                                                                                        let~
                                                                                                              mask :
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "&")
                                                                                                              []
                                                                                                              [
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    F
                                                                                                                  ]
                                                                                                              ] :=
                                                                                                          M.borrow (|
                                                                                                            Pointer.Kind.Ref,
                                                                                                            M.deref (|
                                                                                                              M.call_closure (|
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "&")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        F
                                                                                                                      ]
                                                                                                                  ],
                                                                                                                M.get_trait_method (|
                                                                                                                  "core::ops::index::Index",
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "alloc::vec::Vec")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          F
                                                                                                                        ];
                                                                                                                      Ty.path
                                                                                                                        "alloc::alloc::Global"
                                                                                                                    ],
                                                                                                                  [],
                                                                                                                  [
                                                                                                                    Ty.path
                                                                                                                      "usize"
                                                                                                                  ],
                                                                                                                  "index",
                                                                                                                  [],
                                                                                                                  []
                                                                                                                |),
                                                                                                                [
                                                                                                                  M.borrow (|
                                                                                                                    Pointer.Kind.Ref,
                                                                                                                    M.deref (|
                                                                                                                      M.call_closure (|
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "&")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "alloc::vec::Vec")
                                                                                                                              []
                                                                                                                              [
                                                                                                                                Ty.apply
                                                                                                                                  (Ty.path
                                                                                                                                    "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                                  []
                                                                                                                                  [
                                                                                                                                    F
                                                                                                                                  ];
                                                                                                                                Ty.path
                                                                                                                                  "alloc::alloc::Global"
                                                                                                                              ]
                                                                                                                          ],
                                                                                                                        M.get_trait_method (|
                                                                                                                          "core::ops::index::Index",
                                                                                                                          Ty.apply
                                                                                                                            (Ty.path
                                                                                                                              "alloc::vec::Vec")
                                                                                                                            []
                                                                                                                            [
                                                                                                                              Ty.apply
                                                                                                                                (Ty.path
                                                                                                                                  "alloc::vec::Vec")
                                                                                                                                []
                                                                                                                                [
                                                                                                                                  Ty.apply
                                                                                                                                    (Ty.path
                                                                                                                                      "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                                    []
                                                                                                                                    [
                                                                                                                                      F
                                                                                                                                    ];
                                                                                                                                  Ty.path
                                                                                                                                    "alloc::alloc::Global"
                                                                                                                                ];
                                                                                                                              Ty.path
                                                                                                                                "alloc::alloc::Global"
                                                                                                                            ],
                                                                                                                          [],
                                                                                                                          [
                                                                                                                            Ty.path
                                                                                                                              "usize"
                                                                                                                          ],
                                                                                                                          "index",
                                                                                                                          [],
                                                                                                                          []
                                                                                                                        |),
                                                                                                                        [
                                                                                                                          M.borrow (|
                                                                                                                            Pointer.Kind.Ref,
                                                                                                                            M.deref (|
                                                                                                                              M.read (|
                                                                                                                                layer_masks_by_instance
                                                                                                                              |)
                                                                                                                            |)
                                                                                                                          |);
                                                                                                                          M.read (|
                                                                                                                            instance
                                                                                                                          |)
                                                                                                                        ]
                                                                                                                      |)
                                                                                                                    |)
                                                                                                                  |);
                                                                                                                  M.call_closure (|
                                                                                                                    Ty.path
                                                                                                                      "usize",
                                                                                                                    BinOp.Wrap.sub,
                                                                                                                    [
                                                                                                                      M.read (|
                                                                                                                        layer
                                                                                                                      |);
                                                                                                                      M.read (|
                                                                                                                        n_unused
                                                                                                                      |)
                                                                                                                    ]
                                                                                                                  |)
                                                                                                                ]
                                                                                                              |)
                                                                                                            |)
                                                                                                          |) in
                                                                                                        let~
                                                                                                              gate :
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "&")
                                                                                                              []
                                                                                                              [
                                                                                                                Ty.path
                                                                                                                  "openvm_stark_backend::gkr::gate::Gate"
                                                                                                              ] :=
                                                                                                          M.borrow (|
                                                                                                            Pointer.Kind.Ref,
                                                                                                            M.deref (|
                                                                                                              M.call_closure (|
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "&")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    Ty.path
                                                                                                                      "openvm_stark_backend::gkr::gate::Gate"
                                                                                                                  ],
                                                                                                                M.get_trait_method (|
                                                                                                                  "core::ops::index::Index",
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "alloc::vec::Vec")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      Ty.path
                                                                                                                        "openvm_stark_backend::gkr::gate::Gate";
                                                                                                                      Ty.path
                                                                                                                        "alloc::alloc::Global"
                                                                                                                    ],
                                                                                                                  [],
                                                                                                                  [
                                                                                                                    Ty.path
                                                                                                                      "usize"
                                                                                                                  ],
                                                                                                                  "index",
                                                                                                                  [],
                                                                                                                  []
                                                                                                                |),
                                                                                                                [
                                                                                                                  M.borrow (|
                                                                                                                    Pointer.Kind.Ref,
                                                                                                                    gate_by_instance
                                                                                                                  |);
                                                                                                                  M.read (|
                                                                                                                    instance
                                                                                                                  |)
                                                                                                                ]
                                                                                                              |)
                                                                                                            |)
                                                                                                          |) in
                                                                                                        let~
                                                                                                              gate_output :
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "alloc::vec::Vec")
                                                                                                              []
                                                                                                              [
                                                                                                                F;
                                                                                                                Ty.path
                                                                                                                  "alloc::alloc::Global"
                                                                                                              ] :=
                                                                                                          M.match_operator (|
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "alloc::vec::Vec")
                                                                                                              []
                                                                                                              [
                                                                                                                F;
                                                                                                                Ty.path
                                                                                                                  "alloc::alloc::Global"
                                                                                                              ],
                                                                                                            M.alloc (|
                                                                                                              Ty.apply
                                                                                                                (Ty.path
                                                                                                                  "core::ops::control_flow::ControlFlow")
                                                                                                                []
                                                                                                                [
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "core::result::Result")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      Ty.path
                                                                                                                        "core::convert::Infallible";
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          F
                                                                                                                        ]
                                                                                                                    ];
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "alloc::vec::Vec")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      F;
                                                                                                                      Ty.path
                                                                                                                        "alloc::alloc::Global"
                                                                                                                    ]
                                                                                                                ],
                                                                                                              M.call_closure (|
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "core::ops::control_flow::ControlFlow")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "core::result::Result")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        Ty.path
                                                                                                                          "core::convert::Infallible";
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            F
                                                                                                                          ]
                                                                                                                      ];
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "alloc::vec::Vec")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        F;
                                                                                                                        Ty.path
                                                                                                                          "alloc::alloc::Global"
                                                                                                                      ]
                                                                                                                  ],
                                                                                                                M.get_trait_method (|
                                                                                                                  "core::ops::try_trait::Try",
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "core::result::Result")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "alloc::vec::Vec")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          F;
                                                                                                                          Ty.path
                                                                                                                            "alloc::alloc::Global"
                                                                                                                        ];
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          F
                                                                                                                        ]
                                                                                                                    ],
                                                                                                                  [],
                                                                                                                  [],
                                                                                                                  "branch",
                                                                                                                  [],
                                                                                                                  []
                                                                                                                |),
                                                                                                                [
                                                                                                                  M.call_closure (|
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "core::result::Result")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "alloc::vec::Vec")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            F;
                                                                                                                            Ty.path
                                                                                                                              "alloc::alloc::Global"
                                                                                                                          ];
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            F
                                                                                                                          ]
                                                                                                                      ],
                                                                                                                    M.get_associated_function (|
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "core::result::Result")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          Ty.apply
                                                                                                                            (Ty.path
                                                                                                                              "alloc::vec::Vec")
                                                                                                                            []
                                                                                                                            [
                                                                                                                              F;
                                                                                                                              Ty.path
                                                                                                                                "alloc::alloc::Global"
                                                                                                                            ];
                                                                                                                          Ty.path
                                                                                                                            "openvm_stark_backend::gkr::gate::InvalidNumMaskColumnsError"
                                                                                                                        ],
                                                                                                                      "map_err",
                                                                                                                      [],
                                                                                                                      [
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            F
                                                                                                                          ];
                                                                                                                        Ty.function
                                                                                                                          [
                                                                                                                            Ty.path
                                                                                                                              "openvm_stark_backend::gkr::gate::InvalidNumMaskColumnsError"
                                                                                                                          ]
                                                                                                                          (Ty.apply
                                                                                                                            (Ty.path
                                                                                                                              "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                            []
                                                                                                                            [
                                                                                                                              F
                                                                                                                            ])
                                                                                                                      ]
                                                                                                                    |),
                                                                                                                    [
                                                                                                                      M.call_closure (|
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "core::result::Result")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "alloc::vec::Vec")
                                                                                                                              []
                                                                                                                              [
                                                                                                                                F;
                                                                                                                                Ty.path
                                                                                                                                  "alloc::alloc::Global"
                                                                                                                              ];
                                                                                                                            Ty.path
                                                                                                                              "openvm_stark_backend::gkr::gate::InvalidNumMaskColumnsError"
                                                                                                                          ],
                                                                                                                        M.get_associated_function (|
                                                                                                                          Ty.path
                                                                                                                            "openvm_stark_backend::gkr::gate::Gate",
                                                                                                                          "eval",
                                                                                                                          [],
                                                                                                                          [
                                                                                                                            F
                                                                                                                          ]
                                                                                                                        |),
                                                                                                                        [
                                                                                                                          M.borrow (|
                                                                                                                            Pointer.Kind.Ref,
                                                                                                                            M.deref (|
                                                                                                                              M.read (|
                                                                                                                                gate
                                                                                                                              |)
                                                                                                                            |)
                                                                                                                          |);
                                                                                                                          M.borrow (|
                                                                                                                            Pointer.Kind.Ref,
                                                                                                                            M.deref (|
                                                                                                                              M.read (|
                                                                                                                                mask
                                                                                                                              |)
                                                                                                                            |)
                                                                                                                          |)
                                                                                                                        ]
                                                                                                                      |);
                                                                                                                      M.closure
                                                                                                                        (fun
                                                                                                                            γ =>
                                                                                                                          ltac:(M.monadic
                                                                                                                            match
                                                                                                                              γ
                                                                                                                            with
                                                                                                                            | [
                                                                                                                                  α0
                                                                                                                                ] =>
                                                                                                                              ltac:(M.monadic
                                                                                                                                (M.match_operator (|
                                                                                                                                  Ty.apply
                                                                                                                                    (Ty.path
                                                                                                                                      "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                                    []
                                                                                                                                    [
                                                                                                                                      F
                                                                                                                                    ],
                                                                                                                                  M.alloc (|
                                                                                                                                    Ty.path
                                                                                                                                      "openvm_stark_backend::gkr::gate::InvalidNumMaskColumnsError",
                                                                                                                                    α0
                                                                                                                                  |),
                                                                                                                                  [
                                                                                                                                    fun
                                                                                                                                        γ =>
                                                                                                                                      ltac:(M.monadic
                                                                                                                                        (M.read (|
                                                                                                                                          let~
                                                                                                                                                instance_layer :
                                                                                                                                              Ty.path
                                                                                                                                                "usize" :=
                                                                                                                                            M.call_closure (|
                                                                                                                                              Ty.path
                                                                                                                                                "usize",
                                                                                                                                              BinOp.Wrap.sub,
                                                                                                                                              [
                                                                                                                                                M.call_closure (|
                                                                                                                                                  Ty.path
                                                                                                                                                    "usize",
                                                                                                                                                  M.get_trait_method (|
                                                                                                                                                    "core::ops::function::Fn",
                                                                                                                                                    Ty.function
                                                                                                                                                      [
                                                                                                                                                        Ty.path
                                                                                                                                                          "usize"
                                                                                                                                                      ]
                                                                                                                                                      (Ty.path
                                                                                                                                                        "usize"),
                                                                                                                                                    [],
                                                                                                                                                    [
                                                                                                                                                      Ty.tuple
                                                                                                                                                        [
                                                                                                                                                          Ty.path
                                                                                                                                                            "usize"
                                                                                                                                                        ]
                                                                                                                                                    ],
                                                                                                                                                    "call",
                                                                                                                                                    [],
                                                                                                                                                    []
                                                                                                                                                  |),
                                                                                                                                                  [
                                                                                                                                                    M.borrow (|
                                                                                                                                                      Pointer.Kind.Ref,
                                                                                                                                                      instance_n_layers
                                                                                                                                                    |);
                                                                                                                                                    Value.Tuple
                                                                                                                                                      [
                                                                                                                                                        M.read (|
                                                                                                                                                          layer
                                                                                                                                                        |)
                                                                                                                                                      ]
                                                                                                                                                  ]
                                                                                                                                                |);
                                                                                                                                                M.read (|
                                                                                                                                                  n_remaining_layers
                                                                                                                                                |)
                                                                                                                                              ]
                                                                                                                                            |) in
                                                                                                                                          M.alloc (|
                                                                                                                                            Ty.apply
                                                                                                                                              (Ty.path
                                                                                                                                                "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                                              []
                                                                                                                                              [
                                                                                                                                                F
                                                                                                                                              ],
                                                                                                                                            Value.mkStructRecord
                                                                                                                                              "openvm_stark_backend::gkr::types::GkrError::InvalidMask"
                                                                                                                                              []
                                                                                                                                              [
                                                                                                                                                F
                                                                                                                                              ]
                                                                                                                                              [
                                                                                                                                                ("instance",
                                                                                                                                                  M.read (|
                                                                                                                                                    instance
                                                                                                                                                  |));
                                                                                                                                                ("instance_layer",
                                                                                                                                                  M.read (|
                                                                                                                                                    instance_layer
                                                                                                                                                  |))
                                                                                                                                              ]
                                                                                                                                          |)
                                                                                                                                        |)))
                                                                                                                                  ]
                                                                                                                                |)))
                                                                                                                            | _ =>
                                                                                                                              M.impossible
                                                                                                                                "wrong number of arguments"
                                                                                                                            end))
                                                                                                                    ]
                                                                                                                  |)
                                                                                                                ]
                                                                                                              |)
                                                                                                            |),
                                                                                                            [
                                                                                                              fun
                                                                                                                  γ =>
                                                                                                                ltac:(M.monadic
                                                                                                                  (let
                                                                                                                        γ0_0 :=
                                                                                                                    M.SubPointer.get_struct_tuple_field (|
                                                                                                                      γ,
                                                                                                                      "core::ops::control_flow::ControlFlow::Break",
                                                                                                                      0
                                                                                                                    |) in
                                                                                                                  let
                                                                                                                        residual :=
                                                                                                                    M.copy (|
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "core::result::Result")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          Ty.path
                                                                                                                            "core::convert::Infallible";
                                                                                                                          Ty.apply
                                                                                                                            (Ty.path
                                                                                                                              "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                            []
                                                                                                                            [
                                                                                                                              F
                                                                                                                            ]
                                                                                                                        ],
                                                                                                                      γ0_0
                                                                                                                    |) in
                                                                                                                  M.never_to_any (|
                                                                                                                    M.read (|
                                                                                                                      M.return_ (|
                                                                                                                        M.call_closure (|
                                                                                                                          Ty.apply
                                                                                                                            (Ty.path
                                                                                                                              "core::result::Result")
                                                                                                                            []
                                                                                                                            [
                                                                                                                              Ty.apply
                                                                                                                                (Ty.path
                                                                                                                                  "openvm_stark_backend::gkr::types::GkrArtifact")
                                                                                                                                []
                                                                                                                                [
                                                                                                                                  F
                                                                                                                                ];
                                                                                                                              Ty.apply
                                                                                                                                (Ty.path
                                                                                                                                  "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                                []
                                                                                                                                [
                                                                                                                                  F
                                                                                                                                ]
                                                                                                                            ],
                                                                                                                          M.get_trait_method (|
                                                                                                                            "core::ops::try_trait::FromResidual",
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "core::result::Result")
                                                                                                                              []
                                                                                                                              [
                                                                                                                                Ty.apply
                                                                                                                                  (Ty.path
                                                                                                                                    "openvm_stark_backend::gkr::types::GkrArtifact")
                                                                                                                                  []
                                                                                                                                  [
                                                                                                                                    F
                                                                                                                                  ];
                                                                                                                                Ty.apply
                                                                                                                                  (Ty.path
                                                                                                                                    "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                                  []
                                                                                                                                  [
                                                                                                                                    F
                                                                                                                                  ]
                                                                                                                              ],
                                                                                                                            [],
                                                                                                                            [
                                                                                                                              Ty.apply
                                                                                                                                (Ty.path
                                                                                                                                  "core::result::Result")
                                                                                                                                []
                                                                                                                                [
                                                                                                                                  Ty.path
                                                                                                                                    "core::convert::Infallible";
                                                                                                                                  Ty.apply
                                                                                                                                    (Ty.path
                                                                                                                                      "openvm_stark_backend::gkr::types::GkrError")
                                                                                                                                    []
                                                                                                                                    [
                                                                                                                                      F
                                                                                                                                    ]
                                                                                                                                ]
                                                                                                                            ],
                                                                                                                            "from_residual",
                                                                                                                            [],
                                                                                                                            []
                                                                                                                          |),
                                                                                                                          [
                                                                                                                            M.read (|
                                                                                                                              residual
                                                                                                                            |)
                                                                                                                          ]
                                                                                                                        |)
                                                                                                                      |)
                                                                                                                    |)
                                                                                                                  |)));
                                                                                                              fun
                                                                                                                  γ =>
                                                                                                                ltac:(M.monadic
                                                                                                                  (let
                                                                                                                        γ0_0 :=
                                                                                                                    M.SubPointer.get_struct_tuple_field (|
                                                                                                                      γ,
                                                                                                                      "core::ops::control_flow::ControlFlow::Continue",
                                                                                                                      0
                                                                                                                    |) in
                                                                                                                  let
                                                                                                                        val :=
                                                                                                                    M.copy (|
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "alloc::vec::Vec")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          F;
                                                                                                                          Ty.path
                                                                                                                            "alloc::alloc::Global"
                                                                                                                        ],
                                                                                                                      γ0_0
                                                                                                                    |) in
                                                                                                                  M.read (|
                                                                                                                    val
                                                                                                                  |)))
                                                                                                            ]
                                                                                                          |) in
                                                                                                        let~
                                                                                                              eq_eval :
                                                                                                            F :=
                                                                                                          M.call_closure (|
                                                                                                            F,
                                                                                                            M.get_function (|
                                                                                                              "openvm_stark_backend::poly::multi::hypercube_eq",
                                                                                                              [],
                                                                                                              [
                                                                                                                F
                                                                                                              ]
                                                                                                            |),
                                                                                                            [
                                                                                                              M.borrow (|
                                                                                                                Pointer.Kind.Ref,
                                                                                                                M.deref (|
                                                                                                                  M.borrow (|
                                                                                                                    Pointer.Kind.Ref,
                                                                                                                    M.deref (|
                                                                                                                      M.call_closure (|
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "&")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "slice")
                                                                                                                              []
                                                                                                                              [
                                                                                                                                F
                                                                                                                              ]
                                                                                                                          ],
                                                                                                                        M.get_trait_method (|
                                                                                                                          "core::ops::index::Index",
                                                                                                                          Ty.apply
                                                                                                                            (Ty.path
                                                                                                                              "alloc::vec::Vec")
                                                                                                                            []
                                                                                                                            [
                                                                                                                              F;
                                                                                                                              Ty.path
                                                                                                                                "alloc::alloc::Global"
                                                                                                                            ],
                                                                                                                          [],
                                                                                                                          [
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "core::ops::range::RangeFrom")
                                                                                                                              []
                                                                                                                              [
                                                                                                                                Ty.path
                                                                                                                                  "usize"
                                                                                                                              ]
                                                                                                                          ],
                                                                                                                          "index",
                                                                                                                          [],
                                                                                                                          []
                                                                                                                        |),
                                                                                                                        [
                                                                                                                          M.borrow (|
                                                                                                                            Pointer.Kind.Ref,
                                                                                                                            ood_point
                                                                                                                          |);
                                                                                                                          Value.mkStructRecord
                                                                                                                            "core::ops::range::RangeFrom"
                                                                                                                            []
                                                                                                                            [
                                                                                                                              Ty.path
                                                                                                                                "usize"
                                                                                                                            ]
                                                                                                                            [
                                                                                                                              ("start",
                                                                                                                                M.read (|
                                                                                                                                  n_unused
                                                                                                                                |))
                                                                                                                            ]
                                                                                                                        ]
                                                                                                                      |)
                                                                                                                    |)
                                                                                                                  |)
                                                                                                                |)
                                                                                                              |);
                                                                                                              M.borrow (|
                                                                                                                Pointer.Kind.Ref,
                                                                                                                M.deref (|
                                                                                                                  M.borrow (|
                                                                                                                    Pointer.Kind.Ref,
                                                                                                                    M.deref (|
                                                                                                                      M.call_closure (|
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "&")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "slice")
                                                                                                                              []
                                                                                                                              [
                                                                                                                                F
                                                                                                                              ]
                                                                                                                          ],
                                                                                                                        M.get_trait_method (|
                                                                                                                          "core::ops::index::Index",
                                                                                                                          Ty.apply
                                                                                                                            (Ty.path
                                                                                                                              "alloc::vec::Vec")
                                                                                                                            []
                                                                                                                            [
                                                                                                                              F;
                                                                                                                              Ty.path
                                                                                                                                "alloc::alloc::Global"
                                                                                                                            ],
                                                                                                                          [],
                                                                                                                          [
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "core::ops::range::RangeFrom")
                                                                                                                              []
                                                                                                                              [
                                                                                                                                Ty.path
                                                                                                                                  "usize"
                                                                                                                              ]
                                                                                                                          ],
                                                                                                                          "index",
                                                                                                                          [],
                                                                                                                          []
                                                                                                                        |),
                                                                                                                        [
                                                                                                                          M.borrow (|
                                                                                                                            Pointer.Kind.Ref,
                                                                                                                            sumcheck_ood_point
                                                                                                                          |);
                                                                                                                          Value.mkStructRecord
                                                                                                                            "core::ops::range::RangeFrom"
                                                                                                                            []
                                                                                                                            [
                                                                                                                              Ty.path
                                                                                                                                "usize"
                                                                                                                            ]
                                                                                                                            [
                                                                                                                              ("start",
                                                                                                                                M.read (|
                                                                                                                                  n_unused
                                                                                                                                |))
                                                                                                                            ]
                                                                                                                        ]
                                                                                                                      |)
                                                                                                                    |)
                                                                                                                  |)
                                                                                                                |)
                                                                                                              |)
                                                                                                            ]
                                                                                                          |) in
                                                                                                        let~
                                                                                                              _ :
                                                                                                            Ty.tuple
                                                                                                              [] :=
                                                                                                          M.call_closure (|
                                                                                                            Ty.tuple
                                                                                                              [],
                                                                                                            M.get_associated_function (|
                                                                                                              Ty.apply
                                                                                                                (Ty.path
                                                                                                                  "alloc::vec::Vec")
                                                                                                                []
                                                                                                                [
                                                                                                                  F;
                                                                                                                  Ty.path
                                                                                                                    "alloc::alloc::Global"
                                                                                                                ],
                                                                                                              "push",
                                                                                                              [],
                                                                                                              []
                                                                                                            |),
                                                                                                            [
                                                                                                              M.borrow (|
                                                                                                                Pointer.Kind.MutRef,
                                                                                                                layer_evals
                                                                                                              |);
                                                                                                              M.call_closure (|
                                                                                                                F,
                                                                                                                M.get_trait_method (|
                                                                                                                  "core::ops::arith::Mul",
                                                                                                                  F,
                                                                                                                  [],
                                                                                                                  [
                                                                                                                    F
                                                                                                                  ],
                                                                                                                  "mul",
                                                                                                                  [],
                                                                                                                  []
                                                                                                                |),
                                                                                                                [
                                                                                                                  M.read (|
                                                                                                                    eq_eval
                                                                                                                  |);
                                                                                                                  M.call_closure (|
                                                                                                                    F,
                                                                                                                    M.get_function (|
                                                                                                                      "openvm_stark_backend::poly::uni::random_linear_combination",
                                                                                                                      [],
                                                                                                                      [
                                                                                                                        F
                                                                                                                      ]
                                                                                                                    |),
                                                                                                                    [
                                                                                                                      M.borrow (|
                                                                                                                        Pointer.Kind.Ref,
                                                                                                                        M.deref (|
                                                                                                                          M.call_closure (|
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "&")
                                                                                                                              []
                                                                                                                              [
                                                                                                                                Ty.apply
                                                                                                                                  (Ty.path
                                                                                                                                    "slice")
                                                                                                                                  []
                                                                                                                                  [
                                                                                                                                    F
                                                                                                                                  ]
                                                                                                                              ],
                                                                                                                            M.get_trait_method (|
                                                                                                                              "core::ops::deref::Deref",
                                                                                                                              Ty.apply
                                                                                                                                (Ty.path
                                                                                                                                  "alloc::vec::Vec")
                                                                                                                                []
                                                                                                                                [
                                                                                                                                  F;
                                                                                                                                  Ty.path
                                                                                                                                    "alloc::alloc::Global"
                                                                                                                                ],
                                                                                                                              [],
                                                                                                                              [],
                                                                                                                              "deref",
                                                                                                                              [],
                                                                                                                              []
                                                                                                                            |),
                                                                                                                            [
                                                                                                                              M.borrow (|
                                                                                                                                Pointer.Kind.Ref,
                                                                                                                                M.deref (|
                                                                                                                                  M.borrow (|
                                                                                                                                    Pointer.Kind.Ref,
                                                                                                                                    gate_output
                                                                                                                                  |)
                                                                                                                                |)
                                                                                                                              |)
                                                                                                                            ]
                                                                                                                          |)
                                                                                                                        |)
                                                                                                                      |);
                                                                                                                      M.read (|
                                                                                                                        instance_lambda
                                                                                                                      |)
                                                                                                                    ]
                                                                                                                  |)
                                                                                                                ]
                                                                                                              |)
                                                                                                            ]
                                                                                                          |) in
                                                                                                        M.alloc (|
                                                                                                          Ty.tuple
                                                                                                            [],
                                                                                                          Value.Tuple
                                                                                                            []
                                                                                                        |)
                                                                                                      |)))
                                                                                                ]
                                                                                              |) in
                                                                                            M.alloc (|
                                                                                              Ty.tuple
                                                                                                [],
                                                                                              Value.Tuple
                                                                                                []
                                                                                            |)))
                                                                                        |)
                                                                                      |)))
                                                                                ]
                                                                              |)
                                                                            |))
                                                                        |) in
                                                                      let~ layer_eval : F :=
                                                                        M.call_closure (|
                                                                          F,
                                                                          M.get_function (|
                                                                            "openvm_stark_backend::poly::uni::random_linear_combination",
                                                                            [],
                                                                            [ F ]
                                                                          |),
                                                                          [
                                                                            M.borrow (|
                                                                              Pointer.Kind.Ref,
                                                                              M.deref (|
                                                                                M.call_closure (|
                                                                                  Ty.apply
                                                                                    (Ty.path "&")
                                                                                    []
                                                                                    [
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "slice")
                                                                                        []
                                                                                        [ F ]
                                                                                    ],
                                                                                  M.get_trait_method (|
                                                                                    "core::ops::deref::Deref",
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "alloc::vec::Vec")
                                                                                      []
                                                                                      [
                                                                                        F;
                                                                                        Ty.path
                                                                                          "alloc::alloc::Global"
                                                                                      ],
                                                                                    [],
                                                                                    [],
                                                                                    "deref",
                                                                                    [],
                                                                                    []
                                                                                  |),
                                                                                  [
                                                                                    M.borrow (|
                                                                                      Pointer.Kind.Ref,
                                                                                      M.deref (|
                                                                                        M.borrow (|
                                                                                          Pointer.Kind.Ref,
                                                                                          layer_evals
                                                                                        |)
                                                                                      |)
                                                                                    |)
                                                                                  ]
                                                                                |)
                                                                              |)
                                                                            |);
                                                                            M.read (|
                                                                              sumcheck_alpha
                                                                            |)
                                                                          ]
                                                                        |) in
                                                                      let~ _ : Ty.tuple [] :=
                                                                        M.match_operator (|
                                                                          Ty.tuple [],
                                                                          M.alloc (|
                                                                            Ty.tuple [],
                                                                            Value.Tuple []
                                                                          |),
                                                                          [
                                                                            fun γ =>
                                                                              ltac:(M.monadic
                                                                                (let γ :=
                                                                                  M.use
                                                                                    (M.alloc (|
                                                                                      Ty.path
                                                                                        "bool",
                                                                                      M.call_closure (|
                                                                                        Ty.path
                                                                                          "bool",
                                                                                        M.get_trait_method (|
                                                                                          "core::cmp::PartialEq",
                                                                                          F,
                                                                                          [],
                                                                                          [ F ],
                                                                                          "ne",
                                                                                          [],
                                                                                          []
                                                                                        |),
                                                                                        [
                                                                                          M.borrow (|
                                                                                            Pointer.Kind.Ref,
                                                                                            sumcheck_eval
                                                                                          |);
                                                                                          M.borrow (|
                                                                                            Pointer.Kind.Ref,
                                                                                            layer_eval
                                                                                          |)
                                                                                        ]
                                                                                      |)
                                                                                    |)) in
                                                                                let _ :=
                                                                                  is_constant_or_break_match (|
                                                                                    M.read (| γ |),
                                                                                    Value.Bool true
                                                                                  |) in
                                                                                M.never_to_any (|
                                                                                  M.read (|
                                                                                    M.return_ (|
                                                                                      Value.StructTuple
                                                                                        "core::result::Result::Err"
                                                                                        []
                                                                                        [
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "openvm_stark_backend::gkr::types::GkrArtifact")
                                                                                            []
                                                                                            [ F ];
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "openvm_stark_backend::gkr::types::GkrError")
                                                                                            []
                                                                                            [ F ]
                                                                                        ]
                                                                                        [
                                                                                          Value.mkStructRecord
                                                                                            "openvm_stark_backend::gkr::types::GkrError::CircuitCheckFailure"
                                                                                            []
                                                                                            [ F ]
                                                                                            [
                                                                                              ("claim",
                                                                                                M.read (|
                                                                                                  sumcheck_eval
                                                                                                |));
                                                                                              ("output",
                                                                                                M.read (|
                                                                                                  layer_eval
                                                                                                |));
                                                                                              ("layer",
                                                                                                M.read (|
                                                                                                  layer
                                                                                                |))
                                                                                            ]
                                                                                        ]
                                                                                    |)
                                                                                  |)
                                                                                |)));
                                                                            fun γ =>
                                                                              ltac:(M.monadic
                                                                                (Value.Tuple []))
                                                                          ]
                                                                        |) in
                                                                      let~ _ : Ty.tuple [] :=
                                                                        M.read (|
                                                                          M.use
                                                                            (M.alloc (|
                                                                              Ty.tuple [],
                                                                              M.match_operator (|
                                                                                Ty.tuple [],
                                                                                M.alloc (|
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "core::slice::iter::Iter")
                                                                                    []
                                                                                    [
                                                                                      Ty.path
                                                                                        "usize"
                                                                                    ],
                                                                                  M.call_closure (|
                                                                                    Ty.apply
                                                                                      (Ty.path
                                                                                        "core::slice::iter::Iter")
                                                                                      []
                                                                                      [
                                                                                        Ty.path
                                                                                          "usize"
                                                                                      ],
                                                                                    M.get_trait_method (|
                                                                                      "core::iter::traits::collect::IntoIterator",
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "&")
                                                                                        []
                                                                                        [
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "alloc::vec::Vec")
                                                                                            []
                                                                                            [
                                                                                              Ty.path
                                                                                                "usize";
                                                                                              Ty.path
                                                                                                "alloc::alloc::Global"
                                                                                            ]
                                                                                        ],
                                                                                      [],
                                                                                      [],
                                                                                      "into_iter",
                                                                                      [],
                                                                                      []
                                                                                    |),
                                                                                    [
                                                                                      M.borrow (|
                                                                                        Pointer.Kind.Ref,
                                                                                        sumcheck_instances
                                                                                      |)
                                                                                    ]
                                                                                  |)
                                                                                |),
                                                                                [
                                                                                  fun γ =>
                                                                                    ltac:(M.monadic
                                                                                      (let iter :=
                                                                                        M.copy (|
                                                                                          Ty.apply
                                                                                            (Ty.path
                                                                                              "core::slice::iter::Iter")
                                                                                            []
                                                                                            [
                                                                                              Ty.path
                                                                                                "usize"
                                                                                            ],
                                                                                          γ
                                                                                        |) in
                                                                                      M.read (|
                                                                                        M.loop (|
                                                                                          Ty.tuple
                                                                                            [],
                                                                                          ltac:(M.monadic
                                                                                            (let~
                                                                                                  _ :
                                                                                                Ty.tuple
                                                                                                  [] :=
                                                                                              M.match_operator (|
                                                                                                Ty.tuple
                                                                                                  [],
                                                                                                M.alloc (|
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "core::option::Option")
                                                                                                    []
                                                                                                    [
                                                                                                      Ty.apply
                                                                                                        (Ty.path
                                                                                                          "&")
                                                                                                        []
                                                                                                        [
                                                                                                          Ty.path
                                                                                                            "usize"
                                                                                                        ]
                                                                                                    ],
                                                                                                  M.call_closure (|
                                                                                                    Ty.apply
                                                                                                      (Ty.path
                                                                                                        "core::option::Option")
                                                                                                      []
                                                                                                      [
                                                                                                        Ty.apply
                                                                                                          (Ty.path
                                                                                                            "&")
                                                                                                          []
                                                                                                          [
                                                                                                            Ty.path
                                                                                                              "usize"
                                                                                                          ]
                                                                                                      ],
                                                                                                    M.get_trait_method (|
                                                                                                      "core::iter::traits::iterator::Iterator",
                                                                                                      Ty.apply
                                                                                                        (Ty.path
                                                                                                          "core::slice::iter::Iter")
                                                                                                        []
                                                                                                        [
                                                                                                          Ty.path
                                                                                                            "usize"
                                                                                                        ],
                                                                                                      [],
                                                                                                      [],
                                                                                                      "next",
                                                                                                      [],
                                                                                                      []
                                                                                                    |),
                                                                                                    [
                                                                                                      M.borrow (|
                                                                                                        Pointer.Kind.MutRef,
                                                                                                        M.deref (|
                                                                                                          M.borrow (|
                                                                                                            Pointer.Kind.MutRef,
                                                                                                            iter
                                                                                                          |)
                                                                                                        |)
                                                                                                      |)
                                                                                                    ]
                                                                                                  |)
                                                                                                |),
                                                                                                [
                                                                                                  fun
                                                                                                      γ =>
                                                                                                    ltac:(M.monadic
                                                                                                      (let
                                                                                                            _ :=
                                                                                                        M.is_struct_tuple (|
                                                                                                          γ,
                                                                                                          "core::option::Option::None"
                                                                                                        |) in
                                                                                                      M.never_to_any (|
                                                                                                        M.read (|
                                                                                                          M.break (||)
                                                                                                        |)
                                                                                                      |)));
                                                                                                  fun
                                                                                                      γ =>
                                                                                                    ltac:(M.monadic
                                                                                                      (let
                                                                                                            γ0_0 :=
                                                                                                        M.SubPointer.get_struct_tuple_field (|
                                                                                                          γ,
                                                                                                          "core::option::Option::Some",
                                                                                                          0
                                                                                                        |) in
                                                                                                      let
                                                                                                            γ0_0 :=
                                                                                                        M.deref (|
                                                                                                          M.read (|
                                                                                                            γ0_0
                                                                                                          |)
                                                                                                        |) in
                                                                                                      let
                                                                                                            instance :=
                                                                                                        M.copy (|
                                                                                                          Ty.path
                                                                                                            "usize",
                                                                                                          γ0_0
                                                                                                        |) in
                                                                                                      M.read (|
                                                                                                        let~
                                                                                                              n_unused :
                                                                                                            Ty.path
                                                                                                              "usize" :=
                                                                                                          M.call_closure (|
                                                                                                            Ty.path
                                                                                                              "usize",
                                                                                                            BinOp.Wrap.sub,
                                                                                                            [
                                                                                                              M.read (|
                                                                                                                n_layers
                                                                                                              |);
                                                                                                              M.call_closure (|
                                                                                                                Ty.path
                                                                                                                  "usize",
                                                                                                                M.get_trait_method (|
                                                                                                                  "core::ops::function::Fn",
                                                                                                                  Ty.function
                                                                                                                    [
                                                                                                                      Ty.path
                                                                                                                        "usize"
                                                                                                                    ]
                                                                                                                    (Ty.path
                                                                                                                      "usize"),
                                                                                                                  [],
                                                                                                                  [
                                                                                                                    Ty.tuple
                                                                                                                      [
                                                                                                                        Ty.path
                                                                                                                          "usize"
                                                                                                                      ]
                                                                                                                  ],
                                                                                                                  "call",
                                                                                                                  [],
                                                                                                                  []
                                                                                                                |),
                                                                                                                [
                                                                                                                  M.borrow (|
                                                                                                                    Pointer.Kind.Ref,
                                                                                                                    instance_n_layers
                                                                                                                  |);
                                                                                                                  Value.Tuple
                                                                                                                    [
                                                                                                                      M.read (|
                                                                                                                        instance
                                                                                                                      |)
                                                                                                                    ]
                                                                                                                ]
                                                                                                              |)
                                                                                                            ]
                                                                                                          |) in
                                                                                                        let~
                                                                                                              mask :
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "&")
                                                                                                              []
                                                                                                              [
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    F
                                                                                                                  ]
                                                                                                              ] :=
                                                                                                          M.borrow (|
                                                                                                            Pointer.Kind.Ref,
                                                                                                            M.deref (|
                                                                                                              M.call_closure (|
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "&")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        F
                                                                                                                      ]
                                                                                                                  ],
                                                                                                                M.get_trait_method (|
                                                                                                                  "core::ops::index::Index",
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "alloc::vec::Vec")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          F
                                                                                                                        ];
                                                                                                                      Ty.path
                                                                                                                        "alloc::alloc::Global"
                                                                                                                    ],
                                                                                                                  [],
                                                                                                                  [
                                                                                                                    Ty.path
                                                                                                                      "usize"
                                                                                                                  ],
                                                                                                                  "index",
                                                                                                                  [],
                                                                                                                  []
                                                                                                                |),
                                                                                                                [
                                                                                                                  M.borrow (|
                                                                                                                    Pointer.Kind.Ref,
                                                                                                                    M.deref (|
                                                                                                                      M.call_closure (|
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "&")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "alloc::vec::Vec")
                                                                                                                              []
                                                                                                                              [
                                                                                                                                Ty.apply
                                                                                                                                  (Ty.path
                                                                                                                                    "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                                  []
                                                                                                                                  [
                                                                                                                                    F
                                                                                                                                  ];
                                                                                                                                Ty.path
                                                                                                                                  "alloc::alloc::Global"
                                                                                                                              ]
                                                                                                                          ],
                                                                                                                        M.get_trait_method (|
                                                                                                                          "core::ops::index::Index",
                                                                                                                          Ty.apply
                                                                                                                            (Ty.path
                                                                                                                              "alloc::vec::Vec")
                                                                                                                            []
                                                                                                                            [
                                                                                                                              Ty.apply
                                                                                                                                (Ty.path
                                                                                                                                  "alloc::vec::Vec")
                                                                                                                                []
                                                                                                                                [
                                                                                                                                  Ty.apply
                                                                                                                                    (Ty.path
                                                                                                                                      "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                                    []
                                                                                                                                    [
                                                                                                                                      F
                                                                                                                                    ];
                                                                                                                                  Ty.path
                                                                                                                                    "alloc::alloc::Global"
                                                                                                                                ];
                                                                                                                              Ty.path
                                                                                                                                "alloc::alloc::Global"
                                                                                                                            ],
                                                                                                                          [],
                                                                                                                          [
                                                                                                                            Ty.path
                                                                                                                              "usize"
                                                                                                                          ],
                                                                                                                          "index",
                                                                                                                          [],
                                                                                                                          []
                                                                                                                        |),
                                                                                                                        [
                                                                                                                          M.borrow (|
                                                                                                                            Pointer.Kind.Ref,
                                                                                                                            M.deref (|
                                                                                                                              M.read (|
                                                                                                                                layer_masks_by_instance
                                                                                                                              |)
                                                                                                                            |)
                                                                                                                          |);
                                                                                                                          M.read (|
                                                                                                                            instance
                                                                                                                          |)
                                                                                                                        ]
                                                                                                                      |)
                                                                                                                    |)
                                                                                                                  |);
                                                                                                                  M.call_closure (|
                                                                                                                    Ty.path
                                                                                                                      "usize",
                                                                                                                    BinOp.Wrap.sub,
                                                                                                                    [
                                                                                                                      M.read (|
                                                                                                                        layer
                                                                                                                      |);
                                                                                                                      M.read (|
                                                                                                                        n_unused
                                                                                                                      |)
                                                                                                                    ]
                                                                                                                  |)
                                                                                                                ]
                                                                                                              |)
                                                                                                            |)
                                                                                                          |) in
                                                                                                        M.use
                                                                                                          (M.alloc (|
                                                                                                            Ty.tuple
                                                                                                              [],
                                                                                                            M.match_operator (|
                                                                                                              Ty.tuple
                                                                                                                [],
                                                                                                              M.alloc (|
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "core::slice::iter::Iter")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "array")
                                                                                                                      [
                                                                                                                        Value.Integer
                                                                                                                          IntegerKind.Usize
                                                                                                                          2
                                                                                                                      ]
                                                                                                                      [
                                                                                                                        F
                                                                                                                      ]
                                                                                                                  ],
                                                                                                                M.call_closure (|
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "core::slice::iter::Iter")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "array")
                                                                                                                        [
                                                                                                                          Value.Integer
                                                                                                                            IntegerKind.Usize
                                                                                                                            2
                                                                                                                        ]
                                                                                                                        [
                                                                                                                          F
                                                                                                                        ]
                                                                                                                    ],
                                                                                                                  M.get_trait_method (|
                                                                                                                    "core::iter::traits::collect::IntoIterator",
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "&")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "slice")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "array")
                                                                                                                              [
                                                                                                                                Value.Integer
                                                                                                                                  IntegerKind.Usize
                                                                                                                                  2
                                                                                                                              ]
                                                                                                                              [
                                                                                                                                F
                                                                                                                              ]
                                                                                                                          ]
                                                                                                                      ],
                                                                                                                    [],
                                                                                                                    [],
                                                                                                                    "into_iter",
                                                                                                                    [],
                                                                                                                    []
                                                                                                                  |),
                                                                                                                  [
                                                                                                                    M.call_closure (|
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "&")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          Ty.apply
                                                                                                                            (Ty.path
                                                                                                                              "slice")
                                                                                                                            []
                                                                                                                            [
                                                                                                                              Ty.apply
                                                                                                                                (Ty.path
                                                                                                                                  "array")
                                                                                                                                [
                                                                                                                                  Value.Integer
                                                                                                                                    IntegerKind.Usize
                                                                                                                                    2
                                                                                                                                ]
                                                                                                                                [
                                                                                                                                  F
                                                                                                                                ]
                                                                                                                            ]
                                                                                                                        ],
                                                                                                                      M.get_associated_function (|
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            F
                                                                                                                          ],
                                                                                                                        "columns",
                                                                                                                        [],
                                                                                                                        []
                                                                                                                      |),
                                                                                                                      [
                                                                                                                        M.borrow (|
                                                                                                                          Pointer.Kind.Ref,
                                                                                                                          M.deref (|
                                                                                                                            M.read (|
                                                                                                                              mask
                                                                                                                            |)
                                                                                                                          |)
                                                                                                                        |)
                                                                                                                      ]
                                                                                                                    |)
                                                                                                                  ]
                                                                                                                |)
                                                                                                              |),
                                                                                                              [
                                                                                                                fun
                                                                                                                    γ =>
                                                                                                                  ltac:(M.monadic
                                                                                                                    (let
                                                                                                                          iter :=
                                                                                                                      M.copy (|
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "core::slice::iter::Iter")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "array")
                                                                                                                              [
                                                                                                                                Value.Integer
                                                                                                                                  IntegerKind.Usize
                                                                                                                                  2
                                                                                                                              ]
                                                                                                                              [
                                                                                                                                F
                                                                                                                              ]
                                                                                                                          ],
                                                                                                                        γ
                                                                                                                      |) in
                                                                                                                    M.read (|
                                                                                                                      M.loop (|
                                                                                                                        Ty.tuple
                                                                                                                          [],
                                                                                                                        ltac:(M.monadic
                                                                                                                          (let~
                                                                                                                                _ :
                                                                                                                              Ty.tuple
                                                                                                                                [] :=
                                                                                                                            M.match_operator (|
                                                                                                                              Ty.tuple
                                                                                                                                [],
                                                                                                                              M.alloc (|
                                                                                                                                Ty.apply
                                                                                                                                  (Ty.path
                                                                                                                                    "core::option::Option")
                                                                                                                                  []
                                                                                                                                  [
                                                                                                                                    Ty.apply
                                                                                                                                      (Ty.path
                                                                                                                                        "&")
                                                                                                                                      []
                                                                                                                                      [
                                                                                                                                        Ty.apply
                                                                                                                                          (Ty.path
                                                                                                                                            "array")
                                                                                                                                          [
                                                                                                                                            Value.Integer
                                                                                                                                              IntegerKind.Usize
                                                                                                                                              2
                                                                                                                                          ]
                                                                                                                                          [
                                                                                                                                            F
                                                                                                                                          ]
                                                                                                                                      ]
                                                                                                                                  ],
                                                                                                                                M.call_closure (|
                                                                                                                                  Ty.apply
                                                                                                                                    (Ty.path
                                                                                                                                      "core::option::Option")
                                                                                                                                    []
                                                                                                                                    [
                                                                                                                                      Ty.apply
                                                                                                                                        (Ty.path
                                                                                                                                          "&")
                                                                                                                                        []
                                                                                                                                        [
                                                                                                                                          Ty.apply
                                                                                                                                            (Ty.path
                                                                                                                                              "array")
                                                                                                                                            [
                                                                                                                                              Value.Integer
                                                                                                                                                IntegerKind.Usize
                                                                                                                                                2
                                                                                                                                            ]
                                                                                                                                            [
                                                                                                                                              F
                                                                                                                                            ]
                                                                                                                                        ]
                                                                                                                                    ],
                                                                                                                                  M.get_trait_method (|
                                                                                                                                    "core::iter::traits::iterator::Iterator",
                                                                                                                                    Ty.apply
                                                                                                                                      (Ty.path
                                                                                                                                        "core::slice::iter::Iter")
                                                                                                                                      []
                                                                                                                                      [
                                                                                                                                        Ty.apply
                                                                                                                                          (Ty.path
                                                                                                                                            "array")
                                                                                                                                          [
                                                                                                                                            Value.Integer
                                                                                                                                              IntegerKind.Usize
                                                                                                                                              2
                                                                                                                                          ]
                                                                                                                                          [
                                                                                                                                            F
                                                                                                                                          ]
                                                                                                                                      ],
                                                                                                                                    [],
                                                                                                                                    [],
                                                                                                                                    "next",
                                                                                                                                    [],
                                                                                                                                    []
                                                                                                                                  |),
                                                                                                                                  [
                                                                                                                                    M.borrow (|
                                                                                                                                      Pointer.Kind.MutRef,
                                                                                                                                      M.deref (|
                                                                                                                                        M.borrow (|
                                                                                                                                          Pointer.Kind.MutRef,
                                                                                                                                          iter
                                                                                                                                        |)
                                                                                                                                      |)
                                                                                                                                    |)
                                                                                                                                  ]
                                                                                                                                |)
                                                                                                                              |),
                                                                                                                              [
                                                                                                                                fun
                                                                                                                                    γ =>
                                                                                                                                  ltac:(M.monadic
                                                                                                                                    (let
                                                                                                                                          _ :=
                                                                                                                                      M.is_struct_tuple (|
                                                                                                                                        γ,
                                                                                                                                        "core::option::Option::None"
                                                                                                                                      |) in
                                                                                                                                    M.never_to_any (|
                                                                                                                                      M.read (|
                                                                                                                                        M.break (||)
                                                                                                                                      |)
                                                                                                                                    |)));
                                                                                                                                fun
                                                                                                                                    γ =>
                                                                                                                                  ltac:(M.monadic
                                                                                                                                    (let
                                                                                                                                          γ0_0 :=
                                                                                                                                      M.SubPointer.get_struct_tuple_field (|
                                                                                                                                        γ,
                                                                                                                                        "core::option::Option::Some",
                                                                                                                                        0
                                                                                                                                      |) in
                                                                                                                                    let
                                                                                                                                          column :=
                                                                                                                                      M.copy (|
                                                                                                                                        Ty.apply
                                                                                                                                          (Ty.path
                                                                                                                                            "&")
                                                                                                                                          []
                                                                                                                                          [
                                                                                                                                            Ty.apply
                                                                                                                                              (Ty.path
                                                                                                                                                "array")
                                                                                                                                              [
                                                                                                                                                Value.Integer
                                                                                                                                                  IntegerKind.Usize
                                                                                                                                                  2
                                                                                                                                              ]
                                                                                                                                              [
                                                                                                                                                F
                                                                                                                                              ]
                                                                                                                                          ],
                                                                                                                                        γ0_0
                                                                                                                                      |) in
                                                                                                                                    M.read (|
                                                                                                                                      let~
                                                                                                                                            _ :
                                                                                                                                          Ty.tuple
                                                                                                                                            [] :=
                                                                                                                                        M.call_closure (|
                                                                                                                                          Ty.tuple
                                                                                                                                            [],
                                                                                                                                          M.get_trait_method (|
                                                                                                                                            "p3_challenger::CanObserve",
                                                                                                                                            impl_FieldChallenger_F_,
                                                                                                                                            [],
                                                                                                                                            [
                                                                                                                                              F
                                                                                                                                            ],
                                                                                                                                            "observe_slice",
                                                                                                                                            [],
                                                                                                                                            []
                                                                                                                                          |),
                                                                                                                                          [
                                                                                                                                            M.borrow (|
                                                                                                                                              Pointer.Kind.MutRef,
                                                                                                                                              M.deref (|
                                                                                                                                                M.read (|
                                                                                                                                                  challenger
                                                                                                                                                |)
                                                                                                                                              |)
                                                                                                                                            |);
                                                                                                                                            M.call_closure (|
                                                                                                                                              Ty.apply
                                                                                                                                                (Ty.path
                                                                                                                                                  "&")
                                                                                                                                                []
                                                                                                                                                [
                                                                                                                                                  Ty.apply
                                                                                                                                                    (Ty.path
                                                                                                                                                      "slice")
                                                                                                                                                    []
                                                                                                                                                    [
                                                                                                                                                      F
                                                                                                                                                    ]
                                                                                                                                                ],
                                                                                                                                              M.pointer_coercion
                                                                                                                                                M.PointerCoercion.Unsize
                                                                                                                                                (Ty.apply
                                                                                                                                                  (Ty.path
                                                                                                                                                    "&")
                                                                                                                                                  []
                                                                                                                                                  [
                                                                                                                                                    Ty.apply
                                                                                                                                                      (Ty.path
                                                                                                                                                        "array")
                                                                                                                                                      [
                                                                                                                                                        Value.Integer
                                                                                                                                                          IntegerKind.Usize
                                                                                                                                                          2
                                                                                                                                                      ]
                                                                                                                                                      [
                                                                                                                                                        F
                                                                                                                                                      ]
                                                                                                                                                  ])
                                                                                                                                                (Ty.apply
                                                                                                                                                  (Ty.path
                                                                                                                                                    "&")
                                                                                                                                                  []
                                                                                                                                                  [
                                                                                                                                                    Ty.apply
                                                                                                                                                      (Ty.path
                                                                                                                                                        "slice")
                                                                                                                                                      []
                                                                                                                                                      [
                                                                                                                                                        F
                                                                                                                                                      ]
                                                                                                                                                  ]),
                                                                                                                                              [
                                                                                                                                                M.borrow (|
                                                                                                                                                  Pointer.Kind.Ref,
                                                                                                                                                  M.deref (|
                                                                                                                                                    M.read (|
                                                                                                                                                      column
                                                                                                                                                    |)
                                                                                                                                                  |)
                                                                                                                                                |)
                                                                                                                                              ]
                                                                                                                                            |)
                                                                                                                                          ]
                                                                                                                                        |) in
                                                                                                                                      M.alloc (|
                                                                                                                                        Ty.tuple
                                                                                                                                          [],
                                                                                                                                        Value.Tuple
                                                                                                                                          []
                                                                                                                                      |)
                                                                                                                                    |)))
                                                                                                                              ]
                                                                                                                            |) in
                                                                                                                          M.alloc (|
                                                                                                                            Ty.tuple
                                                                                                                              [],
                                                                                                                            Value.Tuple
                                                                                                                              []
                                                                                                                          |)))
                                                                                                                      |)
                                                                                                                    |)))
                                                                                                              ]
                                                                                                            |)
                                                                                                          |))
                                                                                                      |)))
                                                                                                ]
                                                                                              |) in
                                                                                            M.alloc (|
                                                                                              Ty.tuple
                                                                                                [],
                                                                                              Value.Tuple
                                                                                                []
                                                                                            |)))
                                                                                        |)
                                                                                      |)))
                                                                                ]
                                                                              |)
                                                                            |))
                                                                        |) in
                                                                      let~ challenge : F :=
                                                                        M.call_closure (|
                                                                          F,
                                                                          M.get_trait_method (|
                                                                            "p3_challenger::CanSample",
                                                                            impl_FieldChallenger_F_,
                                                                            [],
                                                                            [ F ],
                                                                            "sample",
                                                                            [],
                                                                            []
                                                                          |),
                                                                          [
                                                                            M.borrow (|
                                                                              Pointer.Kind.MutRef,
                                                                              M.deref (|
                                                                                M.read (|
                                                                                  challenger
                                                                                |)
                                                                              |)
                                                                            |)
                                                                          ]
                                                                        |) in
                                                                      let~ _ : Ty.tuple [] :=
                                                                        M.write (|
                                                                          ood_point,
                                                                          M.read (|
                                                                            sumcheck_ood_point
                                                                          |)
                                                                        |) in
                                                                      let~ _ : Ty.tuple [] :=
                                                                        M.call_closure (|
                                                                          Ty.tuple [],
                                                                          M.get_associated_function (|
                                                                            Ty.apply
                                                                              (Ty.path
                                                                                "alloc::vec::Vec")
                                                                              []
                                                                              [
                                                                                F;
                                                                                Ty.path
                                                                                  "alloc::alloc::Global"
                                                                              ],
                                                                            "push",
                                                                            [],
                                                                            []
                                                                          |),
                                                                          [
                                                                            M.borrow (|
                                                                              Pointer.Kind.MutRef,
                                                                              ood_point
                                                                            |);
                                                                            M.read (| challenge |)
                                                                          ]
                                                                        |) in
                                                                      M.use
                                                                        (M.alloc (|
                                                                          Ty.tuple [],
                                                                          M.match_operator (|
                                                                            Ty.tuple [],
                                                                            M.alloc (|
                                                                              Ty.apply
                                                                                (Ty.path
                                                                                  "alloc::vec::into_iter::IntoIter")
                                                                                []
                                                                                [
                                                                                  Ty.path "usize";
                                                                                  Ty.path
                                                                                    "alloc::alloc::Global"
                                                                                ],
                                                                              M.call_closure (|
                                                                                Ty.apply
                                                                                  (Ty.path
                                                                                    "alloc::vec::into_iter::IntoIter")
                                                                                  []
                                                                                  [
                                                                                    Ty.path "usize";
                                                                                    Ty.path
                                                                                      "alloc::alloc::Global"
                                                                                  ],
                                                                                M.get_trait_method (|
                                                                                  "core::iter::traits::collect::IntoIterator",
                                                                                  Ty.apply
                                                                                    (Ty.path
                                                                                      "alloc::vec::Vec")
                                                                                    []
                                                                                    [
                                                                                      Ty.path
                                                                                        "usize";
                                                                                      Ty.path
                                                                                        "alloc::alloc::Global"
                                                                                    ],
                                                                                  [],
                                                                                  [],
                                                                                  "into_iter",
                                                                                  [],
                                                                                  []
                                                                                |),
                                                                                [
                                                                                  M.read (|
                                                                                    sumcheck_instances
                                                                                  |)
                                                                                ]
                                                                              |)
                                                                            |),
                                                                            [
                                                                              fun γ =>
                                                                                ltac:(M.monadic
                                                                                  (let iter :=
                                                                                    M.copy (|
                                                                                      Ty.apply
                                                                                        (Ty.path
                                                                                          "alloc::vec::into_iter::IntoIter")
                                                                                        []
                                                                                        [
                                                                                          Ty.path
                                                                                            "usize";
                                                                                          Ty.path
                                                                                            "alloc::alloc::Global"
                                                                                        ],
                                                                                      γ
                                                                                    |) in
                                                                                  M.read (|
                                                                                    M.loop (|
                                                                                      Ty.tuple [],
                                                                                      ltac:(M.monadic
                                                                                        (let~ _ :
                                                                                            Ty.tuple
                                                                                              [] :=
                                                                                          M.match_operator (|
                                                                                            Ty.tuple
                                                                                              [],
                                                                                            M.alloc (|
                                                                                              Ty.apply
                                                                                                (Ty.path
                                                                                                  "core::option::Option")
                                                                                                []
                                                                                                [
                                                                                                  Ty.path
                                                                                                    "usize"
                                                                                                ],
                                                                                              M.call_closure (|
                                                                                                Ty.apply
                                                                                                  (Ty.path
                                                                                                    "core::option::Option")
                                                                                                  []
                                                                                                  [
                                                                                                    Ty.path
                                                                                                      "usize"
                                                                                                  ],
                                                                                                M.get_trait_method (|
                                                                                                  "core::iter::traits::iterator::Iterator",
                                                                                                  Ty.apply
                                                                                                    (Ty.path
                                                                                                      "alloc::vec::into_iter::IntoIter")
                                                                                                    []
                                                                                                    [
                                                                                                      Ty.path
                                                                                                        "usize";
                                                                                                      Ty.path
                                                                                                        "alloc::alloc::Global"
                                                                                                    ],
                                                                                                  [],
                                                                                                  [],
                                                                                                  "next",
                                                                                                  [],
                                                                                                  []
                                                                                                |),
                                                                                                [
                                                                                                  M.borrow (|
                                                                                                    Pointer.Kind.MutRef,
                                                                                                    M.deref (|
                                                                                                      M.borrow (|
                                                                                                        Pointer.Kind.MutRef,
                                                                                                        iter
                                                                                                      |)
                                                                                                    |)
                                                                                                  |)
                                                                                                ]
                                                                                              |)
                                                                                            |),
                                                                                            [
                                                                                              fun
                                                                                                  γ =>
                                                                                                ltac:(M.monadic
                                                                                                  (let
                                                                                                        _ :=
                                                                                                    M.is_struct_tuple (|
                                                                                                      γ,
                                                                                                      "core::option::Option::None"
                                                                                                    |) in
                                                                                                  M.never_to_any (|
                                                                                                    M.read (|
                                                                                                      M.break (||)
                                                                                                    |)
                                                                                                  |)));
                                                                                              fun
                                                                                                  γ =>
                                                                                                ltac:(M.monadic
                                                                                                  (let
                                                                                                        γ0_0 :=
                                                                                                    M.SubPointer.get_struct_tuple_field (|
                                                                                                      γ,
                                                                                                      "core::option::Option::Some",
                                                                                                      0
                                                                                                    |) in
                                                                                                  let
                                                                                                        instance :=
                                                                                                    M.copy (|
                                                                                                      Ty.path
                                                                                                        "usize",
                                                                                                      γ0_0
                                                                                                    |) in
                                                                                                  M.read (|
                                                                                                    let~
                                                                                                          n_unused :
                                                                                                        Ty.path
                                                                                                          "usize" :=
                                                                                                      M.call_closure (|
                                                                                                        Ty.path
                                                                                                          "usize",
                                                                                                        BinOp.Wrap.sub,
                                                                                                        [
                                                                                                          M.read (|
                                                                                                            n_layers
                                                                                                          |);
                                                                                                          M.call_closure (|
                                                                                                            Ty.path
                                                                                                              "usize",
                                                                                                            M.get_trait_method (|
                                                                                                              "core::ops::function::Fn",
                                                                                                              Ty.function
                                                                                                                [
                                                                                                                  Ty.path
                                                                                                                    "usize"
                                                                                                                ]
                                                                                                                (Ty.path
                                                                                                                  "usize"),
                                                                                                              [],
                                                                                                              [
                                                                                                                Ty.tuple
                                                                                                                  [
                                                                                                                    Ty.path
                                                                                                                      "usize"
                                                                                                                  ]
                                                                                                              ],
                                                                                                              "call",
                                                                                                              [],
                                                                                                              []
                                                                                                            |),
                                                                                                            [
                                                                                                              M.borrow (|
                                                                                                                Pointer.Kind.Ref,
                                                                                                                instance_n_layers
                                                                                                              |);
                                                                                                              Value.Tuple
                                                                                                                [
                                                                                                                  M.read (|
                                                                                                                    instance
                                                                                                                  |)
                                                                                                                ]
                                                                                                            ]
                                                                                                          |)
                                                                                                        ]
                                                                                                      |) in
                                                                                                    let~
                                                                                                          mask :
                                                                                                        Ty.apply
                                                                                                          (Ty.path
                                                                                                            "&")
                                                                                                          []
                                                                                                          [
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                              []
                                                                                                              [
                                                                                                                F
                                                                                                              ]
                                                                                                          ] :=
                                                                                                      M.borrow (|
                                                                                                        Pointer.Kind.Ref,
                                                                                                        M.deref (|
                                                                                                          M.call_closure (|
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "&")
                                                                                                              []
                                                                                                              [
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    F
                                                                                                                  ]
                                                                                                              ],
                                                                                                            M.get_trait_method (|
                                                                                                              "core::ops::index::Index",
                                                                                                              Ty.apply
                                                                                                                (Ty.path
                                                                                                                  "alloc::vec::Vec")
                                                                                                                []
                                                                                                                [
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      F
                                                                                                                    ];
                                                                                                                  Ty.path
                                                                                                                    "alloc::alloc::Global"
                                                                                                                ],
                                                                                                              [],
                                                                                                              [
                                                                                                                Ty.path
                                                                                                                  "usize"
                                                                                                              ],
                                                                                                              "index",
                                                                                                              [],
                                                                                                              []
                                                                                                            |),
                                                                                                            [
                                                                                                              M.borrow (|
                                                                                                                Pointer.Kind.Ref,
                                                                                                                M.deref (|
                                                                                                                  M.call_closure (|
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "&")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        Ty.apply
                                                                                                                          (Ty.path
                                                                                                                            "alloc::vec::Vec")
                                                                                                                          []
                                                                                                                          [
                                                                                                                            Ty.apply
                                                                                                                              (Ty.path
                                                                                                                                "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                              []
                                                                                                                              [
                                                                                                                                F
                                                                                                                              ];
                                                                                                                            Ty.path
                                                                                                                              "alloc::alloc::Global"
                                                                                                                          ]
                                                                                                                      ],
                                                                                                                    M.get_trait_method (|
                                                                                                                      "core::ops::index::Index",
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "alloc::vec::Vec")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          Ty.apply
                                                                                                                            (Ty.path
                                                                                                                              "alloc::vec::Vec")
                                                                                                                            []
                                                                                                                            [
                                                                                                                              Ty.apply
                                                                                                                                (Ty.path
                                                                                                                                  "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                                []
                                                                                                                                [
                                                                                                                                  F
                                                                                                                                ];
                                                                                                                              Ty.path
                                                                                                                                "alloc::alloc::Global"
                                                                                                                            ];
                                                                                                                          Ty.path
                                                                                                                            "alloc::alloc::Global"
                                                                                                                        ],
                                                                                                                      [],
                                                                                                                      [
                                                                                                                        Ty.path
                                                                                                                          "usize"
                                                                                                                      ],
                                                                                                                      "index",
                                                                                                                      [],
                                                                                                                      []
                                                                                                                    |),
                                                                                                                    [
                                                                                                                      M.borrow (|
                                                                                                                        Pointer.Kind.Ref,
                                                                                                                        M.deref (|
                                                                                                                          M.read (|
                                                                                                                            layer_masks_by_instance
                                                                                                                          |)
                                                                                                                        |)
                                                                                                                      |);
                                                                                                                      M.read (|
                                                                                                                        instance
                                                                                                                      |)
                                                                                                                    ]
                                                                                                                  |)
                                                                                                                |)
                                                                                                              |);
                                                                                                              M.call_closure (|
                                                                                                                Ty.path
                                                                                                                  "usize",
                                                                                                                BinOp.Wrap.sub,
                                                                                                                [
                                                                                                                  M.read (|
                                                                                                                    layer
                                                                                                                  |);
                                                                                                                  M.read (|
                                                                                                                    n_unused
                                                                                                                  |)
                                                                                                                ]
                                                                                                              |)
                                                                                                            ]
                                                                                                          |)
                                                                                                        |)
                                                                                                      |) in
                                                                                                    let~
                                                                                                          _ :
                                                                                                        Ty.tuple
                                                                                                          [] :=
                                                                                                      M.write (|
                                                                                                        M.deref (|
                                                                                                          M.call_closure (|
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "&mut")
                                                                                                              []
                                                                                                              [
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "core::option::Option")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    Ty.apply
                                                                                                                      (Ty.path
                                                                                                                        "alloc::vec::Vec")
                                                                                                                      []
                                                                                                                      [
                                                                                                                        F;
                                                                                                                        Ty.path
                                                                                                                          "alloc::alloc::Global"
                                                                                                                      ]
                                                                                                                  ]
                                                                                                              ],
                                                                                                            M.get_trait_method (|
                                                                                                              "core::ops::index::IndexMut",
                                                                                                              Ty.apply
                                                                                                                (Ty.path
                                                                                                                  "alloc::vec::Vec")
                                                                                                                []
                                                                                                                [
                                                                                                                  Ty.apply
                                                                                                                    (Ty.path
                                                                                                                      "core::option::Option")
                                                                                                                    []
                                                                                                                    [
                                                                                                                      Ty.apply
                                                                                                                        (Ty.path
                                                                                                                          "alloc::vec::Vec")
                                                                                                                        []
                                                                                                                        [
                                                                                                                          F;
                                                                                                                          Ty.path
                                                                                                                            "alloc::alloc::Global"
                                                                                                                        ]
                                                                                                                    ];
                                                                                                                  Ty.path
                                                                                                                    "alloc::alloc::Global"
                                                                                                                ],
                                                                                                              [],
                                                                                                              [
                                                                                                                Ty.path
                                                                                                                  "usize"
                                                                                                              ],
                                                                                                              "index_mut",
                                                                                                              [],
                                                                                                              []
                                                                                                            |),
                                                                                                            [
                                                                                                              M.borrow (|
                                                                                                                Pointer.Kind.MutRef,
                                                                                                                claims_to_verify_by_instance
                                                                                                              |);
                                                                                                              M.read (|
                                                                                                                instance
                                                                                                              |)
                                                                                                            ]
                                                                                                          |)
                                                                                                        |),
                                                                                                        Value.StructTuple
                                                                                                          "core::option::Option::Some"
                                                                                                          []
                                                                                                          [
                                                                                                            Ty.apply
                                                                                                              (Ty.path
                                                                                                                "alloc::vec::Vec")
                                                                                                              []
                                                                                                              [
                                                                                                                F;
                                                                                                                Ty.path
                                                                                                                  "alloc::alloc::Global"
                                                                                                              ]
                                                                                                          ]
                                                                                                          [
                                                                                                            M.call_closure (|
                                                                                                              Ty.apply
                                                                                                                (Ty.path
                                                                                                                  "alloc::vec::Vec")
                                                                                                                []
                                                                                                                [
                                                                                                                  F;
                                                                                                                  Ty.path
                                                                                                                    "alloc::alloc::Global"
                                                                                                                ],
                                                                                                              M.get_associated_function (|
                                                                                                                Ty.apply
                                                                                                                  (Ty.path
                                                                                                                    "openvm_stark_backend::gkr::types::GkrMask")
                                                                                                                  []
                                                                                                                  [
                                                                                                                    F
                                                                                                                  ],
                                                                                                                "reduce_at_point",
                                                                                                                [],
                                                                                                                []
                                                                                                              |),
                                                                                                              [
                                                                                                                M.borrow (|
                                                                                                                  Pointer.Kind.Ref,
                                                                                                                  M.deref (|
                                                                                                                    M.read (|
                                                                                                                      mask
                                                                                                                    |)
                                                                                                                  |)
                                                                                                                |);
                                                                                                                M.read (|
                                                                                                                  challenge
                                                                                                                |)
                                                                                                              ]
                                                                                                            |)
                                                                                                          ]
                                                                                                      |) in
                                                                                                    M.alloc (|
                                                                                                      Ty.tuple
                                                                                                        [],
                                                                                                      Value.Tuple
                                                                                                        []
                                                                                                    |)
                                                                                                  |)))
                                                                                            ]
                                                                                          |) in
                                                                                        M.alloc (|
                                                                                          Ty.tuple
                                                                                            [],
                                                                                          Value.Tuple
                                                                                            []
                                                                                        |)))
                                                                                    |)
                                                                                  |)))
                                                                            ]
                                                                          |)
                                                                        |))
                                                                    |)))
                                                              ]
                                                            |)
                                                          |)
                                                        |)))
                                                  ]
                                                |) in
                                              M.alloc (| Ty.tuple [], Value.Tuple [] |)))
                                          |)
                                        |)))
                                  ]
                                |)
                              |))
                          |) in
                        let~ claims_to_verify_by_instance :
                            Ty.apply
                              (Ty.path "alloc::vec::Vec")
                              []
                              [
                                Ty.apply
                                  (Ty.path "alloc::vec::Vec")
                                  []
                                  [ F; Ty.path "alloc::alloc::Global" ];
                                Ty.path "alloc::alloc::Global"
                              ] :=
                          M.call_closure (|
                            Ty.apply
                              (Ty.path "alloc::vec::Vec")
                              []
                              [
                                Ty.apply
                                  (Ty.path "alloc::vec::Vec")
                                  []
                                  [ F; Ty.path "alloc::alloc::Global" ];
                                Ty.path "alloc::alloc::Global"
                              ],
                            M.get_trait_method (|
                              "core::iter::traits::iterator::Iterator",
                              Ty.apply
                                (Ty.path "core::iter::adapters::map::Map")
                                []
                                [
                                  Ty.apply
                                    (Ty.path "alloc::vec::into_iter::IntoIter")
                                    []
                                    [
                                      Ty.apply
                                        (Ty.path "core::option::Option")
                                        []
                                        [
                                          Ty.apply
                                            (Ty.path "alloc::vec::Vec")
                                            []
                                            [ F; Ty.path "alloc::alloc::Global" ]
                                        ];
                                      Ty.path "alloc::alloc::Global"
                                    ];
                                  Ty.function
                                    [
                                      Ty.apply
                                        (Ty.path "core::option::Option")
                                        []
                                        [
                                          Ty.apply
                                            (Ty.path "alloc::vec::Vec")
                                            []
                                            [ F; Ty.path "alloc::alloc::Global" ]
                                        ]
                                    ]
                                    (Ty.apply
                                      (Ty.path "alloc::vec::Vec")
                                      []
                                      [ F; Ty.path "alloc::alloc::Global" ])
                                ],
                              [],
                              [],
                              "collect",
                              [],
                              [
                                Ty.apply
                                  (Ty.path "alloc::vec::Vec")
                                  []
                                  [
                                    Ty.apply
                                      (Ty.path "alloc::vec::Vec")
                                      []
                                      [ F; Ty.path "alloc::alloc::Global" ];
                                    Ty.path "alloc::alloc::Global"
                                  ]
                              ]
                            |),
                            [
                              M.call_closure (|
                                Ty.apply
                                  (Ty.path "core::iter::adapters::map::Map")
                                  []
                                  [
                                    Ty.apply
                                      (Ty.path "alloc::vec::into_iter::IntoIter")
                                      []
                                      [
                                        Ty.apply
                                          (Ty.path "core::option::Option")
                                          []
                                          [
                                            Ty.apply
                                              (Ty.path "alloc::vec::Vec")
                                              []
                                              [ F; Ty.path "alloc::alloc::Global" ]
                                          ];
                                        Ty.path "alloc::alloc::Global"
                                      ];
                                    Ty.function
                                      [
                                        Ty.apply
                                          (Ty.path "core::option::Option")
                                          []
                                          [
                                            Ty.apply
                                              (Ty.path "alloc::vec::Vec")
                                              []
                                              [ F; Ty.path "alloc::alloc::Global" ]
                                          ]
                                      ]
                                      (Ty.apply
                                        (Ty.path "alloc::vec::Vec")
                                        []
                                        [ F; Ty.path "alloc::alloc::Global" ])
                                  ],
                                M.get_trait_method (|
                                  "core::iter::traits::iterator::Iterator",
                                  Ty.apply
                                    (Ty.path "alloc::vec::into_iter::IntoIter")
                                    []
                                    [
                                      Ty.apply
                                        (Ty.path "core::option::Option")
                                        []
                                        [
                                          Ty.apply
                                            (Ty.path "alloc::vec::Vec")
                                            []
                                            [ F; Ty.path "alloc::alloc::Global" ]
                                        ];
                                      Ty.path "alloc::alloc::Global"
                                    ],
                                  [],
                                  [],
                                  "map",
                                  [],
                                  [
                                    Ty.apply
                                      (Ty.path "alloc::vec::Vec")
                                      []
                                      [ F; Ty.path "alloc::alloc::Global" ];
                                    Ty.function
                                      [
                                        Ty.apply
                                          (Ty.path "core::option::Option")
                                          []
                                          [
                                            Ty.apply
                                              (Ty.path "alloc::vec::Vec")
                                              []
                                              [ F; Ty.path "alloc::alloc::Global" ]
                                          ]
                                      ]
                                      (Ty.apply
                                        (Ty.path "alloc::vec::Vec")
                                        []
                                        [ F; Ty.path "alloc::alloc::Global" ])
                                  ]
                                |),
                                [
                                  M.call_closure (|
                                    Ty.apply
                                      (Ty.path "alloc::vec::into_iter::IntoIter")
                                      []
                                      [
                                        Ty.apply
                                          (Ty.path "core::option::Option")
                                          []
                                          [
                                            Ty.apply
                                              (Ty.path "alloc::vec::Vec")
                                              []
                                              [ F; Ty.path "alloc::alloc::Global" ]
                                          ];
                                        Ty.path "alloc::alloc::Global"
                                      ],
                                    M.get_trait_method (|
                                      "core::iter::traits::collect::IntoIterator",
                                      Ty.apply
                                        (Ty.path "alloc::vec::Vec")
                                        []
                                        [
                                          Ty.apply
                                            (Ty.path "core::option::Option")
                                            []
                                            [
                                              Ty.apply
                                                (Ty.path "alloc::vec::Vec")
                                                []
                                                [ F; Ty.path "alloc::alloc::Global" ]
                                            ];
                                          Ty.path "alloc::alloc::Global"
                                        ],
                                      [],
                                      [],
                                      "into_iter",
                                      [],
                                      []
                                    |),
                                    [ M.read (| claims_to_verify_by_instance |) ]
                                  |);
                                  M.get_associated_function (|
                                    Ty.apply
                                      (Ty.path "core::option::Option")
                                      []
                                      [
                                        Ty.apply
                                          (Ty.path "alloc::vec::Vec")
                                          []
                                          [ F; Ty.path "alloc::alloc::Global" ]
                                      ],
                                    "unwrap",
                                    [],
                                    []
                                  |)
                                ]
                              |)
                            ]
                          |) in
                        M.alloc (|
                          Ty.apply
                            (Ty.path "core::result::Result")
                            []
                            [
                              Ty.apply
                                (Ty.path "openvm_stark_backend::gkr::types::GkrArtifact")
                                []
                                [ F ];
                              Ty.apply
                                (Ty.path "openvm_stark_backend::gkr::types::GkrError")
                                []
                                [ F ]
                            ],
                          Value.StructTuple
                            "core::result::Result::Ok"
                            []
                            [
                              Ty.apply
                                (Ty.path "openvm_stark_backend::gkr::types::GkrArtifact")
                                []
                                [ F ];
                              Ty.apply
                                (Ty.path "openvm_stark_backend::gkr::types::GkrError")
                                []
                                [ F ]
                            ]
                            [
                              Value.mkStructRecord
                                "openvm_stark_backend::gkr::types::GkrArtifact"
                                []
                                [ F ]
                                [
                                  ("ood_point", M.read (| ood_point |));
                                  ("claims_to_verify_by_instance",
                                    M.read (| claims_to_verify_by_instance |));
                                  ("n_variables_by_instance",
                                    M.call_closure (|
                                      Ty.apply
                                        (Ty.path "alloc::vec::Vec")
                                        []
                                        [ Ty.path "usize"; Ty.path "alloc::alloc::Global" ],
                                      M.get_trait_method (|
                                        "core::iter::traits::iterator::Iterator",
                                        Ty.apply
                                          (Ty.path "core::iter::adapters::map::Map")
                                          []
                                          [
                                            Ty.apply
                                              (Ty.path "core::ops::range::Range")
                                              []
                                              [ Ty.path "usize" ];
                                            Ty.function [ Ty.path "usize" ] (Ty.path "usize")
                                          ],
                                        [],
                                        [],
                                        "collect",
                                        [],
                                        [
                                          Ty.apply
                                            (Ty.path "alloc::vec::Vec")
                                            []
                                            [ Ty.path "usize"; Ty.path "alloc::alloc::Global" ]
                                        ]
                                      |),
                                      [
                                        M.call_closure (|
                                          Ty.apply
                                            (Ty.path "core::iter::adapters::map::Map")
                                            []
                                            [
                                              Ty.apply
                                                (Ty.path "core::ops::range::Range")
                                                []
                                                [ Ty.path "usize" ];
                                              Ty.function [ Ty.path "usize" ] (Ty.path "usize")
                                            ],
                                          M.get_trait_method (|
                                            "core::iter::traits::iterator::Iterator",
                                            Ty.apply
                                              (Ty.path "core::ops::range::Range")
                                              []
                                              [ Ty.path "usize" ],
                                            [],
                                            [],
                                            "map",
                                            [],
                                            [
                                              Ty.path "usize";
                                              Ty.function [ Ty.path "usize" ] (Ty.path "usize")
                                            ]
                                          |),
                                          [
                                            Value.mkStructRecord
                                              "core::ops::range::Range"
                                              []
                                              [ Ty.path "usize" ]
                                              [
                                                ("start", Value.Integer IntegerKind.Usize 0);
                                                ("end_", M.read (| n_instances |))
                                              ];
                                            M.read (| instance_n_layers |)
                                          ]
                                        |)
                                      ]
                                    |))
                                ]
                            ]
                        |)
                      |)))
                ]
              |)))
          |)))
      | _, _, _ => M.impossible "wrong number of arguments"
      end.
    
    Global Instance Instance_IsFunction_partially_verify_batch :
      M.IsFunction.C
        "openvm_stark_backend::gkr::verifier::partially_verify_batch"
        partially_verify_batch.
    Admitted.
    Global Typeclasses Opaque partially_verify_batch.
  End verifier.
End gkr.
