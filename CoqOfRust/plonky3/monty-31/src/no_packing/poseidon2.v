(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Module no_packing.
  Module poseidon2.
    (* StructRecord
      {
        name := "Poseidon2InternalLayerMonty31";
        const_params := [ "WIDTH" ];
        ty_params := [ "MP"; "ILP" ];
        fields :=
          [
            ("internal_constants",
              Ty.apply
                (Ty.path "alloc::vec::Vec")
                []
                [
                  Ty.apply (Ty.path "p3_monty_31::monty_31::MontyField31") [] [ MP ];
                  Ty.path "alloc::alloc::Global"
                ]);
            ("_phantom", Ty.apply (Ty.path "core::marker::PhantomData") [] [ ILP ])
          ];
      } *)
    
    Module Impl_core_fmt_Debug_where_core_fmt_Debug_MP_where_p3_monty_31_data_traits_MontyParameters_MP_where_core_fmt_Debug_ILP_where_p3_monty_31_poseidon2_InternalLayerBaseParameters_ILP_MP_for_p3_monty_31_no_packing_poseidon2_Poseidon2InternalLayerMonty31_WIDTH_MP_ILP.
      Definition Self (WIDTH : Value.t) (MP ILP : Ty.t) : Ty.t :=
        Ty.apply
          (Ty.path "p3_monty_31::no_packing::poseidon2::Poseidon2InternalLayerMonty31")
          [ WIDTH ]
          [ MP; ILP ].
      
      (* Debug *)
      Definition fmt
          (WIDTH : Value.t)
          (MP ILP : Ty.t)
          (ε : list Value.t)
          (τ : list Ty.t)
          (α : list Value.t)
          : M :=
        let Self : Ty.t := Self WIDTH MP ILP in
        match ε, τ, α with
        | [], [], [ self; f ] =>
          ltac:(M.monadic
            (let self := M.alloc (| self |) in
            let f := M.alloc (| f |) in
            M.call_closure (|
              Ty.apply
                (Ty.path "core::result::Result")
                []
                [ Ty.tuple []; Ty.path "core::fmt::Error" ],
              M.get_associated_function (|
                Ty.path "core::fmt::Formatter",
                "debug_struct_field2_finish",
                [],
                []
              |),
              [
                M.borrow (| Pointer.Kind.MutRef, M.deref (| M.read (| f |) |) |);
                M.borrow (|
                  Pointer.Kind.Ref,
                  M.deref (| mk_str (| "Poseidon2InternalLayerMonty31" |) |)
                |);
                M.borrow (| Pointer.Kind.Ref, M.deref (| mk_str (| "internal_constants" |) |) |);
                (* Unsize *)
                M.pointer_coercion
                  (M.borrow (|
                    Pointer.Kind.Ref,
                    M.deref (|
                      M.borrow (|
                        Pointer.Kind.Ref,
                        M.SubPointer.get_struct_record_field (|
                          M.deref (| M.read (| self |) |),
                          "p3_monty_31::no_packing::poseidon2::Poseidon2InternalLayerMonty31",
                          "internal_constants"
                        |)
                      |)
                    |)
                  |));
                M.borrow (| Pointer.Kind.Ref, M.deref (| mk_str (| "_phantom" |) |) |);
                (* Unsize *)
                M.pointer_coercion
                  (M.borrow (|
                    Pointer.Kind.Ref,
                    M.deref (|
                      M.borrow (|
                        Pointer.Kind.Ref,
                        M.alloc (|
                          M.borrow (|
                            Pointer.Kind.Ref,
                            M.SubPointer.get_struct_record_field (|
                              M.deref (| M.read (| self |) |),
                              "p3_monty_31::no_packing::poseidon2::Poseidon2InternalLayerMonty31",
                              "_phantom"
                            |)
                          |)
                        |)
                      |)
                    |)
                  |))
              ]
            |)))
        | _, _, _ => M.impossible "wrong number of arguments"
        end.
      
      Axiom Implements :
        forall (WIDTH : Value.t) (MP ILP : Ty.t),
        M.IsTraitInstance
          "core::fmt::Debug"
          (* Trait polymorphic consts *) []
          (* Trait polymorphic types *) []
          (Self WIDTH MP ILP)
          (* Instance *) [ ("fmt", InstanceField.Method (fmt WIDTH MP ILP)) ].
    End Impl_core_fmt_Debug_where_core_fmt_Debug_MP_where_p3_monty_31_data_traits_MontyParameters_MP_where_core_fmt_Debug_ILP_where_p3_monty_31_poseidon2_InternalLayerBaseParameters_ILP_MP_for_p3_monty_31_no_packing_poseidon2_Poseidon2InternalLayerMonty31_WIDTH_MP_ILP.
    
    Module Impl_core_clone_Clone_where_core_clone_Clone_MP_where_p3_monty_31_data_traits_MontyParameters_MP_where_core_clone_Clone_ILP_where_p3_monty_31_poseidon2_InternalLayerBaseParameters_ILP_MP_for_p3_monty_31_no_packing_poseidon2_Poseidon2InternalLayerMonty31_WIDTH_MP_ILP.
      Definition Self (WIDTH : Value.t) (MP ILP : Ty.t) : Ty.t :=
        Ty.apply
          (Ty.path "p3_monty_31::no_packing::poseidon2::Poseidon2InternalLayerMonty31")
          [ WIDTH ]
          [ MP; ILP ].
      
      (* Clone *)
      Definition clone
          (WIDTH : Value.t)
          (MP ILP : Ty.t)
          (ε : list Value.t)
          (τ : list Ty.t)
          (α : list Value.t)
          : M :=
        let Self : Ty.t := Self WIDTH MP ILP in
        match ε, τ, α with
        | [], [], [ self ] =>
          ltac:(M.monadic
            (let self := M.alloc (| self |) in
            Value.StructRecord
              "p3_monty_31::no_packing::poseidon2::Poseidon2InternalLayerMonty31"
              [
                ("internal_constants",
                  M.call_closure (|
                    Ty.apply
                      (Ty.path "alloc::vec::Vec")
                      []
                      [
                        Ty.apply (Ty.path "p3_monty_31::monty_31::MontyField31") [] [ MP ];
                        Ty.path "alloc::alloc::Global"
                      ],
                    M.get_trait_method (|
                      "core::clone::Clone",
                      Ty.apply
                        (Ty.path "alloc::vec::Vec")
                        []
                        [
                          Ty.apply (Ty.path "p3_monty_31::monty_31::MontyField31") [] [ MP ];
                          Ty.path "alloc::alloc::Global"
                        ],
                      [],
                      [],
                      "clone",
                      [],
                      []
                    |),
                    [
                      M.borrow (|
                        Pointer.Kind.Ref,
                        M.deref (|
                          M.borrow (|
                            Pointer.Kind.Ref,
                            M.SubPointer.get_struct_record_field (|
                              M.deref (| M.read (| self |) |),
                              "p3_monty_31::no_packing::poseidon2::Poseidon2InternalLayerMonty31",
                              "internal_constants"
                            |)
                          |)
                        |)
                      |)
                    ]
                  |));
                ("_phantom",
                  M.call_closure (|
                    Ty.apply (Ty.path "core::marker::PhantomData") [] [ ILP ],
                    M.get_trait_method (|
                      "core::clone::Clone",
                      Ty.apply (Ty.path "core::marker::PhantomData") [] [ ILP ],
                      [],
                      [],
                      "clone",
                      [],
                      []
                    |),
                    [
                      M.borrow (|
                        Pointer.Kind.Ref,
                        M.deref (|
                          M.borrow (|
                            Pointer.Kind.Ref,
                            M.SubPointer.get_struct_record_field (|
                              M.deref (| M.read (| self |) |),
                              "p3_monty_31::no_packing::poseidon2::Poseidon2InternalLayerMonty31",
                              "_phantom"
                            |)
                          |)
                        |)
                      |)
                    ]
                  |))
              ]))
        | _, _, _ => M.impossible "wrong number of arguments"
        end.
      
      Axiom Implements :
        forall (WIDTH : Value.t) (MP ILP : Ty.t),
        M.IsTraitInstance
          "core::clone::Clone"
          (* Trait polymorphic consts *) []
          (* Trait polymorphic types *) []
          (Self WIDTH MP ILP)
          (* Instance *) [ ("clone", InstanceField.Method (clone WIDTH MP ILP)) ].
    End Impl_core_clone_Clone_where_core_clone_Clone_MP_where_p3_monty_31_data_traits_MontyParameters_MP_where_core_clone_Clone_ILP_where_p3_monty_31_poseidon2_InternalLayerBaseParameters_ILP_MP_for_p3_monty_31_no_packing_poseidon2_Poseidon2InternalLayerMonty31_WIDTH_MP_ILP.
    
    (* StructRecord
      {
        name := "Poseidon2ExternalLayerMonty31";
        const_params := [ "WIDTH" ];
        ty_params := [ "MP" ];
        fields :=
          [
            ("external_constants",
              Ty.apply
                (Ty.path "p3_poseidon2::external::ExternalLayerConstants")
                [ WIDTH ]
                [ Ty.apply (Ty.path "p3_monty_31::monty_31::MontyField31") [] [ MP ] ])
          ];
      } *)
    
    Module Impl_core_fmt_Debug_where_core_fmt_Debug_MP_where_p3_monty_31_data_traits_MontyParameters_MP_for_p3_monty_31_no_packing_poseidon2_Poseidon2ExternalLayerMonty31_WIDTH_MP.
      Definition Self (WIDTH : Value.t) (MP : Ty.t) : Ty.t :=
        Ty.apply
          (Ty.path "p3_monty_31::no_packing::poseidon2::Poseidon2ExternalLayerMonty31")
          [ WIDTH ]
          [ MP ].
      
      (* Debug *)
      Definition fmt
          (WIDTH : Value.t)
          (MP : Ty.t)
          (ε : list Value.t)
          (τ : list Ty.t)
          (α : list Value.t)
          : M :=
        let Self : Ty.t := Self WIDTH MP in
        match ε, τ, α with
        | [], [], [ self; f ] =>
          ltac:(M.monadic
            (let self := M.alloc (| self |) in
            let f := M.alloc (| f |) in
            M.call_closure (|
              Ty.apply
                (Ty.path "core::result::Result")
                []
                [ Ty.tuple []; Ty.path "core::fmt::Error" ],
              M.get_associated_function (|
                Ty.path "core::fmt::Formatter",
                "debug_struct_field1_finish",
                [],
                []
              |),
              [
                M.borrow (| Pointer.Kind.MutRef, M.deref (| M.read (| f |) |) |);
                M.borrow (|
                  Pointer.Kind.Ref,
                  M.deref (| mk_str (| "Poseidon2ExternalLayerMonty31" |) |)
                |);
                M.borrow (| Pointer.Kind.Ref, M.deref (| mk_str (| "external_constants" |) |) |);
                (* Unsize *)
                M.pointer_coercion
                  (M.borrow (|
                    Pointer.Kind.Ref,
                    M.deref (|
                      M.borrow (|
                        Pointer.Kind.Ref,
                        M.alloc (|
                          M.borrow (|
                            Pointer.Kind.Ref,
                            M.SubPointer.get_struct_record_field (|
                              M.deref (| M.read (| self |) |),
                              "p3_monty_31::no_packing::poseidon2::Poseidon2ExternalLayerMonty31",
                              "external_constants"
                            |)
                          |)
                        |)
                      |)
                    |)
                  |))
              ]
            |)))
        | _, _, _ => M.impossible "wrong number of arguments"
        end.
      
      Axiom Implements :
        forall (WIDTH : Value.t) (MP : Ty.t),
        M.IsTraitInstance
          "core::fmt::Debug"
          (* Trait polymorphic consts *) []
          (* Trait polymorphic types *) []
          (Self WIDTH MP)
          (* Instance *) [ ("fmt", InstanceField.Method (fmt WIDTH MP)) ].
    End Impl_core_fmt_Debug_where_core_fmt_Debug_MP_where_p3_monty_31_data_traits_MontyParameters_MP_for_p3_monty_31_no_packing_poseidon2_Poseidon2ExternalLayerMonty31_WIDTH_MP.
    
    Module Impl_core_clone_Clone_where_core_clone_Clone_MP_where_p3_monty_31_data_traits_MontyParameters_MP_for_p3_monty_31_no_packing_poseidon2_Poseidon2ExternalLayerMonty31_WIDTH_MP.
      Definition Self (WIDTH : Value.t) (MP : Ty.t) : Ty.t :=
        Ty.apply
          (Ty.path "p3_monty_31::no_packing::poseidon2::Poseidon2ExternalLayerMonty31")
          [ WIDTH ]
          [ MP ].
      
      (* Clone *)
      Definition clone
          (WIDTH : Value.t)
          (MP : Ty.t)
          (ε : list Value.t)
          (τ : list Ty.t)
          (α : list Value.t)
          : M :=
        let Self : Ty.t := Self WIDTH MP in
        match ε, τ, α with
        | [], [], [ self ] =>
          ltac:(M.monadic
            (let self := M.alloc (| self |) in
            Value.StructRecord
              "p3_monty_31::no_packing::poseidon2::Poseidon2ExternalLayerMonty31"
              [
                ("external_constants",
                  M.call_closure (|
                    Ty.apply
                      (Ty.path "p3_poseidon2::external::ExternalLayerConstants")
                      [ WIDTH ]
                      [ Ty.apply (Ty.path "p3_monty_31::monty_31::MontyField31") [] [ MP ] ],
                    M.get_trait_method (|
                      "core::clone::Clone",
                      Ty.apply
                        (Ty.path "p3_poseidon2::external::ExternalLayerConstants")
                        [ WIDTH ]
                        [ Ty.apply (Ty.path "p3_monty_31::monty_31::MontyField31") [] [ MP ] ],
                      [],
                      [],
                      "clone",
                      [],
                      []
                    |),
                    [
                      M.borrow (|
                        Pointer.Kind.Ref,
                        M.deref (|
                          M.borrow (|
                            Pointer.Kind.Ref,
                            M.SubPointer.get_struct_record_field (|
                              M.deref (| M.read (| self |) |),
                              "p3_monty_31::no_packing::poseidon2::Poseidon2ExternalLayerMonty31",
                              "external_constants"
                            |)
                          |)
                        |)
                      |)
                    ]
                  |))
              ]))
        | _, _, _ => M.impossible "wrong number of arguments"
        end.
      
      Axiom Implements :
        forall (WIDTH : Value.t) (MP : Ty.t),
        M.IsTraitInstance
          "core::clone::Clone"
          (* Trait polymorphic consts *) []
          (* Trait polymorphic types *) []
          (Self WIDTH MP)
          (* Instance *) [ ("clone", InstanceField.Method (clone WIDTH MP)) ].
    End Impl_core_clone_Clone_where_core_clone_Clone_MP_where_p3_monty_31_data_traits_MontyParameters_MP_for_p3_monty_31_no_packing_poseidon2_Poseidon2ExternalLayerMonty31_WIDTH_MP.
    
    Module Impl_p3_poseidon2_internal_InternalLayerConstructor_where_p3_monty_31_data_traits_FieldParameters_FP_where_p3_monty_31_poseidon2_InternalLayerBaseParameters_ILP_FP_p3_monty_31_monty_31_MontyField31_FP_for_p3_monty_31_no_packing_poseidon2_Poseidon2InternalLayerMonty31_WIDTH_FP_ILP.
      Definition Self (WIDTH : Value.t) (FP ILP : Ty.t) : Ty.t :=
        Ty.apply
          (Ty.path "p3_monty_31::no_packing::poseidon2::Poseidon2InternalLayerMonty31")
          [ WIDTH ]
          [ FP; ILP ].
      
      (*
          fn new_from_constants(internal_constants: Vec<MontyField31<FP>>) -> Self {
              Self {
                  internal_constants,
                  _phantom: PhantomData,
              }
          }
      *)
      Definition new_from_constants
          (WIDTH : Value.t)
          (FP ILP : Ty.t)
          (ε : list Value.t)
          (τ : list Ty.t)
          (α : list Value.t)
          : M :=
        let Self : Ty.t := Self WIDTH FP ILP in
        match ε, τ, α with
        | [], [], [ internal_constants ] =>
          ltac:(M.monadic
            (let internal_constants := M.alloc (| internal_constants |) in
            Value.StructRecord
              "p3_monty_31::no_packing::poseidon2::Poseidon2InternalLayerMonty31"
              [
                ("internal_constants", M.read (| internal_constants |));
                ("_phantom", Value.StructTuple "core::marker::PhantomData" [])
              ]))
        | _, _, _ => M.impossible "wrong number of arguments"
        end.
      
      Axiom Implements :
        forall (WIDTH : Value.t) (FP ILP : Ty.t),
        M.IsTraitInstance
          "p3_poseidon2::internal::InternalLayerConstructor"
          (* Trait polymorphic consts *) []
          (* Trait polymorphic types *)
          [ Ty.apply (Ty.path "p3_monty_31::monty_31::MontyField31") [] [ FP ] ]
          (Self WIDTH FP ILP)
          (* Instance *)
          [ ("new_from_constants", InstanceField.Method (new_from_constants WIDTH FP ILP)) ].
    End Impl_p3_poseidon2_internal_InternalLayerConstructor_where_p3_monty_31_data_traits_FieldParameters_FP_where_p3_monty_31_poseidon2_InternalLayerBaseParameters_ILP_FP_p3_monty_31_monty_31_MontyField31_FP_for_p3_monty_31_no_packing_poseidon2_Poseidon2InternalLayerMonty31_WIDTH_FP_ILP.
    
    Module Impl_p3_poseidon2_external_ExternalLayerConstructor_where_p3_monty_31_data_traits_FieldParameters_FP_WIDTH_p3_monty_31_monty_31_MontyField31_FP_for_p3_monty_31_no_packing_poseidon2_Poseidon2ExternalLayerMonty31_WIDTH_FP.
      Definition Self (WIDTH : Value.t) (FP : Ty.t) : Ty.t :=
        Ty.apply
          (Ty.path "p3_monty_31::no_packing::poseidon2::Poseidon2ExternalLayerMonty31")
          [ WIDTH ]
          [ FP ].
      
      (*
          fn new_from_constants(
              external_constants: ExternalLayerConstants<MontyField31<FP>, WIDTH>,
          ) -> Self {
              Self { external_constants }
          }
      *)
      Definition new_from_constants
          (WIDTH : Value.t)
          (FP : Ty.t)
          (ε : list Value.t)
          (τ : list Ty.t)
          (α : list Value.t)
          : M :=
        let Self : Ty.t := Self WIDTH FP in
        match ε, τ, α with
        | [], [], [ external_constants ] =>
          ltac:(M.monadic
            (let external_constants := M.alloc (| external_constants |) in
            Value.StructRecord
              "p3_monty_31::no_packing::poseidon2::Poseidon2ExternalLayerMonty31"
              [ ("external_constants", M.read (| external_constants |)) ]))
        | _, _, _ => M.impossible "wrong number of arguments"
        end.
      
      Axiom Implements :
        forall (WIDTH : Value.t) (FP : Ty.t),
        M.IsTraitInstance
          "p3_poseidon2::external::ExternalLayerConstructor"
          (* Trait polymorphic consts *) [ WIDTH ]
          (* Trait polymorphic types *)
          [ Ty.apply (Ty.path "p3_monty_31::monty_31::MontyField31") [] [ FP ] ]
          (Self WIDTH FP)
          (* Instance *)
          [ ("new_from_constants", InstanceField.Method (new_from_constants WIDTH FP)) ].
    End Impl_p3_poseidon2_external_ExternalLayerConstructor_where_p3_monty_31_data_traits_FieldParameters_FP_WIDTH_p3_monty_31_monty_31_MontyField31_FP_for_p3_monty_31_no_packing_poseidon2_Poseidon2ExternalLayerMonty31_WIDTH_FP.
  End poseidon2.
End no_packing.
