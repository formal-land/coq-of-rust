(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Module errors.
  (* Trait *)
  (* Empty module 'ErrorGetter' *)
  
  Module underscore.
    Module Impl_revm_context_interface_errors_ErrorGetter_where_revm_context_interface_errors_ErrorGetter_T_where_core_marker_Sized_T_for_ref_mut_T.
      Definition Self (T : Ty.t) : Ty.t := Ty.apply (Ty.path "&mut") [] [ T ].
      
      (* #[auto_impl(&mut, Box)] *)
      Definition _Error (T : Ty.t) : Ty.t :=
        Ty.associated_in_trait "revm_context_interface::errors::ErrorGetter" [] [] T "Error".
      
      (* #[auto_impl(&mut, Box)] *)
      Definition take_error (T : Ty.t) (ε : list Value.t) (τ : list Ty.t) (α : list Value.t) : M :=
        let Self : Ty.t := Self T in
        match ε, τ, α with
        | [], [], [ self ] =>
          ltac:(M.monadic
            (let self :=
              M.alloc (|
                Ty.apply (Ty.path "&mut") [] [ Ty.apply (Ty.path "&mut") [] [ T ] ],
                self
              |) in
            M.call_closure (|
              Ty.apply
                (Ty.path "core::result::Result")
                []
                [
                  Ty.tuple [];
                  Ty.associated_in_trait
                    "revm_context_interface::errors::ErrorGetter"
                    []
                    []
                    T
                    "Error"
                ],
              M.get_trait_method (|
                "revm_context_interface::errors::ErrorGetter",
                T,
                [],
                [],
                "take_error",
                [],
                []
              |),
              [
                M.borrow (|
                  Pointer.Kind.MutRef,
                  M.deref (| M.read (| M.deref (| M.read (| self |) |) |) |)
                |)
              ]
            |)))
        | _, _, _ => M.impossible "wrong number of arguments"
        end.
      
      Axiom Implements :
        forall (T : Ty.t),
        M.IsTraitInstance
          "revm_context_interface::errors::ErrorGetter"
          (* Trait polymorphic consts *) []
          (* Trait polymorphic types *) []
          (Self T)
          (* Instance *)
          [
            ("Error", InstanceField.Ty (_Error T));
            ("take_error", InstanceField.Method (take_error T))
          ].
    End Impl_revm_context_interface_errors_ErrorGetter_where_revm_context_interface_errors_ErrorGetter_T_where_core_marker_Sized_T_for_ref_mut_T.
    Module Impl_revm_context_interface_errors_ErrorGetter_where_revm_context_interface_errors_ErrorGetter_T_where_core_marker_Sized_T_for_alloc_boxed_Box_T_alloc_alloc_Global.
      Definition Self (T : Ty.t) : Ty.t :=
        Ty.apply (Ty.path "alloc::boxed::Box") [] [ T; Ty.path "alloc::alloc::Global" ].
      
      (* #[auto_impl(&mut, Box)] *)
      Definition _Error (T : Ty.t) : Ty.t :=
        Ty.associated_in_trait "revm_context_interface::errors::ErrorGetter" [] [] T "Error".
      
      (* #[auto_impl(&mut, Box)] *)
      Definition take_error (T : Ty.t) (ε : list Value.t) (τ : list Ty.t) (α : list Value.t) : M :=
        let Self : Ty.t := Self T in
        match ε, τ, α with
        | [], [], [ self ] =>
          ltac:(M.monadic
            (let self :=
              M.alloc (|
                Ty.apply
                  (Ty.path "&mut")
                  []
                  [ Ty.apply (Ty.path "alloc::boxed::Box") [] [ T; Ty.path "alloc::alloc::Global" ]
                  ],
                self
              |) in
            M.call_closure (|
              Ty.apply
                (Ty.path "core::result::Result")
                []
                [
                  Ty.tuple [];
                  Ty.associated_in_trait
                    "revm_context_interface::errors::ErrorGetter"
                    []
                    []
                    T
                    "Error"
                ],
              M.get_trait_method (|
                "revm_context_interface::errors::ErrorGetter",
                T,
                [],
                [],
                "take_error",
                [],
                []
              |),
              [
                M.borrow (|
                  Pointer.Kind.MutRef,
                  M.deref (| M.read (| M.deref (| M.read (| self |) |) |) |)
                |)
              ]
            |)))
        | _, _, _ => M.impossible "wrong number of arguments"
        end.
      
      Axiom Implements :
        forall (T : Ty.t),
        M.IsTraitInstance
          "revm_context_interface::errors::ErrorGetter"
          (* Trait polymorphic consts *) []
          (* Trait polymorphic types *) []
          (Self T)
          (* Instance *)
          [
            ("Error", InstanceField.Ty (_Error T));
            ("take_error", InstanceField.Method (take_error T))
          ].
    End Impl_revm_context_interface_errors_ErrorGetter_where_revm_context_interface_errors_ErrorGetter_T_where_core_marker_Sized_T_for_alloc_boxed_Box_T_alloc_alloc_Global.
  End underscore.
  
End errors.
