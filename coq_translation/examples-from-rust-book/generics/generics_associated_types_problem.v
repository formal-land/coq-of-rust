(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Import Root.std.prelude.rust_2015.

Module Container.
  Record t : Set := { _ : i32; _ : i32;}.
  
  Global Instance Get_0 : Notation.Dot 0 := {
    Notation.dot '(Build_t x0 _) := x0;
  }.
  Global Instance Get_1 : Notation.Dot 1 := {
    Notation.dot '(Build_t _ x1) := x1;
  }.
End Container.
Definition Container := Container.t.

Module Contains.
  Class Trait (A B Self : Set) : Set := {
    contains : (ref Self) -> ((ref A) -> ((ref B) -> (M bool)));
    first : (ref Self) -> (M i32);
    last : (ref Self) -> (M i32);
  }.
  
  Global Instance Method_contains `(Trait) : Notation.Dot "contains" := {
    Notation.dot := contains;
  }.
  Global Instance Method_first `(Trait) : Notation.Dot "first" := {
    Notation.dot := first;
  }.
  Global Instance Method_last `(Trait) : Notation.Dot "last" := {
    Notation.dot := last;
  }.
End Contains.

Module Impl_Contains_for_Container.
  Definition Self := Container.
  
  Definition contains
      (self : ref Self)
      (number_1 : ref i32)
      (number_2 : ref i32) :=
    let return_type := bool in
    ltac:(function (
      (self.[0]).["eq"](| number_1 |).["andb"](| (self.[1]).["eq"](| number_2 |)
      |)
    : return_type)).
  
  Global Instance Method_contains : Notation.Dot "contains" := {
    Notation.dot := contains;
  }.
  
  Definition first (self : ref Self) :=
    let return_type := i32 in
    ltac:(function (
      self.[0]
    : return_type)).
  
  Global Instance Method_first : Notation.Dot "first" := {
    Notation.dot := first;
  }.
  
  Definition last (self : ref Self) :=
    let return_type := i32 in
    ltac:(function (
      self.[1]
    : return_type)).
  
  Global Instance Method_last : Notation.Dot "last" := {
    Notation.dot := last;
  }.
  
  Global Instance I : Contains.Trait Self i32 i32 := {
    Contains.contains := contains;
    Contains.first := first;
    Contains.last := last;
  }.
End Impl_Contains_for_Container.

Definition difference
    {A B C : Set}
    `{Contains.Trait A B C}
    (container : ref C) :=
  let return_type := i32 in
  ltac:(function (
    container.["last"](||).["sub"](| container.["first"](||) |)
  : return_type)).

Definition main :=
  let return_type := unit in
  ltac:(function (
    let number_1 := 3 in
    let number_2 := 10 in
    let container := Container.Build_t number_1 number_2 in
    let '_ :=
      let '_ :=
        _crate.io._print(|
          format_arguments::["new_v1"](|
            [ "Does container contain "; " and "; ": "; "
" ],
            [
              format_argument::["new_display"](| number_1 |);
              format_argument::["new_display"](| number_2 |);
              format_argument::["new_display"](|
                container.["contains"](| number_1, number_2 |)
              |)
            ]
          |)
        |) in
      tt in
    let '_ :=
      let '_ :=
        _crate.io._print(|
          format_arguments::["new_v1"](|
            [ "First number: "; "
" ],
            [ format_argument::["new_display"](| container.["first"](||) |) ]
          |)
        |) in
      tt in
    let '_ :=
      let '_ :=
        _crate.io._print(|
          format_arguments::["new_v1"](|
            [ "Last number: "; "
" ],
            [ format_argument::["new_display"](| container.["last"](||) |) ]
          |)
        |) in
      tt in
    let '_ :=
      let '_ :=
        _crate.io._print(|
          format_arguments::["new_v1"](|
            [ "The difference is: "; "
" ],
            [ format_argument::["new_display"](| difference(| container |) |) ]
          |)
        |) in
      tt in
    tt
  : return_type)).
