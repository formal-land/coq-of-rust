(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Import Root.std.prelude.rust_2015.

Module File := std.fs.File.
Definition File := File.t.

Module io := std.io.

Module BufReader := std.io.BufReader.
Definition BufReader := BufReader.t.

Definition read_lines (filename : String) :=
  let return_type := io.Lines (BufReader File) in
  ltac:(function (
    let file := File::["open"](| filename |).["unwrap"](||) in
    let '_ := M.Return io.BufReader::["new"](| file |).["lines"](||) in
    tt
  : return_type)).

Definition main :=
  let return_type := unit in
  ltac:(function (
    let lines := read_lines(| "./hosts".["to_string"](||) |) in
    match LangItem(| lines |) with
    | iter =>
      loop
        let '_ :=
          match LangItem(| iter |) with
          | None => M.Break
          | Some {| Some.0 := line; |} =>
            let '_ :=
              let '_ :=
                _crate.io._print(|
                  format_arguments::["new_v1"](|
                    [ ""; "
" ],
                    [ format_argument::["new_display"](| line.["unwrap"](||) |)
                    ]
                  |)
                |) in
              tt in
            tt
          end in
        tt
        from
        for
    end
  : return_type)).
