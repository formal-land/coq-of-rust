(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Import Root.std.prelude.rust_2015.

Module File := std.fs.File.
Definition File := File.t.

Module io := std.io.

Module Path := std.path.Path.
Definition Path := Path.t.

Definition main :=
  let return_type := unit in
  ltac:(function (
    if (let_if Ok lines := read_lines(| "./hosts" |) : bool) then
      match LangItem(| lines |) with
      | iter =>
        loop
          let _ : unit :=
            match LangItem(| iter |) with
            | None => M.Break
            | Some {| Some.0 := line; |} =>
              if (let_if Ok ip := line : bool) then
                let _ : unit :=
                  let _ : unit :=
                    _crate.io._print(|
                      format_arguments::["new_v1"](|
                        [ ""; "
" ],
                        [ format_argument::["new_display"](| ip |) ]
                      |)
                    |) in
                  tt in
                tt
              else
                tt
            end in
          tt
          from
          for
      end
    else
      tt
  : return_type)).

Definition read_lines {P : Set} `{AsRef.Trait Path P} (filename : P) :=
  let return_type := io.Result (io.Lines (io.BufReader File)) in
  ltac:(function (
    let file :=
      match LangItem(| File::["open"](| filename |) |) with
      | Break {| Break.0 := residual; |} => M.Return LangItem(| residual |)
      | Continue {| Continue.0 := val; |} => val
      end in
    Ok io.BufReader::["new"](| file |).["lines"](||)
  : return_type)).
