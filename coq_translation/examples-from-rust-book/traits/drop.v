(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Import Root.std.prelude.rust_2015.

Module Droppable.
  Record t : Set := {
    name : ref str;
  }.
  
  Global Instance Get_name : Notation.Dot "name" := {
    Notation.dot '(Build_t x0) := x0;
  }.
End Droppable.
Definition Droppable : Set := Droppable.t.

Module Impl_Drop_for_Droppable.
  Definition Self := Droppable.
  
  Definition drop (self : mut_ref Self) :=
    ltac:(function (
      let '_ :=
        let '_ :=
          _crate.io._print(|
            format_arguments::["new_v1"](|
              [ "> Dropping "; "
" ],
              [ format_argument::["new_display"](| self.["name"] |) ]
            |)
          |) in
        tt in
      tt
    : _)).
  
  Global Instance Method_drop : Notation.Dot "drop" := {
    Notation.dot := drop;
  }.
  
  Global Instance I : Drop.Trait Self := {
    Drop.drop := drop;
  }.
End Impl_Drop_for_Droppable.

Definition main :=
  let return_type := unit in
  ltac:(function (
    let _a := {| Droppable.name := "a"; |} in
    let '_ :=
      let _b := {| Droppable.name := "b"; |} in
      let '_ :=
        let _c := {| Droppable.name := "c"; |} in
        let _d := {| Droppable.name := "d"; |} in
        let '_ :=
          let '_ :=
            _crate.io._print(|
              format_arguments::["new_const"](| [ "Exiting block B
" ] |)
            |) in
          tt in
        tt in
      let '_ :=
        let '_ :=
          _crate.io._print(|
            format_arguments::["new_const"](| [ "Just exited block B
" ] |)
          |) in
        tt in
      let '_ :=
        let '_ :=
          _crate.io._print(|
            format_arguments::["new_const"](| [ "Exiting block A
" ] |)
          |) in
        tt in
      tt in
    let '_ :=
      let '_ :=
        _crate.io._print(|
          format_arguments::["new_const"](| [ "Just exited block A
" ] |)
        |) in
      tt in
    let '_ := drop(| _a |) in
    let '_ :=
      let '_ :=
        _crate.io._print(|
          format_arguments::["new_const"](| [ "end of the main function
" ] |)
        |) in
      tt in
    tt
  : return_type)).
