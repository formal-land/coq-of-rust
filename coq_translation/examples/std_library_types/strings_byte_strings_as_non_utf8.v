(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Import Root.std.prelude.rust_2015.

Module str := std.str.

(* #[allow(dead_code)] - function was ignored by the compiler *)
Definition main (_ : unit) : M unit :=
  let bytestring :=
    [116, 104, 105, 115, 32, 105, 115, 32, 97, 32, 98, 121, 116, 101, 32, 115, 116, 114, 105, 110, 103] in
  let* α0 := format_argument::["new_debug"] (deref bytestring) in
  let* α1 :=
    format_arguments::["new_v1"]
      (deref [ "A byte string: "; "
" ])
      (deref [ α0 ]) in
  let* _ := _crate.io._print α1 in
  let _ := tt in
  let escaped := [82, 117, 115, 116, 32, 97, 115, 32, 98, 121, 116, 101, 115] in
  let* α2 := format_argument::["new_debug"] (deref escaped) in
  let* α3 :=
    format_arguments::["new_v1"]
      (deref [ "Some escaped bytes: "; "
" ])
      (deref [ α2 ]) in
  let* _ := _crate.io._print α3 in
  let _ := tt in
  let raw_bytestring :=
    [92, 117, 123, 50, 49, 49, 68, 125, 32, 105, 115, 32, 110, 111, 116, 32, 101, 115, 99, 97, 112, 101, 100, 32, 104, 101, 114, 101] in
  let* α4 := format_argument::["new_debug"] (deref raw_bytestring) in
  let* α5 := format_arguments::["new_v1"] (deref [ ""; "
" ]) (deref [ α4 ]) in
  let* _ := _crate.io._print α5 in
  let _ := tt in
  let* α6 := str.from_utf8 raw_bytestring in
  let* α7 := let_if Ok my_str := α6 in
  let* _ :=
    if (α7 : bool) then
      let* α0 := format_argument::["new_display"] (deref my_str) in
      let* α1 :=
        format_arguments::["new_v1"]
          (deref [ "And the same as text: '"; "'
" ])
          (deref [ α0 ]) in
      let* _ := _crate.io._print α1 in
      let _ := tt in
      Pure tt
    else
      Pure tt in
  let _quotes :=
    [89, 111, 117, 32, 99, 97, 110, 32, 97, 108, 115, 111, 32, 117, 115, 101, 32, 34, 102, 97, 110, 99, 105, 101, 114, 34, 32, 102, 111, 114, 109, 97, 116, 116, 105, 110, 103, 44, 32, 92, 10, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 108, 105, 107, 101, 32, 119, 105, 116, 104, 32, 110, 111, 114, 109, 97, 108, 32, 114, 97, 119, 32, 115, 116, 114, 105, 110, 103, 115] in
  let shift_jis := [130, 230, 130, 168, 130, 177, 130, 187] in
  let* α8 := str.from_utf8 shift_jis in
  let* _ :=
    match α8 with
    | Ok my_str =>
      let* α0 := format_argument::["new_display"] (deref my_str) in
      let* α1 :=
        format_arguments::["new_v1"]
          (deref [ "Conversion successful: '"; "'
" ])
          (deref [ α0 ]) in
      let* _ := _crate.io._print α1 in
      Pure tt
    | Err e =>
      let* α0 := format_argument::["new_debug"] (deref e) in
      let* α1 :=
        format_arguments::["new_v1"]
          (deref [ "Conversion failed: "; "
" ])
          (deref [ α0 ]) in
      let* _ := _crate.io._print α1 in
      Pure tt
    end in
  Pure tt.
